"use strict";(self.webpackChunkdgdr=self.webpackChunkdgdr||[]).push([[516],{7516:(xO,Ua,Z)=>{Z.r(Ua),Z.d(Ua,{MainModule:()=>_O});var O=Z(4755),be=Z(2480),Vf=Z(8380);const Uf=[{fiche:"A0001",status:"valid\xe9",user:"ROMEO Santos",date:"07/06/2023",theme:"A",risque:"\xe9lev\xe9e"},{fiche:"A0052",status:"valid\xe9",user:"OLIVIERA Denis",date:"07/06/2023",theme:"B",risque:"faible"},{fiche:"A0023",status:"control\xe9",user:"ANGE Gabriel",date:"07/06/2023",theme:"A",risque:"\xe9lev\xe9e"},{fiche:"A0018",status:"valid\xe9",user:"HELENE Malia",date:"10/05/2023",theme:"A",risque:"moyenne"},{fiche:"B0085",status:"control\xe9",user:"JULES Pagny",date:"07/06/2023",theme:"D",risque:"faible"},{fiche:"A0001",status:"valid\xe9",user:"ROMEO Santos",date:"07/06/2023",theme:"I",risque:"\xe9lev\xe9e"},{fiche:"A0052",status:"valid\xe9",user:"OLIVIERA Denis",date:"07/06/2023",theme:"A",risque:"moyenne"},{fiche:"A0023",status:"control\xe9",user:"ANGE Gabriel",date:"07/06/2023",theme:"B",risque:"faible"},{fiche:"A0018",status:"valid\xe9",user:"HELENE Malia",date:"10/05/2023",theme:"B",risque:"faible"},{fiche:"B0085",status:"control\xe9",user:"JULES Pagny",date:"07/06/2023",theme:"C",risque:"faible"},{fiche:"A0001",status:"valid\xe9",user:"ROMEO Santos",date:"07/06/2023",theme:"H",risque:"faible"},{fiche:"A0052",status:"valid\xe9",user:"OLIVIERA Denis",date:"07/06/2023",theme:"A",risque:"faible"},{fiche:"A0023",status:"control\xe9",user:"ANGE Gabriel",date:"07/06/2023",theme:"B",risque:"moyenne"},{fiche:"A0018",status:"valid\xe9",user:"HELENE Malia",date:"10/05/2023",theme:"E",risque:"faible"},{fiche:"B0085",status:"control\xe9",user:"JULES Pagny",date:"07/06/2023",theme:"G",risque:"\xe9lev\xe9e"}],Ha=["Admin","RCCI","Manager","Junior","Chef de mission","Contributeur","Superadmin"];var Hf=Z(1913),r=Z(2223),Ts=Z(1217),It=Z(1728),se=Z(6996),ye=Z(9114),Ss=Z(787),R=Z(9401),As=Z(6205);const jf=["chart"];function Jf(n,e){if(1&n&&(r.TgZ(0,"mat-option",37),r._uU(1),r.qZA()),2&n){const t=e.$implicit;r.Q6J("value",t),r.xp6(1),r.hij(" ",t,"")}}function Yf(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"mat-form-field",34)(1,"mat-label"),r._uU(2,"Type de roles"),r.qZA(),r.TgZ(3,"mat-select",35),r.NdJ("ngModelChange",function(o){r.CHM(t);const s=r.oxw();return r.KtG(s.role=o)}),r.YNc(4,Jf,2,2,"mat-option",36),r.qZA()()}if(2&n){const t=r.oxw();r.xp6(3),r.Q6J("ngModel",t.role),r.xp6(1),r.Q6J("ngForOf",t.roles)}}function Wf(n,e){if(1&n&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&n){const t=r.oxw();r.xp6(1),r.hij(" : ",t.role,"")}}function $f(n,e){if(1&n&&(r.TgZ(0,"div",38)(1,"span",39),r._uU(2),r.qZA(),r._uU(3),r.TgZ(4,"span",40),r._uU(5),r.qZA(),r._uU(6," le "),r.TgZ(7,"span",41),r._uU(8),r.qZA()()),2&n){const t=e.$implicit;r.xp6(2),r.Oqu(t.fiche),r.xp6(1),r.hij(" ",t.status," par "),r.xp6(2),r.Oqu(t.user),r.xp6(3),r.Oqu(t.date)}}function Qf(n,e){if(1&n&&(r.TgZ(0,"div",42)(1,"div",10),r._uU(2,"Fiche par r\xf4le"),r.qZA(),r._UZ(3,"apx-chart",43),r.qZA()),2&n){const t=r.oxw();r.xp6(3),r.Q6J("series",t.chartOptionPie.seriesP)("chart",t.chartOptionPie.chart)("labels",t.chartOptionPie.labels)("responsive",t.chartOptionPie.responsive)}}let Kf=(()=>{class n{constructor(t){this.router=t,this.history=Uf,this.isAdmin=!1,this.roles=Ha,this.role="",this.theme=Hf.y,this.themeClasses=[],this.themeClasses=this.theme.map(i=>i.classe),this.chartOptionsMultiple={series:[{name:"Risque",data:[2,5,18,42,33,7,28,51,12,48]},{name:"Fiches",data:[15,9,2,25,0,12,6,37,8,42]}],chart:{type:"bar",height:350,width:600,stacked:!0,stackType:"100%"},responsive:[{breakpoint:480,options:{legend:{position:"bottom",offsetX:-10,offsetY:0}}}],xaxis:{categories:this.themeClasses},fill:{opacity:1},legend:{position:"right",offsetX:0,offsetY:50}},this.chartOptionsT={seriesP:[44,55,13,43,22,12,8,45,10,9],chart:{width:500,type:"pie"},labels:this.themeClasses,responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]},this.chartOptionsR={seriesP:[60,13,21],chart:{width:600,type:"donut"},labels:["Faible","Moyenne","Elev\xe9e"],plotOptions:{pie:{startAngle:-90,endAngle:90,offsetY:10}},grid:{padding:{bottom:-80}},responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]},this.chartOptionPie={seriesP:[44,55,13,43],chart:{width:480,type:"pie"},labels:["Admin","RCCI","Manager","Junior"],responsive:[{breakpoint:480,options:{chart:{width:420},legend:{position:"bottom"}}}]}}ngOnInit(){this.router.url.includes("admin=true")&&(this.isAdmin=!0)}}return n.\u0275fac=function(t){return new(t||n)(r.Y36(be.F0))},n.\u0275cmp=r.Xpm({type:n,selectors:[["app-dashboard"]],viewQuery:function(t,i){if(1&t&&r.Gf(jf,5),2&t){let o;r.iGM(o=r.CRH())&&(i.chart=o.first)}},decls:88,vars:27,consts:[[1,"d-flex","flex-row","flex-wrap"],[1,"me-4"],[1,"fw-bold"],[1,"d-flex","flex-row","mt-2"],["appearance","outline","class","me-3",4,"ngIf"],["id","planificationLink",1,"mt-1"],["mat-raised-button","","color","primary",1,"px-5","py-4"],[4,"ngIf"],[1,"d-flex","flex-row","flex-wrap","justify-content-around","mt-3","py-3",2,"background-color","white"],[1,"chart","py-3","px-5"],[1,"title"],[3,"series","chart","dataLabels","plotOptions","legend","stroke","xaxis"],[1,"py-3"],[1,"mt-3"],[1,"p-4","me-3"],[1,"px-5","py-3"],[1,"title","mb-5"],[1,"row","col-12"],[1,"col-6","box","not-started"],[1,"box-title"],[1,"box-stat"],[1,"col-6","box","in-progress"],[1,"col-6","box","awaiting"],[1,"col-6","box","diffused"],[1,"col-6","box","frozen"],[1,"col-8"],[3,"series","chart","xaxis","labels","responsive"],[1,"col-8","mt-5"],[3,"series","chart","xaxis","labels","grid","plotOptions","responsive"],[1,"d-flex","flex-row","flex-wrap","mt-2"],[1,"mt-4"],["class","mt-3 mb-2 pb-3 px-5","style","border-bottom: 1px solid lightgray;",4,"ngFor","ngForOf"],[1,"justify-content-start","ms-5"],["id","chart",4,"ngIf"],["appearance","outline",1,"me-3"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mt-3","mb-2","pb-3","px-5",2,"border-bottom","1px solid lightgray"],[1,"m-2","px-5","fiche-number"],[1,"fw-bold","name"],[1,"fw-bold","text-secondary"],["id","chart"],[3,"series","chart","labels","responsive"]],template:function(t,i){1&t&&(r.TgZ(0,"h3"),r._uU(1,"Tableau de bord"),r.qZA(),r.TgZ(2,"div",0)(3,"div",1)(4,"p")(5,"span",2),r._uU(6,"P\xe9riode : "),r.qZA(),r.TgZ(7,"span"),r._uU(8,"01/03/2023 - 30/06/2023"),r.qZA()(),r.TgZ(9,"div",3),r.YNc(10,Yf,5,2,"mat-form-field",4),r.TgZ(11,"div",5)(12,"button",6),r._uU(13,"Planifier les fiches du trimestres "),r.YNc(14,Wf,2,1,"span",7),r.qZA()()()()(),r.TgZ(15,"div",8)(16,"div",9)(17,"div",10),r._uU(18,"Fiche par th\xe8me et risque"),r.qZA(),r._UZ(19,"apx-chart",11),r.qZA(),r.TgZ(20,"div",12)(21,"div",10),r._uU(22,"Th\xe8me qui n'ont pas \xe9t\xe9 abord\xe9"),r.qZA(),r.TgZ(23,"mat-chip",13),r._uU(24,"Total: "),r.TgZ(25,"span",2),r._uU(26,"3"),r.qZA()(),r.TgZ(27,"p",13)(28,"mat-chip",14),r._uU(29,"A"),r.qZA(),r.TgZ(30,"mat-chip",14),r._uU(31,"E"),r.qZA(),r.TgZ(32,"mat-chip",14),r._uU(33,"J"),r.qZA()(),r._UZ(34,"div"),r.qZA(),r.TgZ(35,"div",15)(36,"div",16),r._uU(37,"Nombres :"),r.qZA(),r.TgZ(38,"div",17)(39,"div",18)(40,"span",19),r._uU(41,"Non d\xe9marr\xe9"),r.qZA(),r._UZ(42,"br"),r.TgZ(43,"h1",20),r._uU(44,"12"),r.qZA()(),r.TgZ(45,"div",21)(46,"span",19),r._uU(47,"En cours"),r.qZA(),r._UZ(48,"br"),r.TgZ(49,"h1",20),r._uU(50,"1"),r.qZA()(),r.TgZ(51,"div",22)(52,"span",19),r._uU(53,"En attente de relecture"),r.qZA(),r._UZ(54,"br"),r.TgZ(55,"h1",20),r._uU(56,"3"),r.qZA()(),r.TgZ(57,"div",23)(58,"span",19),r._uU(59,"Diffus\xe9"),r.qZA(),r._UZ(60,"br"),r.TgZ(61,"h1",20),r._uU(62,"13"),r.qZA()(),r.TgZ(63,"div",24)(64,"span",19),r._uU(65,"Fig\xe9"),r.qZA(),r._UZ(66,"br"),r.TgZ(67,"h1",20),r._uU(68,"2"),r.qZA()()()()(),r.TgZ(69,"div",8)(70,"div",15)(71,"div",10),r._uU(72,"Fiche par th\xe8me"),r.qZA(),r.TgZ(73,"div",25),r._UZ(74,"apx-chart",26),r.qZA()(),r.TgZ(75,"div",15)(76,"div",10),r._uU(77,"Fiche par risque"),r.qZA(),r.TgZ(78,"div",27),r._UZ(79,"apx-chart",28),r.qZA()()(),r.TgZ(80,"div",29)(81,"div",30)(82,"div",10),r._uU(83,"Historique"),r.qZA(),r.YNc(84,$f,9,4,"div",31),r.ALo(85,"slice"),r.qZA(),r.TgZ(86,"div",32),r.YNc(87,Qf,4,4,"div",33),r.qZA()()),2&t&&(r.xp6(10),r.Q6J("ngIf",i.isAdmin),r.xp6(4),r.Q6J("ngIf",i.isAdmin),r.xp6(5),r.Q6J("series",i.chartOptionsMultiple.series)("chart",i.chartOptionsMultiple.chart)("dataLabels",i.chartOptionsMultiple.dataLabels)("plotOptions",i.chartOptionsMultiple.plotOptions)("legend",i.chartOptionsMultiple.legend)("stroke",i.chartOptionsMultiple.stroke)("xaxis",i.chartOptionsMultiple.xaxis),r.xp6(55),r.Q6J("series",i.chartOptionsT.seriesP)("chart",i.chartOptionsT.chart)("xaxis",i.chartOptionsT.xaxis)("labels",i.chartOptionsT.labels)("responsive",i.chartOptionsT.responsive),r.xp6(5),r.Q6J("series",i.chartOptionsR.seriesP)("chart",i.chartOptionsR.chart)("xaxis",i.chartOptionsR.xaxis)("labels",i.chartOptionsR.labels)("grid",i.chartOptionsR.grid)("plotOptions",i.chartOptionsR.plotOptions)("responsive",i.chartOptionsR.responsive),r.xp6(5),r.Q6J("ngForOf",r.Dn7(85,23,i.history,0,5)),r.xp6(3),r.Q6J("ngIf",i.isAdmin))},dependencies:[Ts.ey,It.lW,se.HS,ye.KE,ye.hX,Ss.gD,R.JJ,R.On,O.sg,O.O5,As.x,O.OU],styles:['@import"https://fonts.googleapis.com/css?family=Inconsolata:700";.box[_ngcontent-%COMP%]{text-align:center}.box-title[_ngcontent-%COMP%]{font-weight:300;font-size:13px;color:#676565}.title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#33333c}.fiche-number[_ngcontent-%COMP%]{background-color:#de350b;color:#fff;font-size:12px;font-weight:500;padding:3px;border-radius:3px}.history[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:#454984}.btn-plan[_ngcontent-%COMP%]{letter-spacing:1px;background-color:#454984;border:none;border-radius:3px;font-size:13px;width:100%}#chart[_ngcontent-%COMP%]{max-width:600px;margin:35px auto}']}),n})();var no=Z(5861),ve=Z(3276),Pt=Z(2611),E=Z(3204);const io=[{archive:!1,created:!1,ref:"A-001",frequence:"Annuel et au fil de l'eau",responsable:"RCCI",risque:"Risques li\xe9s \xe0 la gouvernance et \xe0 l'actionnariat",theme:"Organisation de la SGP",constats:["Lorem ipsum dolor, sit amet consectetur adipisicing elit. Molestiae labore","Lorem ipsum dolor, sit amet consectetur adipisicing elit. Molestiae labore"],fichiers:["annuel.pdf","risques-li\xe9s-\xe0-la-gouvernance.docx"],intervenants:["Ami Nicole","Edouard Martins","Philippe Manson"]},{archive:!1,created:!1,ref:"A-002",frequence:"Annuel",responsable:"RCCI",risque:"Risques li\xe9s aux moyens humains de la SGP",theme:"Organisation de la SGP",constats:["Lorem ipsum dolor, sit amet consectetur adipisicing elit. Molestiae labore","Lorem ipsum dolor, sit amet consectetur adipisicing elit. Molestiae labore"],intervenants:["Ariella Lopez","Lucas Morgan"]},{archive:!0,created:!1,ref:"B-38834",frequence:"Annuelle",responsable:"Loma Hand",risque:"Accusantium eius explicabo molestiae ad quos quaerat.",theme:"Aut voluptas illum.Voluptas quibusdam ipsum eos et quia maiores et iusto asperiores.",constats:["Lorem ipsum dolor, sit amet consectetur adipisicing elit. Molestiae labore","praesentium delectus rem sed laudantium, cum quia dignissimos debitis ipsa cumque non recusandae eum tenetur eaque quod quaerat! Expedita, cum?"],fichiers:["risques-li\xe9s.xls"],intervenants:["Aurore Fabienne","Jacques Antoine","Marsela Figenzi","Ramzi Eric"]},{archive:!0,created:!1,ref:"B-45640",frequence:"Mensuelle",responsable:"Raven Haley",risque:"Aliquid est occaecati natus.",theme:"Recusandae eaque qui sapiente et.",constats:["Lorem ipsum dolor, sit amet consectetur adipisicing elit. Molestiae labore","praesentium delectus rem sed laudantium, cum quia dignissimos debitis ipsa cumque non recusandae eum tenetur eaque quod quaerat! Expedita, cum?"],fichiers:["risques-li\xe9s.xls","praesentium-delectus-rem-sed.pdf","my-fichier.pdf","Molestia-labore-praesentiu.jpeg"],intervenants:["Marsela Figenzi","Ramzi Eric"]},{archive:!0,created:!1,ref:"B-91166",frequence:"Quotidienne/journali\xe8re ",responsable:"Clay Greenholt",risque:"Possimus porro doloremque expedita blanditiis sapiente.",theme:"Beatae ab quaerat iste velit perspiciatis qui iure aut molestiae.",constats:["Lorem ipsum dolor, sit amet consectetur adipisicing elit. Molestiae labore","praesentium delectus rem sed laudantium, cum quia dignissimos debitis ipsa cumque non recusandae eum tenetur eaque quod quaerat! Expedita, cum?"],fichiers:["risques-li\xe9s.xls","my-fichier.pdf"],intervenants:["Philemont Mounir"]},{archive:!0,created:!1,ref:"B-85543",frequence:"Trimestrielle",responsable:"Olaf Reinger",risque:"Labore consequatur exercitationem est ad.",theme:"Recusandae sit nobis distinctio excepturi autem debitis non omnis vero.",constats:["Lorem ipsum dolor, sit amet consectetur adipisicing elit. Molestiae labore","praesentium delectus rem sed laudantium, cum quia dignissimos debitis ipsa cumque non recusandae eum tenetur eaque quod quaerat! Expedita, cum?"],fichiers:["Molestia-labore-praesentiu.jpeg","praesentium-delectus-rem-sed.pdf"],intervenants:["Aurore Fabienne","Jacques Antoine","Marsela Figenzi","Ramzi Eric"]},{archive:!1,created:!1,ref:"B-90785",frequence:"",responsable:"Albert Tremblay",risque:"Et qui aut enim aliquam.",theme:"Nam velit distinctio tempore itaque itaque ipsam aut.",constats:["Lorem ipsum dolor, sit amet consectetur adipisicing elit. Molestiae labore","praesentium delectus rem sed laudantium, cum quia dignissimos debitis ipsa cumque non recusandae eum tenetur eaque quod quaerat! Expedita, cum?"],fichiers:["praesentium-delectus-rem-sed.pdf"],intervenants:["Aurore Fabienne","Jacques Antoine","Marsela Figenzi","Ramzi Eric"]},{archive:!1,created:!1,ref:"B-30611",frequence:"Semestrielle",responsable:"Karina Hettinger",risque:"Ut sunt tempora in laboriosam.",theme:"Adipisci quaerat sint et sint rerum corporis numquam eos.",constats:["Lorem ipsum dolor, sit amet consectetur adipisicing elit. Molestiae labore","praesentium delectus rem sed laudantium, cum quia dignissimos debitis ipsa cumque non recusandae eum tenetur eaque quod quaerat! Expedita, cum?"],fichiers:["risques-li\xe9s.xls"],intervenants:["Aurore Fabienne","Jacques Antoine","Marsela Figenzi","Ramzi Eric"]},{archive:!0,created:!1,ref:"B-10432",frequence:"Tous les 12 jours",responsable:"Daren Paucek",risque:"Omnis mollitia fugit.",theme:"Similique sunt illo adipisci ex sed.",constats:["Lorem ipsum dolor, sit amet consectetur adipisicing elit. Molestiae labore","praesentium delectus rem sed laudantium, cum quia dignissimos debitis ipsa cumque non recusandae eum tenetur eaque quod quaerat! Expedita, cum?"],fichiers:["risques-li\xe9s.xls"],intervenants:["Aurore Fabienne","Jacques Antoine","Marsela Figenzi","Ramzi Eric"]},{archive:!1,created:!1,ref:"B-36519",frequence:"2 semaines",responsable:"Destiney Parker",risque:"Distinctio adipisci earum veritatis porro vero.",theme:"Adipisci non autem consequatur.",constats:["Lorem ipsum dolor, sit amet consectetur adipisicing elit. Molestiae labore","praesentium delectus rem sed laudantium, cum quia dignissimos debitis ipsa cumque non recusandae eum tenetur eaque quod quaerat! Expedita, cum?"],fichiers:["risques-li\xe9s.xls"],intervenants:["Aurore Fabienne","Jacques Antoine","Marsela Figenzi","Ramzi Eric"]},{archive:!1,created:!1,ref:"B-12206",frequence:"Mensuelle",responsable:"Emely Marks",risque:"Magnam tempora corrupti enim ipsa.",theme:"In et sed error.",constats:["Lorem ipsum dolor, sit amet consectetur adipisicing elit. Molestiae labore","praesentium delectus rem sed laudantium, cum quia dignissimos debitis ipsa cumque non recusandae eum tenetur eaque quod quaerat! Expedita, cum?"],fichiers:["risques-li\xe9s.xls"],intervenants:["Aurore Fabienne","Jacques Antoine","Marsela Figenzi","Ramzi Eric"]},{archive:!0,created:!1,ref:"B-16387",frequence:"Annuel et au fil de l'eau",responsable:"Haskell Cormier",risque:"Est quibusdam omnis sequi voluptatem temporibus.",theme:"Ut quia id.",constats:["Lorem ipsum dolor, sit amet consectetur adipisicing elit. Molestiae labore","praesentium delectus rem sed laudantium, cum quia dignissimos debitis ipsa cumque non recusandae eum tenetur eaque quod quaerat! Expedita, cum?"],fichiers:["risques-li\xe9s.xls"],intervenants:["Aurore Fabienne","Jacques Antoine","Marsela Figenzi","Ramzi Eric"]},{archive:!1,created:!1,ref:"B-98302",frequence:"Quotidienne/journali\xe8re ",responsable:"Deven Walker",risque:"Vel esse dolor praesentium ad architecto quibusdam.",theme:"Quis voluptate tempore quis similique suscipit.",constats:["Lorem ipsum dolor, sit amet consectetur adipisicing elit. Molestiae labore","praesentium delectus rem sed laudantium, cum quia dignissimos debitis ipsa cumque non recusandae eum tenetur eaque quod quaerat! Expedita, cum?"],fichiers:["risques-li\xe9s.xls"],intervenants:["Aurore Fabienne","Jacques Antoine","Marsela Figenzi","Ramzi Eric"]},{archive:!1,created:!1,ref:"B-39448",frequence:"Quotidienne/journali\xe8re ",responsable:"Bradley Hermann",risque:"Provident doloremque quidem soluta ut repellat.",theme:"Non quam fugiat neque officia.",constats:["Lorem ipsum dolor, sit amet consectetur adipisicing elit. Molestiae labore","praesentium delectus rem sed laudantium, cum quia dignissimos debitis ipsa cumque non recusandae eum tenetur eaque quod quaerat! Expedita, cum?"],fichiers:["risques-li\xe9s.xls"],intervenants:["Aurore Fabienne","Jacques Antoine"]}];var Gf=Z(5226),ii=Z.n(Gf),Ds=Z(5580),J=Z(6012),Os=Z(9560),Je=Z(3649);function Xf(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"button",40),r.NdJ("click",function(){r.CHM(t);const o=r.oxw(3);return r.KtG(o.createFiche())}),r.TgZ(1,"div",37),r._UZ(2,"i",41),r.qZA()()}}function tp(n,e){1&n&&(r.TgZ(0,"button",36)(1,"div",37),r._UZ(2,"i",42),r.qZA()())}function ep(n,e){1&n&&(r.TgZ(0,"button",36)(1,"div",37),r._UZ(2,"i",43),r.qZA()())}function np(n,e){1&n&&(r.TgZ(0,"button",44),r._UZ(1,"i",45),r.qZA())}function ip(n,e){if(1&n&&(r.TgZ(0,"mat-card",30)(1,"mat-card-header")(2,"mat-card-subtitle"),r._uU(3,"22/05/2023"),r.qZA(),r.TgZ(4,"mat-card-title"),r._uU(5),r.qZA()(),r.TgZ(6,"mat-card-content")(7,"p")(8,"mat-chip"),r._uU(9),r.qZA()(),r.TgZ(10,"p")(11,"span",31),r._uU(12,"Fr\xe9quence"),r.qZA(),r._uU(13),r.qZA(),r.TgZ(14,"p")(15,"span",31),r._uU(16,"Th\xe8me"),r.qZA(),r._uU(17),r.qZA(),r.TgZ(18,"p")(19,"span",31),r._uU(20,"Risques"),r.qZA(),r._uU(21),r.qZA()(),r.TgZ(22,"mat-card-actions",32)(23,"div",33),r.YNc(24,Xf,3,0,"button",34),r.YNc(25,tp,3,0,"button",35),r.TgZ(26,"button",36)(27,"div",37),r._UZ(28,"i",38),r.qZA()(),r.YNc(29,ep,3,0,"button",35),r.YNc(30,np,2,0,"button",39),r.qZA()()()),2&n){const t=e.$implicit;r.xp6(5),r.Oqu(t.ref),r.xp6(4),r.hij(" ",t.responsable," "),r.xp6(4),r.hij(" : ",t.frequence,""),r.xp6(4),r.hij(" : ",t.theme,""),r.xp6(4),r.hij(" : ",t.risque,""),r.xp6(3),r.Q6J("ngIf",!t.created),r.xp6(1),r.Q6J("ngIf",t.created),r.xp6(4),r.Q6J("ngIf",!t.archive),r.xp6(1),r.Q6J("ngIf",t.archive)}}function op(n,e){if(1&n&&(r.TgZ(0,"div",27)(1,"div",28),r.YNc(2,ip,31,9,"mat-card",29),r.qZA()()),2&n){const t=r.oxw();r.xp6(2),r.Q6J("ngForOf",t.dataSource.filteredData)}}function sp(n,e){1&n&&(r.TgZ(0,"th",46),r._uU(1,"R\xe9f\xe9rence"),r.qZA())}function rp(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"td",47),r.NdJ("click",function(){const s=r.CHM(t).$implicit,a=r.oxw();return r.KtG(a.openRef=s.ref)}),r.TgZ(1,"div"),r._uU(2),r.qZA()()}if(2&n){const t=e.$implicit;r.xp6(2),r.Oqu(t.ref)}}function ap(n,e){1&n&&(r.TgZ(0,"th",46),r._uU(1,"Responsable"),r.qZA())}function lp(n,e){if(1&n&&(r.TgZ(0,"div"),r._uU(1),r.qZA()),2&n){const t=r.oxw().$implicit;r.xp6(1),r.Oqu(t.responsable)}}function cp(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"div",51),r.NdJ("click",function(){r.CHM(t);const o=r.oxw(3);return r.KtG(o.createFiche())}),r._UZ(1,"i",41),r.TgZ(2,"span"),r._uU(3,"Cr\xe9er une instance"),r.qZA()()}}function dp(n,e){1&n&&(r.TgZ(0,"div",52),r._UZ(1,"i",42),r.TgZ(2,"span",53),r._uU(3,"Consulter la fiche"),r.qZA()())}function up(n,e){if(1&n&&(r.TgZ(0,"div"),r.YNc(1,cp,4,0,"div",49),r.YNc(2,dp,4,0,"div",50),r.qZA()),2&n){const t=r.oxw().$implicit;r.xp6(1),r.Q6J("ngIf",!t.created),r.xp6(1),r.Q6J("ngIf",t.created)}}function hp(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"td",47),r.NdJ("click",function(){const s=r.CHM(t).$implicit,a=r.oxw();return r.KtG(a.openRef=s.ref)}),r.YNc(1,lp,2,1,"div",48),r.YNc(2,up,3,2,"div",48),r.qZA()}if(2&n){const t=e.$implicit,i=r.oxw();r.xp6(1),r.Q6J("ngIf",i.openRef!==t.ref),r.xp6(1),r.Q6J("ngIf",i.openRef===t.ref)}}function fp(n,e){1&n&&(r.TgZ(0,"th",46),r._uU(1,"Fr\xe9quence"),r.qZA())}function pp(n,e){if(1&n&&(r.TgZ(0,"div"),r._uU(1),r.qZA()),2&n){const t=r.oxw().$implicit;r.xp6(1),r.Oqu(t.frequence)}}function mp(n,e){1&n&&(r.TgZ(0,"div")(1,"div",52),r._UZ(2,"i",54),r.TgZ(3,"span"),r._uU(4,"Modifier"),r.qZA()()())}function gp(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"td",47),r.NdJ("click",function(){const s=r.CHM(t).$implicit,a=r.oxw();return r.KtG(a.openRef=s.ref)}),r.YNc(1,pp,2,1,"div",48),r.YNc(2,mp,5,0,"div",48),r.qZA()}if(2&n){const t=e.$implicit,i=r.oxw();r.xp6(1),r.Q6J("ngIf",i.openRef!==t.ref),r.xp6(1),r.Q6J("ngIf",i.openRef===t.ref)}}function _p(n,e){1&n&&(r.TgZ(0,"th",46),r._uU(1,"Th\xe8me"),r.qZA())}function xp(n,e){if(1&n&&(r.TgZ(0,"div"),r._uU(1),r.qZA()),2&n){const t=r.oxw().$implicit;r.xp6(1),r.Oqu(t.theme)}}function bp(n,e){1&n&&(r.TgZ(0,"div",52),r._UZ(1,"i",43),r.TgZ(2,"span"),r._uU(3,"Archiver"),r.qZA()())}function yp(n,e){1&n&&(r.TgZ(0,"div",52),r._UZ(1,"i",45),r.TgZ(2,"span"),r._uU(3,"D\xe9sarchiver"),r.qZA()())}function vp(n,e){if(1&n&&(r.TgZ(0,"div"),r.YNc(1,bp,4,0,"div",50),r.YNc(2,yp,4,0,"div",50),r.qZA()),2&n){const t=r.oxw().$implicit;r.xp6(1),r.Q6J("ngIf",!t.archive),r.xp6(1),r.Q6J("ngIf",t.archive)}}function Cp(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"td",47),r.NdJ("click",function(){const s=r.CHM(t).$implicit,a=r.oxw();return r.KtG(a.openRef=s.ref)}),r.YNc(1,xp,2,1,"div",48),r.YNc(2,vp,3,2,"div",48),r.qZA()}if(2&n){const t=e.$implicit,i=r.oxw();r.xp6(1),r.Q6J("ngIf",i.openRef!==t.ref),r.xp6(1),r.Q6J("ngIf",i.openRef===t.ref)}}function kp(n,e){1&n&&(r.TgZ(0,"th",46),r._uU(1,"Risques"),r.qZA())}function wp(n,e){if(1&n&&(r.TgZ(0,"div"),r._uU(1),r.qZA()),2&n){const t=r.oxw().$implicit;r.xp6(1),r.Oqu(t.risque)}}function Mp(n,e){1&n&&r._UZ(0,"div")}function Tp(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"td",47),r.NdJ("click",function(){const s=r.CHM(t).$implicit,a=r.oxw();return r.KtG(a.openRef=s.ref)}),r.YNc(1,wp,2,1,"div",48),r.YNc(2,Mp,1,0,"div",48),r.qZA()}if(2&n){const t=e.$implicit,i=r.oxw();r.xp6(1),r.Q6J("ngIf",i.openRef!==t.ref),r.xp6(1),r.Q6J("ngIf",i.openRef===t.ref)}}function Sp(n,e){1&n&&r._UZ(0,"tr",55)}function Ap(n,e){1&n&&r._UZ(0,"tr",56)}function Dp(n,e){if(1&n&&(r.TgZ(0,"tr",57)(1,"td",58),r._uU(2),r.qZA()()),2&n){r.oxw();const t=r.MAs(11);r.xp6(2),r.hij(' Pas de donn\xe9es \xe0 correspondant \xe0 la recherche "',t.value,'" ')}}const Op=function(n){return{display:n}},Ep=function(){return[5,10,20]};let Np=(()=>{class n{ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}constructor(t){this.dialog=t,this.data=io,this.isList=!0,this.displayedColumns=["ref","frequence","responsable","theme","risque"],this.dataSource=new E.by(io)}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}createFiche(){return(0,no.Z)(function*(){yield ii().fire({text:"Une instance a \xe9t\xe9 ajout\xe9e dans le planning de contr\xf4le.",icon:"success",showConfirmButton:!0})})()}}return n.\u0275fac=function(t){return new(t||n)(r.Y36(Ds.uw))},n.\u0275cmp=r.Xpm({type:n,selectors:[["app-fiches-vierges"]],viewQuery:function(t,i){if(1&t&&(r.Gf(ve.NW,5),r.Gf(Pt.YE,5)),2&t){let o;r.iGM(o=r.CRH())&&(i.paginator=o.first),r.iGM(o=r.CRH())&&(i.sort=o.first)}},decls:43,vars:11,consts:[[1,"d-flex","m-4","justify-content-center"],["role","link","routerLink","/documents/add","mat-stroked-button","","color","primary","id","new-cartographie-link"],[1,"d-flex","align-items-center"],[1,"bi","bi-plus-circle","ms-2"],[1,"d-flex","w-100","justify-content-center"],["id","search-link",1,"w-50"],["type","text","id","formGroupExampleInput2","placeholder","Rechercher...",1,"form-control",3,"keyup"],["input",""],[1,"d-flex","justify-content-center","m-4"],["id","display-change",1,"d-flex","justify-content-center"],["mat-icon-button","","matTooltip","Listes","id","mode-list-link",3,"color","click"],["mat-icon-button","","matTooltip","Vignette","id","mode-vignette-link",3,"color","click"],["class","animate__animated animate__slideInLeft container-fluid",4,"ngIf"],[1,"animate__animated","animate__slideInLeft","container-fluid",3,"ngStyle"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","ref"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","responsable"],["matColumnDef","frequence"],["matColumnDef","theme"],["matColumnDef","risque"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],[1,"animate__animated","animate__slideInLeft","container-fluid"],[1,"d-flex","flex-row","flex-wrap","justify-content-center"],["class","m-3 justify-content-between","style","max-width: 250px; min-width: 300px",4,"ngFor","ngForOf"],[1,"m-3","justify-content-between",2,"max-width","250px","min-width","300px"],[1,"fw-bold"],[1,"justify-content-center"],[1,"d-flex","flex-row","align-items-center","flex-nowrap","border-top"],["mat-button","","matTooltip","Cr\xe9er une instance","class","mt-2 mb-2",3,"click",4,"ngIf"],["mat-button","","class","mt-2 mb-2",4,"ngIf"],["mat-button","",1,"mt-2","mb-2"],[1,"d-flex","flex-column","justify-content-center",2,"font-size","20px"],[1,"bi","text-primary","bi-pen","m-1"],["class","d-flex flex-column justify-content-center","style","font-size: 20px","mat-button","",4,"ngIf"],["mat-button","","matTooltip","Cr\xe9er une instance",1,"mt-2","mb-2",3,"click"],[1,"bi","bi-file-earmark-plus","m-1"],[1,"bi","bi-eye","m-1"],[1,"bi","bi-trash","m-1"],["mat-button","",1,"d-flex","flex-column","justify-content-center",2,"font-size","20px"],[1,"bi","bi-recycle","m-1"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",3,"click"],[4,"ngIf"],["role","button","class","menu-btn",3,"click",4,"ngIf"],["role","button","class","menu-btn",4,"ngIf"],["role","button",1,"menu-btn",3,"click"],["role","button",1,"menu-btn"],[1,"text-nowrap"],[1,"bi","bi-pen","m-1"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell","p-4"]],template:function(t,i){1&t&&(r.TgZ(0,"h3"),r._uU(1,"Cartographie des risques"),r.qZA(),r.TgZ(2,"div",0)(3,"button",1)(4,"span",2)(5,"span"),r._uU(6,"Ajouter une nouvelle ligne"),r.qZA(),r._UZ(7,"i",3),r.qZA()()(),r.TgZ(8,"div",4)(9,"div",5)(10,"input",6,7),r.NdJ("keyup",function(s){return i.applyFilter(s)}),r.qZA()()(),r.TgZ(12,"div",8)(13,"div",9)(14,"button",10),r.NdJ("click",function(){return i.isList=!0}),r.TgZ(15,"mat-icon"),r._uU(16,"list"),r.qZA()(),r.TgZ(17,"button",11),r.NdJ("click",function(){return i.isList=!1}),r.TgZ(18,"mat-icon"),r._uU(19,"grid_on"),r.qZA()()()(),r.YNc(20,op,3,1,"div",12),r.TgZ(21,"div",13)(22,"div",14)(23,"table",15),r.ynx(24,16),r.YNc(25,sp,2,0,"th",17),r.YNc(26,rp,3,1,"td",18),r.BQk(),r.ynx(27,19),r.YNc(28,ap,2,0,"th",17),r.YNc(29,hp,3,2,"td",18),r.BQk(),r.ynx(30,20),r.YNc(31,fp,2,0,"th",17),r.YNc(32,gp,3,2,"td",18),r.BQk(),r.ynx(33,21),r.YNc(34,_p,2,0,"th",17),r.YNc(35,Cp,3,2,"td",18),r.BQk(),r.ynx(36,22),r.YNc(37,kp,2,0,"th",17),r.YNc(38,Tp,3,2,"td",18),r.BQk(),r.YNc(39,Sp,1,0,"tr",23),r.YNc(40,Ap,1,0,"tr",24),r.YNc(41,Dp,3,1,"tr",25),r.qZA(),r._UZ(42,"mat-paginator",26),r.qZA()()),2&t&&(r.xp6(14),r.Q6J("color",i.isList?"primary":""),r.xp6(3),r.Q6J("color",i.isList?"":"primary"),r.xp6(3),r.Q6J("ngIf",!i.isList),r.xp6(1),r.Q6J("ngStyle",r.VKq(8,Op,i.isList?"block":"none")),r.xp6(2),r.Q6J("dataSource",i.dataSource),r.xp6(16),r.Q6J("matHeaderRowDef",i.displayedColumns),r.xp6(1),r.Q6J("matRowDefColumns",i.displayedColumns),r.xp6(2),r.Q6J("pageSizeOptions",r.DdM(10,Ep)))},dependencies:[It.lW,It.RK,J.a8,J.hq,J.dn,J.dk,J.$j,J.n5,se.HS,Os.Hw,ve.NW,Pt.YE,Pt.nU,E.BZ,E.fO,E.as,E.w1,E.Dz,E.nj,E.ge,E.ev,E.XQ,E.Gk,E.Ee,Je.gM,O.sg,O.O5,O.PC,be.rH],styles:[".menu-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:start;font-size:14px;text-align:center}.menu-btn[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{text-decoration:underline}tr[_ngcontent-%COMP%]:hover{background-color:#eff4f7!important}.bi[_ngcontent-%COMP%]{color:#3f51b5!important}"]}),n})();const Ip=["Piper Jaskolski","Eliezer Borer","Kiara Marvin","Gretchen Abernathy","Vidal Kreiger","Josh Carroll","Karl Klein","Bianka Hyatt","Eric Macejkovic","Florian Langworth","Amy Baumbach","Declan Mante","Malvina Kohler","Reyna Schumm","Dayana Armstrong","Sandrine O'Reilly","John Rath","Emmett Rippin","Karen Schultz","Clint Volkman","Brady Jast","Tremaine Stokes","Easton Kassulke","Jettie Mueller","Roscoe Gutkowski","Raymundo Kemmer","Louvenia Donnelly","Savion Reinger"];var Es=Z(9609);function Pp(n,e){if(1&n&&(r.TgZ(0,"mat-option",5),r._uU(1),r.qZA()),2&n){const t=e.$implicit;r.xp6(1),r.Oqu(t)}}function Rp(n,e){if(1&n&&(r.TgZ(0,"mat-option",5),r._uU(1),r.qZA()),2&n){const t=e.$implicit;r.xp6(1),r.Oqu(t)}}function Fp(n,e){if(1&n&&(r.TgZ(0,"mat-option",5),r._uU(1),r.qZA()),2&n){const t=e.$implicit;r.xp6(1),r.Oqu(t)}}let Zp=(()=>{class n{constructor(t){this.router=t,this.persons=Ip}uploadFile(){$("#file-input").trigger("click")}cancel(){this.router.navigateByUrl("/fiches-vierges")}add(){var t=this;return(0,no.Z)(function*(){yield ii().fire({text:"Succ\xe8s.",icon:"success",showConfirmButton:!0}),t.cancel()})()}}return n.\u0275fac=function(t){return new(t||n)(r.Y36(be.F0))},n.\u0275cmp=r.Xpm({type:n,selectors:[["app-nouveau-fiche-vierge"]],decls:174,vars:3,consts:[[1,"d-flex","animate__animated","animate__fadeInDown","justify-content-center","w-100","p-4","flex-column"],[1,"mb-4"],["appearance","outline"],["matInput",""],["value","one"],["value","one",1,"text-capitalize"],["class","text-capitalize","value","one",4,"ngFor","ngForOf"],[1,"mt-4","d-flex","justify-content-between"],["mat-raised-button","","color","primary",3,"click"],["mat-button","",3,"click"],["id","file-input","type","file","hidden",""]],template:function(t,i){1&t&&(r.TgZ(0,"div",0)(1,"h1",1),r._uU(2,"Ajout d'une fiche"),r.qZA(),r.TgZ(3,"mat-form-field",2)(4,"mat-label"),r._uU(5,"R\xe9f\xe9rence"),r.qZA(),r._UZ(6,"input",3),r.qZA(),r.TgZ(7,"mat-form-field",2)(8,"mat-label"),r._uU(9,"D\xe9scription"),r.qZA(),r._UZ(10,"textarea",3),r.qZA(),r.TgZ(11,"mat-form-field",2)(12,"mat-label"),r._uU(13,"R\xe9sponsable"),r.qZA(),r.TgZ(14,"mat-select")(15,"mat-option",4),r._uU(16,"RCCI"),r.qZA(),r.TgZ(17,"mat-option",4),r._uU(18,"Manager"),r.qZA(),r.TgZ(19,"mat-option",4),r._uU(20,"Junior"),r.qZA(),r.TgZ(21,"mat-option",4),r._uU(22,"Chef de mission"),r.qZA(),r.TgZ(23,"mat-option",4),r._uU(24,"Contributeur"),r.qZA()()(),r.TgZ(25,"mat-form-field",2)(26,"mat-label"),r._uU(27,"Fr\xe9quence"),r.qZA(),r.TgZ(28,"mat-select")(29,"mat-option",5),r._uU(30,"mensuel"),r.qZA(),r.TgZ(31,"mat-option",5),r._uU(32,"trimestriel"),r.qZA(),r.TgZ(33,"mat-option",5),r._uU(34,"semestriel"),r.qZA(),r.TgZ(35,"mat-option",5),r._uU(36,"annuel"),r.qZA()()(),r.TgZ(37,"mat-form-field",2)(38,"mat-label"),r._uU(39,"Risque"),r.qZA(),r.TgZ(40,"mat-select")(41,"mat-option",5),r._uU(42,"Faible"),r.qZA(),r.TgZ(43,"mat-option",5),r._uU(44,"Moyen"),r.qZA(),r.TgZ(45,"mat-option",5),r._uU(46,"Elev\xe9"),r.qZA()()(),r.TgZ(47,"mat-form-field",2)(48,"mat-label"),r._uU(49,"Nature de risque"),r.qZA(),r.TgZ(50,"mat-select")(51,"mat-option",5),r._uU(52,"Non-conformit\xe9"),r.qZA()()(),r.TgZ(53,"mat-form-field",2)(54,"mat-label"),r._uU(55,"Classe theme"),r.qZA(),r.TgZ(56,"mat-select")(57,"mat-option",5),r._uU(58,"A"),r.qZA()()(),r.TgZ(59,"mat-form-field",2)(60,"mat-label"),r._uU(61,"Theme"),r.qZA(),r.TgZ(62,"mat-select")(63,"mat-option",5),r._uU(64,"Organisation de la SGP"),r.qZA()()(),r.TgZ(65,"mat-form-field",2)(66,"mat-label"),r._uU(67,"Description de ton risque"),r.qZA(),r.TgZ(68,"mat-select")(69,"mat-option",5),r._uU(70,"Risques li\xe9s \xe0 la gouvernance et \xe0 l'actionnariat"),r.qZA(),r.TgZ(71,"mat-option",5),r._uU(72,"Risques li\xe9s aux moyens humains de la SGP"),r.qZA(),r.TgZ(73,"mat-option",5),r._uU(74,"Risques li\xe9s aux moyens techniques de la SGP"),r.qZA(),r.TgZ(75,"mat-option",5),r._uU(76,"Risques li\xe9s \xe0 la solidit\xe9 finanic\xe8re"),r.qZA(),r.TgZ(77,"mat-option",5),r._uU(78,"Risques relatifs aux fonds propres r\xe9glementaires"),r.qZA(),r.TgZ(79,"mat-option",5),r._uU(80,"Risques li\xe9s \xe0 la cybers\xe9curit\xe9"),r.qZA(),r.TgZ(81,"mat-option",5),r._uU(82,"Risques de fraude"),r.qZA(),r.TgZ(83,"mat-option",5),r._uU(84,"Risques li\xe9s \xe0 la politique de r\xe9mun\xe9ration"),r.qZA()()(),r.TgZ(85,"mat-form-field",2)(86,"mat-label"),r._uU(87,"Mesure pr\xe9ventive : dispositif / proc\xe9dure"),r.qZA(),r.TgZ(88,"mat-select")(89,"mat-option",5),r._uU(90,"Existence des statuts, pactes d'actionnaires Tenue des assembl\xe9es Conseils de surveillance Directoire/ Conseil d'administration 2 dirigeants effectifs et temps de pr\xe9sence des dirigeants"),r.qZA(),r.TgZ(91,"mat-option",5),r._uU(92,"Pr\xe9sentation des fonctions et des responsabilit\xe9s Niveau de connaissance des collaborateurs R\xe9partition des responsabilit\xe9s"),r.qZA()()(),r.TgZ(93,"mat-form-field",2)(94,"mat-label"),r._uU(95,"Formalisation de la mesure pr\xe9ventive"),r.qZA(),r.TgZ(96,"mat-select")(97,"mat-option",5),r._uU(98,"Date signature des documents Calendrier des instances PV des instances"),r.qZA(),r.TgZ(99,"mat-option",5),r._uU(100,"Organigramme avec ligne hi\xe9rarchique, identification des fonctions cl\xe9s Proc\xe9dure d'organisation g\xe9n\xe9rale"),r.qZA()()(),r.TgZ(101,"mat-form-field",2)(102,"mat-label"),r._uU(103,"Pr\xe9sentation contr\xf4le 1er niveau"),r.qZA(),r.TgZ(104,"mat-select")(105,"mat-option",5),r._uU(106,"Kbis, PV"),r.qZA(),r.TgZ(107,"mat-option",5),r._uU(108,"Mise \xe0 jour de l'organigramme"),r.qZA()()(),r.TgZ(109,"mat-form-field",2)(110,"mat-label"),r._uU(111,"Qui est en charge des contr\xf4les de 1er niveau"),r.qZA(),r.TgZ(112,"mat-select")(113,"mat-option",5),r._uU(114,"Service juridique / Secr\xe9tariat g\xe9n\xe9ral"),r.qZA(),r.TgZ(115,"mat-option",5),r._uU(116,"Direction g\xe9n\xe9rale/ DRH Secr\xe9tariat g\xe9n\xe9ral"),r.qZA()()(),r.TgZ(117,"mat-form-field",2)(118,"mat-label"),r._uU(119,"Qualification du risque de niveau 1"),r.qZA(),r.TgZ(120,"mat-select")(121,"mat-option",5),r._uU(122,"Qualification du risque"),r.qZA(),r.TgZ(123,"mat-option",5),r._uU(124,"sanction"),r.qZA(),r.TgZ(125,"mat-option",5),r._uU(126,"commercial (clients/ r\xe9clamation)"),r.qZA(),r.TgZ(127,"mat-option",5),r._uU(128,"financier"),r.qZA(),r.TgZ(129,"mat-option",5),r._uU(130,"sanction"),r.qZA(),r.TgZ(131,"mat-option",5),r._uU(132,"r\xe9putation"),r.qZA(),r.TgZ(133,"mat-option",5),r._uU(134,"financier"),r.qZA(),r.TgZ(135,"mat-option",5),r._uU(136,"sanction"),r.qZA()()(),r.TgZ(137,"mat-form-field",2)(138,"mat-label"),r._uU(139,"Qualification du risque de niveau 2"),r.qZA(),r.TgZ(140,"mat-select")(141,"mat-option",5),r._uU(142,"Qualification du risque"),r.qZA(),r.TgZ(143,"mat-option",5),r._uU(144,"r\xe9putation"),r.qZA(),r.TgZ(145,"mat-option",5),r._uU(146,"financier"),r.qZA(),r.TgZ(147,"mat-option",5),r._uU(148,"commercial (clients/ r\xe9clamation)"),r.qZA()()(),r.TgZ(149,"mat-form-field",2)(150,"mat-label"),r._uU(151,"Evaluation risque brut"),r.qZA(),r._UZ(152,"textarea",3),r.qZA(),r.TgZ(153,"mat-form-field",2)(154,"mat-label"),r._uU(155,"Contr\xf4leur"),r.qZA(),r.TgZ(156,"mat-select"),r.YNc(157,Pp,2,1,"mat-option",6),r.qZA()(),r.TgZ(158,"mat-form-field",2)(159,"mat-label"),r._uU(160,"Examinateur"),r.qZA(),r.TgZ(161,"mat-select"),r.YNc(162,Rp,2,1,"mat-option",6),r.qZA()(),r.TgZ(163,"mat-form-field",2)(164,"mat-label"),r._uU(165,"Validateur"),r.qZA(),r.TgZ(166,"mat-select"),r.YNc(167,Fp,2,1,"mat-option",6),r.qZA()(),r.TgZ(168,"div",7)(169,"button",8),r.NdJ("click",function(){return i.add()}),r._uU(170,"Ajouter"),r.qZA(),r.TgZ(171,"button",9),r.NdJ("click",function(){return i.cancel()}),r._uU(172,"Annuler"),r.qZA()()(),r._UZ(173,"input",10)),2&t&&(r.xp6(157),r.Q6J("ngForOf",i.persons),r.xp6(5),r.Q6J("ngForOf",i.persons),r.xp6(5),r.Q6J("ngForOf",i.persons))},dependencies:[Ts.ey,It.lW,Es.Nt,ye.KE,ye.hX,Ss.gD,O.sg]}),n})();var kn=Z(7406);let Lp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=r.Xpm({type:n,selectors:[["app-rapports"]],decls:29,vars:1,consts:[[1,"animate__animated","animate__slideInLeft","container-fluid"],[1,"d-flex","justify-content-end"],["id","generate-link",1,"me-2"],["mat-stroked-button","","color","primary",3,"matMenuTriggerFor"],[1,"bi","bi-calendar2-range","me-2"],[1,"bi","bi-chevron-compact-right"],["menu","matMenu"],["mat-menu-item",""],["id","generate-ppt-link",1,"me-2"],["mat-stroked-button","","color","primary","matTooltip","Fichier PowerPoint"],[1,"bi","bi-filetype-pptx","me-2"],["id","export-planning-link",1,"me-2"],["mat-stroked-button","","color","primary"],[1,"bi","bi-upload","me-2"],["id","export-suivi-link"]],template:function(t,i){if(1&t&&(r.TgZ(0,"h3"),r._uU(1,"Rapport"),r.qZA(),r.TgZ(2,"div",0)(3,"mat-card")(4,"mat-card-content")(5,"div",1)(6,"div",2)(7,"button",3),r._UZ(8,"i",4),r._uU(9,"G\xe9n\xe9rer le rapport trimestriel "),r._UZ(10,"i",5),r.qZA(),r.TgZ(11,"mat-menu",null,6)(13,"button",7),r._uU(14,"Word"),r.qZA(),r.TgZ(15,"button",7),r._uU(16,"Excel"),r.qZA()()(),r.TgZ(17,"div",8)(18,"button",9),r._UZ(19,"i",10),r._uU(20,"G\xe9n\xe9rer le rapport annuel "),r.qZA()(),r.TgZ(21,"div",11)(22,"button",12),r._UZ(23,"i",13),r._uU(24," Exporter le planning"),r.qZA()(),r.TgZ(25,"div",14)(26,"button",12),r._UZ(27,"i",13),r._uU(28,"Exporter le suivi de contr\xf4le"),r.qZA()()()()()()),2&t){const o=r.MAs(12);r.xp6(7),r.Q6J("matMenuTriggerFor",o)}},dependencies:[It.lW,J.a8,J.dn,kn.VK,kn.OP,kn.p6,Je.gM]}),n})();const oi=[{ref:"A001",name:"A001",theme:"Risques li\xe9s \xe0 la gouvernance et \xe0 l'actionnariat",refReglementaire:["Directive","Code mon\xe9taire et financier","RG AMF"],refRecueilProcedures:"Recommandations/ positions AMF",perimetreDeControle:"S'assurer de l'existence des statuts Fr\xe9quence des conseils de surveillance et des directoires",periodeControlee:"Exercice 2022",methodControle:["Obtenir les PV des instances","V\xe9rifier les informations r\xe9f\xe9rentielles Rosa"],status:"notStarted",createdAt:"Wed Mar 15 2023 14:06:33 GMT+0300 (heure normale d\u2019Afrique de l\u2019Est)",answeredQuestions:15},{ref:"A002",name:"A002",theme:"Et commodi occaecati sed aut.",refReglementaire:["est maiores minus","Nihil quia adipisci non non quia ratione.","quam","aut eius perferendis"],refRecueilProcedures:"Recommandations/ positions AMF",perimetreDeControle:"Sunt voluptas eligendi ipsam ratione incidunt in magnam aperiam.",periodeControlee:"Exercice 2023",methodControle:["Obtenir les PV des instances","V\xe9rifier les informations r\xe9f\xe9rentielles Rosa"],status:"notStarted",createdAt:"Tue Jun 06 2023 11:18:27 GMT+0300 (heure normale d\u2019Afrique de l\u2019Est)",answeredQuestions:56,dateControle:"Wed Nov 01 2023 23:08:22 GMT+0300 (heure normale d\u2019Afrique de l\u2019Est)",dateRelecture:"Wed Jun 22 2022 10:09:52 GMT+0300 (heure normale d\u2019Afrique de l\u2019Est)",dureeControle:"3 Mois",respRelecture:"Destini Goodwin",dateFinalisation:"Fri Mar 22 2024 13:21:40 GMT+0300 (heure normale d\u2019Afrique de l\u2019Est)"},{ref:"A003",name:"A003",theme:"Accusamus illum architecto unde eum quas et laborum.",refReglementaire:["dolor","Maiores consequatur rerum eum.","excepturi tempora totam","Autem sed a voluptatem quae."],refRecueilProcedures:"Tenetur distinctio ipsam quae atque et velit.",perimetreDeControle:"Quod quas laboriosam qui porro saepe ut quas.",periodeControlee:"Exercice 2021",methodControle:["Eum corporis rem exercitationem dolores temporibus.","Deleniti consectetur ducimus perspiciatis et sapiente cumque aut consectetur dolores.","nobis"],status:"notStarted",createdAt:"Thu Jul 28 2022 17:03:35 GMT+0300 (heure normale d\u2019Afrique de l\u2019Est)",answeredQuestions:22,dateControle:"Sun Aug 28 2022 04:23:36 GMT+0300 (heure normale d\u2019Afrique de l\u2019Est)",dateDiffusion:"Wed Jul 20 2022 19:25:14 GMT+0300 (heure normale d\u2019Afrique de l\u2019Est)",dateRelecture:"Mon Jul 11 2022 02:28:44 GMT+0300 (heure normale d\u2019Afrique de l\u2019Est)",dureeControle:"6 Mois",respRelecture:"Mikel Wiegand Direct Accounts Consultant",dateFinalisation:"Wed May 22 2024 02:05:11 GMT+0300 (heure normale d\u2019Afrique de l\u2019Est)"}];function qp(n,e){if(1&n&&(r.TgZ(0,"p")(1,"mat-chip"),r._uU(2),r.qZA()()),2&n){const t=r.oxw().$implicit;r.xp6(2),r.hij(" ",t.respControle," ")}}function zp(n,e){if(1&n&&(r.TgZ(0,"mat-card",31)(1,"mat-card-header")(2,"mat-card-subtitle"),r._uU(3,"22/05/2023"),r.qZA(),r.TgZ(4,"mat-card-title"),r._uU(5),r.qZA()(),r.TgZ(6,"mat-card-content"),r.YNc(7,qp,3,1,"p",32),r.TgZ(8,"p")(9,"span",33),r._uU(10,"Date de finalisation"),r.qZA(),r._uU(11),r.ALo(12,"date"),r.qZA(),r.TgZ(13,"p")(14,"span",33),r._uU(15,"Th\xe8me"),r.qZA(),r._uU(16),r.qZA(),r.TgZ(17,"p")(18,"span",33),r._uU(19,"Risque"),r.qZA(),r._uU(20),r.qZA()(),r.TgZ(21,"mat-card-actions",34)(22,"div",35)(23,"button",36)(24,"div",37),r._UZ(25,"i",38),r.qZA()(),r.TgZ(26,"button",39)(27,"div",37),r._UZ(28,"i",40),r.qZA()(),r.TgZ(29,"button",41)(30,"div",37),r._UZ(31,"i",42),r.qZA()(),r.TgZ(32,"button",43)(33,"div",37),r._UZ(34,"i",44),r.qZA()(),r.TgZ(35,"button",45),r._UZ(36,"i",46),r.qZA()(),r.TgZ(37,"div",47)(38,"button",48),r._uU(39," Acc\xe9der \xe0 la fiche vierge "),r._UZ(40,"i",49),r.qZA()()()()),2&n){const t=e.$implicit;r.xp6(5),r.Oqu(t.ref),r.xp6(2),r.Q6J("ngIf",t.respControle),r.xp6(4),r.hij(" : ",r.xi3(12,5,t.dateDiffusion,"dd/MM/YYYY")," "),r.xp6(5),r.hij(" : ",t.theme,""),r.xp6(4),r.hij(" : ",t.name,"")}}function Bp(n,e){if(1&n&&(r.TgZ(0,"div",28)(1,"div",29),r.YNc(2,zp,41,8,"mat-card",30),r.qZA()()),2&n){const t=r.oxw();r.xp6(2),r.Q6J("ngForOf",t.dataSource.filteredData)}}function Vp(n,e){1&n&&(r.TgZ(0,"th",50),r._uU(1,"R\xe9f\xe9rence"),r.qZA())}function Up(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"td",51),r.NdJ("click",function(){const s=r.CHM(t).$implicit,a=r.oxw();return r.KtG(a.openRef=s.ref)}),r.TgZ(1,"div"),r._uU(2),r.qZA()()}if(2&n){const t=e.$implicit;r.xp6(2),r.Oqu(t.ref)}}function Hp(n,e){1&n&&(r.TgZ(0,"th",50),r._uU(1,"Responsable"),r.qZA())}function jp(n,e){if(1&n&&(r.TgZ(0,"div"),r._uU(1),r.qZA()),2&n){const t=r.oxw().$implicit;r.xp6(1),r.Oqu(t.respControle)}}function Jp(n,e){1&n&&(r.TgZ(0,"div")(1,"div",52),r._UZ(2,"i",38),r.TgZ(3,"span",53),r._uU(4,"Compl\xe9ter"),r.qZA()()())}function Yp(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"td",51),r.NdJ("click",function(){const s=r.CHM(t).$implicit,a=r.oxw();return r.KtG(a.openRef=s.ref)}),r.YNc(1,jp,2,1,"div",32),r.YNc(2,Jp,5,0,"div",32),r.qZA()}if(2&n){const t=e.$implicit,i=r.oxw();r.xp6(1),r.Q6J("ngIf",i.openRef!==t.ref),r.xp6(1),r.Q6J("ngIf",i.openRef===t.ref)}}function Wp(n,e){1&n&&(r.TgZ(0,"th",50),r._uU(1," Date de finalisation "),r.qZA())}function $p(n,e){if(1&n&&(r.TgZ(0,"div"),r._uU(1),r.ALo(2,"date"),r.qZA()),2&n){const t=r.oxw().$implicit;r.xp6(1),r.hij(" ",r.xi3(2,1,t.dateFinalisation,"dd/MM/YYYY")," ")}}function Qp(n,e){1&n&&(r.TgZ(0,"div")(1,"div",52),r._UZ(2,"i",40),r.TgZ(3,"span"),r._uU(4,"D\xe9tails"),r.qZA()()())}function Kp(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"td",51),r.NdJ("click",function(){const s=r.CHM(t).$implicit,a=r.oxw();return r.KtG(a.openRef=s.ref)}),r.YNc(1,$p,3,4,"div",32),r.YNc(2,Qp,5,0,"div",32),r.qZA()}if(2&n){const t=e.$implicit,i=r.oxw();r.xp6(1),r.Q6J("ngIf",i.openRef!==t.ref),r.xp6(1),r.Q6J("ngIf",i.openRef===t.ref)}}function Gp(n,e){1&n&&(r.TgZ(0,"th",50),r._uU(1,"Th\xe8me"),r.qZA())}function Xp(n,e){if(1&n&&(r.TgZ(0,"div"),r._uU(1),r.qZA()),2&n){const t=r.oxw().$implicit;r.xp6(1),r.Oqu(t.theme)}}function tm(n,e){1&n&&(r.TgZ(0,"div")(1,"div",52),r._UZ(2,"i",42),r.TgZ(3,"span"),r._uU(4,"Relire"),r.qZA()()())}function em(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"td",51),r.NdJ("click",function(){const s=r.CHM(t).$implicit,a=r.oxw();return r.KtG(a.openRef=s.ref)}),r.YNc(1,Xp,2,1,"div",32),r.YNc(2,tm,5,0,"div",32),r.qZA()}if(2&n){const t=e.$implicit,i=r.oxw();r.xp6(1),r.Q6J("ngIf",i.openRef!==t.ref),r.xp6(1),r.Q6J("ngIf",i.openRef===t.ref)}}function nm(n,e){1&n&&(r.TgZ(0,"th",50),r._uU(1,"Risque"),r.qZA())}function im(n,e){if(1&n&&(r.TgZ(0,"div"),r._uU(1),r.qZA()),2&n){const t=r.oxw().$implicit;r.xp6(1),r.Oqu(t.name)}}function om(n,e){1&n&&(r.TgZ(0,"div")(1,"div",52),r._UZ(2,"i",44),r.TgZ(3,"span"),r._uU(4,"R\xe9assigner"),r.qZA()()())}function sm(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"td",51),r.NdJ("click",function(){const s=r.CHM(t).$implicit,a=r.oxw();return r.KtG(a.openRef=s.ref)}),r.YNc(1,im,2,1,"div",32),r.YNc(2,om,5,0,"div",32),r.qZA()}if(2&n){const t=e.$implicit,i=r.oxw();r.xp6(1),r.Q6J("ngIf",i.openRef!==t.ref),r.xp6(1),r.Q6J("ngIf",i.openRef===t.ref)}}function rm(n,e){1&n&&(r.TgZ(0,"th",50),r._uU(1,"Fiche vierge"),r.qZA())}function am(n,e){1&n&&(r.TgZ(0,"button",48)(1,"div",55)(2,"span",56),r._uU(3,"Fiche vierge"),r.qZA(),r._UZ(4,"i",49),r.qZA()())}function lm(n,e){1&n&&(r.TgZ(0,"div")(1,"div",52),r._UZ(2,"i",46),r.TgZ(3,"span"),r._uU(4,"Glisser vers le prochain trimestre"),r.qZA()()())}function cm(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"td",51),r.NdJ("click",function(){const s=r.CHM(t).$implicit,a=r.oxw();return r.KtG(a.openRef=s.ref)}),r.YNc(1,am,5,0,"button",54),r.YNc(2,lm,5,0,"div",32),r.qZA()}if(2&n){const t=e.$implicit,i=r.oxw();r.xp6(1),r.Q6J("ngIf",i.openRef!==t.ref),r.xp6(1),r.Q6J("ngIf",i.openRef===t.ref)}}function dm(n,e){1&n&&r._UZ(0,"tr",57)}function um(n,e){1&n&&r._UZ(0,"tr",58)}function hm(n,e){if(1&n&&(r.TgZ(0,"tr",59)(1,"td",60),r._uU(2),r.qZA()()),2&n){r.oxw();const t=r.MAs(11);r.xp6(2),r.hij(' Pas de donn\xe9es \xe0 correspondant \xe0 la recherche "',t.value,'" ')}}const fm=function(n){return{display:n}},pm=function(){return[5,10,20]};let mm=(()=>{class n{constructor(){this.data=oi,this.isList=!0,this.displayedColumns=["ref","responsable","finalisation_date","theme","fiche_vierge"],this.dataSource=new E.by(oi)}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=r.Xpm({type:n,selectors:[["app-fiches"]],viewQuery:function(t,i){if(1&t&&(r.Gf(ve.NW,5),r.Gf(Pt.YE,5)),2&t){let o;r.iGM(o=r.CRH())&&(i.paginator=o.first),r.iGM(o=r.CRH())&&(i.sort=o.first)}},decls:46,vars:11,consts:[[1,"d-flex","m-4","justify-content-center"],["role","link","mat-stroked-button","","color","primary"],[1,"d-flex","align-items-center"],[1,"bi","bi-plus-circle","ms-2"],[1,"d-flex","w-100","justify-content-center"],[1,"w-50"],["type","text","id","formGroupExampleInput2","placeholder","Rechercher...",1,"form-control",3,"keyup"],["input",""],[1,"d-flex","justify-content-center","m-4"],["id","display-change",1,"d-flex","justify-content-center"],["mat-icon-button","","matTooltip","Listes",3,"color","click"],["mat-icon-button","","matTooltip","Vignette",3,"color","click"],["class","animate__animated animate__slideInLeft container-fluid",4,"ngIf"],[1,"animate__animated","animate__slideInLeft","container-fluid",3,"ngStyle"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","ref"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","responsable"],["matColumnDef","finalisation_date"],["matColumnDef","theme"],["matColumnDef","risque"],["matColumnDef","fiche_vierge"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],[1,"animate__animated","animate__slideInLeft","container-fluid"],[1,"d-flex","flex-row","flex-wrap","justify-content-center"],["class","m-3 justify-content-between","style","max-width: 250px; min-width: 300px",4,"ngFor","ngForOf"],[1,"m-3","justify-content-between",2,"max-width","250px","min-width","300px"],[4,"ngIf"],[1,"fw-bold"],[1,"justify-content-center","d-flex","flex-column","align-items-center"],[1,"d-flex","flex-row","align-items-center","flex-nowrap"],["mat-button","","matTooltip","Compl\xe9ter",1,"mt-2","mb-2"],[1,"d-flex","flex-column","justify-content-center",2,"font-size","20px"],[1,"bi","bi-pencil-square","m-1"],["mat-button","","matTooltip","D\xe9tails",1,"mt-2","mb-2"],[1,"bi","bi-info-square","m-1"],["mat-button","","matTooltip","Relire",1,"mt-2","mb-2"],[1,"bi","bi-book","m-1"],["mat-button","","matTooltip","R\xe9assigner",1,"mt-2","mb-2"],[1,"bi","bi-gear","m-1"],["matTooltip","Glisser vers le prochain trimestre","mat-button","",1,"d-flex","flex-column","justify-content-center",2,"font-size","20px"],[1,"bi","bi-calendar2","m-1"],[1,"w-100","d-flex","justify-content-center","p-2"],["mat-stroked-button",""],[1,"bi","bi-box-arrow-up-right"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",3,"click"],["role","button",1,"menu-btn"],[1,"text-nowrap"],["mat-stroked-button","",4,"ngIf"],[1,"d-flex","flex-row","flex-nowrap"],[1,"text-nowrap","me-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell","p-4"]],template:function(t,i){1&t&&(r.TgZ(0,"h3"),r._uU(1,"Fiches"),r.qZA(),r.TgZ(2,"div",0)(3,"button",1)(4,"span",2)(5,"span"),r._uU(6,"Ajouter une nouvelle fiche"),r.qZA(),r._UZ(7,"i",3),r.qZA()()(),r.TgZ(8,"div",4)(9,"div",5)(10,"input",6,7),r.NdJ("keyup",function(s){return i.applyFilter(s)}),r.qZA()()(),r.TgZ(12,"div",8)(13,"div",9)(14,"button",10),r.NdJ("click",function(){return i.isList=!0}),r.TgZ(15,"mat-icon"),r._uU(16,"list"),r.qZA()(),r.TgZ(17,"button",11),r.NdJ("click",function(){return i.isList=!1}),r.TgZ(18,"mat-icon"),r._uU(19,"grid_on"),r.qZA()()()(),r.YNc(20,Bp,3,1,"div",12),r.TgZ(21,"div",13)(22,"div",14)(23,"table",15),r.ynx(24,16),r.YNc(25,Vp,2,0,"th",17),r.YNc(26,Up,3,1,"td",18),r.BQk(),r.ynx(27,19),r.YNc(28,Hp,2,0,"th",17),r.YNc(29,Yp,3,2,"td",18),r.BQk(),r.ynx(30,20),r.YNc(31,Wp,2,0,"th",17),r.YNc(32,Kp,3,2,"td",18),r.BQk(),r.ynx(33,21),r.YNc(34,Gp,2,0,"th",17),r.YNc(35,em,3,2,"td",18),r.BQk(),r.ynx(36,22),r.YNc(37,nm,2,0,"th",17),r.YNc(38,sm,3,2,"td",18),r.BQk(),r.ynx(39,23),r.YNc(40,rm,2,0,"th",17),r.YNc(41,cm,3,2,"td",18),r.BQk(),r.YNc(42,dm,1,0,"tr",24),r.YNc(43,um,1,0,"tr",25),r.YNc(44,hm,3,1,"tr",26),r.qZA(),r._UZ(45,"mat-paginator",27),r.qZA()()),2&t&&(r.xp6(14),r.Q6J("color",i.isList?"primary":""),r.xp6(3),r.Q6J("color",i.isList?"":"primary"),r.xp6(3),r.Q6J("ngIf",!i.isList),r.xp6(1),r.Q6J("ngStyle",r.VKq(8,fm,i.isList?"block":"none")),r.xp6(2),r.Q6J("dataSource",i.dataSource),r.xp6(19),r.Q6J("matHeaderRowDef",i.displayedColumns),r.xp6(1),r.Q6J("matRowDefColumns",i.displayedColumns),r.xp6(2),r.Q6J("pageSizeOptions",r.DdM(10,pm)))},dependencies:[It.lW,It.RK,J.a8,J.hq,J.dn,J.dk,J.$j,J.n5,se.HS,Os.Hw,ve.NW,Pt.YE,Pt.nU,E.BZ,E.fO,E.as,E.w1,E.Dz,E.nj,E.ge,E.ev,E.XQ,E.Gk,E.Ee,Je.gM,O.sg,O.O5,O.PC,O.uU],styles:[".menu-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:start;font-size:14px;text-align:center}.menu-btn[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{text-decoration:underline}tr[_ngcontent-%COMP%]:hover{background-color:#eff4f7!important}.bi[_ngcontent-%COMP%]{color:#3f51b5!important}"]}),n})();const gm=[{name:"Trimestre 1",debut:"2023-01-01",fin:"2023-03-31"},{name:"Trimestre 2",debut:"2023-04-01",fin:"2023-06-30"},{name:"Trimestre 3",debut:"2023-07-01",fin:"2023-09-30"},{name:"Trimestre 4",debut:"2023-10-01",fin:"2023-12-31"}];var _m=Z(8675),xm=Z(4004);const bm=["Ce mois","Ce trimestre","Ce Semestre","Cette ann\xe9e"];var oo=Z(5437);const ym={notStarted:"Non d\xe9marr\xe9",inProgress:"En cours",onHold:"En attente de relecture",broadcast:"Diffus\xe9",fixed:"Fig\xe9"};var vm=Object.prototype;const so=function Cm(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||vm)},ja=function km(n,e){return function(t){return n(e(t))}},Mm=ja(Object.keys,Object);var Sm=Object.prototype.hasOwnProperty;const Ja="object"==typeof global&&global&&global.Object===Object&&global;var Em="object"==typeof self&&self&&self.Object===Object&&self;const Yt=Ja||Em||Function("return this")();var Im=Yt.Symbol,Ya=Object.prototype,Pm=Ya.hasOwnProperty,Rm=Ya.toString,si=Im?Im.toStringTag:void 0;var qm=Object.prototype.toString;var Wa=Im?Im.toStringTag:void 0;const wn=function Hm(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":Wa&&Wa in Object(n)?function Fm(n){var e=Pm.call(n,si),t=n[si];try{n[si]=void 0;var i=!0}catch{}var o=Rm.call(n);return i&&(e?n[si]=t:delete n[si]),o}(n):function zm(n){return qm.call(n)}(n)},Ye=function jm(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)},Ns=function Qm(n){if(!Ye(n))return!1;var e=wn(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e};var n,Km=Yt["__core-js_shared__"],$a=(n=/[^.]+$/.exec(Km&&Km.keys&&Km.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";var eg=Function.prototype.toString;const We=function ng(n){if(null!=n){try{return eg.call(n)}catch{}try{return n+""}catch{}}return""};var og=/^\[object .+?Constructor\]$/,cg=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const ug=function dg(n){return!(!Ye(n)||function Gm(n){return!!$a&&$a in n}(n))&&(Ns(n)?cg:og).test(We(n))},$e=function pg(n,e){var t=function hg(n,e){return n?.[e]}(n,e);return ug(t)?t:void 0},Ps=$e(Yt,"DataView"),ri=$e(Yt,"Map"),Rs=$e(Yt,"Promise"),Fs=$e(Yt,"Set"),Zs=$e(Yt,"WeakMap");var Qa="[object Map]",Ka="[object Promise]",Ga="[object Set]",Xa="[object WeakMap]",tl="[object DataView]",vg=We(Ps),Cg=We(ri),kg=We(Rs),wg=We(Fs),Mg=We(Zs),Qe=wn;(Ps&&Qe(new Ps(new ArrayBuffer(1)))!=tl||ri&&Qe(new ri)!=Qa||Rs&&Qe(Rs.resolve())!=Ka||Fs&&Qe(new Fs)!=Ga||Zs&&Qe(new Zs)!=Xa)&&(Qe=function(n){var e=wn(n),t="[object Object]"==e?n.constructor:void 0,i=t?We(t):"";if(i)switch(i){case vg:return tl;case Cg:return Qa;case kg:return Ka;case wg:return Ga;case Mg:return Xa}return e});const Tg=Qe,ai=function Sg(n){return null!=n&&"object"==typeof n},el=function Dg(n){return ai(n)&&"[object Arguments]"==wn(n)};var nl=Object.prototype,Og=nl.hasOwnProperty,Eg=nl.propertyIsEnumerable,Ng=el(function(){return arguments}())?el:function(n){return ai(n)&&Og.call(n,"callee")&&!Eg.call(n,"callee")};const ao=Ng,lo=Array.isArray,il=function Rg(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991},co=function Fg(n){return null!=n&&il(n.length)&&!Ns(n)};var ol="object"==typeof exports&&exports&&!exports.nodeType&&exports,sl=ol&&"object"==typeof module&&module&&!module.nodeType&&module,rl=sl&&sl.exports===ol?Yt.Buffer:void 0;const Ls=(rl?rl.isBuffer:void 0)||function Zg(){return!1};var W={};W["[object Float32Array]"]=W["[object Float64Array]"]=W["[object Int8Array]"]=W["[object Int16Array]"]=W["[object Int32Array]"]=W["[object Uint8Array]"]=W["[object Uint8ClampedArray]"]=W["[object Uint16Array]"]=W["[object Uint32Array]"]=!0,W["[object Arguments]"]=W["[object Array]"]=W["[object ArrayBuffer]"]=W["[object Boolean]"]=W["[object DataView]"]=W["[object Date]"]=W["[object Error]"]=W["[object Function]"]=W["[object Map]"]=W["[object Number]"]=W["[object Object]"]=W["[object RegExp]"]=W["[object Set]"]=W["[object String]"]=W["[object WeakMap]"]=!1;var al="object"==typeof exports&&exports&&!exports.nodeType&&exports,li=al&&"object"==typeof module&&module&&!module.nodeType&&module,qs=li&&li.exports===al&&Ja.process,__=function(){try{return li&&li.require&&li.require("util").types||qs&&qs.binding&&qs.binding("util")}catch{}}(),cl=__&&__.isTypedArray;const zs=cl?function p_(n){return function(e){return n(e)}}(cl):function h_(n){return ai(n)&&il(n.length)&&!!W[wn(n)]};var C_=Object.prototype.hasOwnProperty;const dl=function k_(n){if(null==n)return!0;if(co(n)&&(lo(n)||"string"==typeof n||"function"==typeof n.splice||Ls(n)||zs(n)||ao(n)))return!n.length;var e=Tg(n);if("[object Map]"==e||"[object Set]"==e)return!n.size;if(so(n))return!function Am(n){if(!so(n))return Mm(n);var e=[];for(var t in Object(n))Sm.call(n,t)&&"constructor"!=t&&e.push(t);return e}(n).length;for(var t in n)if(C_.call(n,t))return!1;return!0};let ul=(()=>{class n{constructor(){}nombreJoursEntreDeuxDates(t,i){const o=new Date(t).getTime(),a=new Date(i).getTime()-o;return Math.floor(a/864e5)}generateFlatColor(){return"#"+Math.floor(16777215*Math.random()).toString(16)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Bs=(()=>{class n{constructor(t){this.toolService=t}genetateColorByRole(t){switch(t){case"Admin":return"#d35400";case"RCCI":return"#f1c40f";case"Manager":return"#16a085";case"Junior":return"#8e44ad";case"Chef de mission":return"#2c3e50";case"Contributeur":return"#1abc9c";case"Superadmin":return"#f78fb3";default:return this.toolService.generateFlatColor()}}}return n.\u0275fac=function(t){return new(t||n)(r.LFG(ul))},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var hl=Z(8995);let Vs=(()=>{class n{transform(t){if(!t)return"";const i=t.split(" "),o=i[0].charAt(0).toUpperCase();let s;return i.length<2?o:(s=i[1].charAt(0).toUpperCase(),o+s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=r.Yjl({name:"initialName",type:n,pure:!0}),n})();function w_(n,e){if(1&n&&(r.TgZ(0,"div",13),r._uU(1),r.ALo(2,"date"),r.qZA()),2&n){const t=r.oxw();r.xp6(1),r.hij(" ",r.xi3(2,1,t.item.dateFinalisation,"dd/MM/YYYY")," ")}}const M_=function(n){return{"background-color":n}};function T_(n,e){if(1&n&&(r.TgZ(0,"div",14)(1,"div",15),r._uU(2),r.ALo(3,"initialName"),r.qZA()()),2&n){const t=r.oxw();r.xp6(1),r.Q6J("ngStyle",r.VKq(5,M_,t.ficheService.genetateColorByRole(t.item.respControle)))("matTooltip",t.item.respControle),r.xp6(1),r.hij(" ",r.lcZ(3,3,t.item.respControle)," ")}}function S_(n,e){if(1&n&&(r.TgZ(0,"div",16)(1,"span",17),r._uU(2,"Relecteur : "),r.qZA(),r.TgZ(3,"div",18),r._uU(4),r.ALo(5,"initialName"),r.qZA()()),2&n){const t=r.oxw();r.xp6(3),r.Q6J("matTooltip",t.item.respRelecture),r.xp6(1),r.hij(" ",r.lcZ(5,2,t.item.respRelecture)," ")}}function A_(n,e){if(1&n&&(r.TgZ(0,"div",19)(1,"span",17),r._uU(2,"Valid\xe9 par : "),r.qZA(),r.TgZ(3,"div",20),r._uU(4),r.ALo(5,"initialName"),r.qZA()()),2&n){const t=r.oxw();r.xp6(3),r.Q6J("matTooltip",t.item.respControle),r.xp6(1),r.hij(" ",r.lcZ(5,2,t.item.respControle)," ")}}function D_(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"span",21),r.NdJ("click",function(){r.CHM(t);const o=r.oxw();return r.KtG(o.item.lock=!o.item.lock)}),r._UZ(1,"i",22),r.qZA()}}function O_(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"span",21),r.NdJ("click",function(){r.CHM(t);const o=r.oxw();return r.KtG(o.item.lock=!o.item.lock)}),r._UZ(1,"i",23),r.qZA()}}let E_=(()=>{class n{constructor(t,i){this.router=t,this.ficheService=i}details(t){this.router.navigateByUrl(`/fiche/${t}/details`)}}return n.\u0275fac=function(t){return new(t||n)(r.Y36(be.F0),r.Y36(Bs))},n.\u0275cmp=r.Xpm({type:n,selectors:[["app-planning-kanban-item"]],inputs:{item:"item",column:"column"},decls:25,vars:24,consts:[[1,"d-flex","mb-2","flex-row","flex-wrap",2,"cursor","pointer"],["class","me-2 mt-1 text-white ps-1 pe-1 rounded text-bg-success","matTooltip","Date de finalisation",4,"ngIf"],["matTooltip","Date de relecture",1,"me-2","mt-1","text-bleu"],["matTooltip","Date de contr\xf4le",1,"me-2","mt-1","text-secondary"],["matTooltip","Date de diffusion",1,"me-2","mt-1","text-muted"],["class","mb-2 d-flex flex-row flex-wrap align-items-center",4,"ngIf"],[2,"max-width","250px","font-size","17px"],[2,"max-width","250px"],["matTooltip","Date de cr\xe9ation",1,"me-2","mt-2","text-muted"],[1,"flex-row","d-flex","flex-nowrap","mt-2"],["class","d-flex flex-row flex-nowrap justify-content-end me-4",4,"ngIf"],["class","d-flex flex-row flex-nowrap justify-content-end",4,"ngIf"],[3,"click",4,"ngIf"],["matTooltip","Date de finalisation",1,"me-2","mt-1","text-white","ps-1","pe-1","rounded","text-bg-success"],[1,"mb-2","d-flex","flex-row","flex-wrap","align-items-center"],[1,"rounded-circle","mr-2","fw-bold","d-flex","align-items-center","justify-content-center",2,"width","30px","height","30px","font-size","10px",3,"ngStyle","matTooltip"],[1,"d-flex","flex-row","flex-nowrap","justify-content-end","me-4"],[1,"mt-1","text-secondary",2,"font-size","11px"],[1,"rounded-circle","border","border-warning","bg-warning","text-light","border-2","d-flex","align-items-center","justify-content-center","ms-2",2,"width","30px","height","30px","font-size","12px",3,"matTooltip"],[1,"d-flex","flex-row","flex-nowrap","justify-content-end"],[1,"rounded-circle","border","border-success","border-2","bg-success","text-light","d-flex","align-items-center","justify-content-center","ms-2",2,"width","30px","height","30px","font-size","12px",3,"matTooltip"],[3,"click"],[1,"bi","bi-lock-fill"],[1,"bi","bi-unlock"]],template:function(t,i){1&t&&(r.TgZ(0,"div",0),r.YNc(1,w_,3,4,"div",1),r.TgZ(2,"div",2),r._uU(3),r.ALo(4,"date"),r.qZA(),r.TgZ(5,"div",3),r._uU(6),r.ALo(7,"date"),r.qZA(),r.TgZ(8,"div",4),r._uU(9),r.ALo(10,"date"),r.qZA()(),r.YNc(11,T_,4,7,"div",5),r.TgZ(12,"p",6),r._uU(13),r.qZA(),r.TgZ(14,"p",7),r._uU(15),r.qZA(),r.TgZ(16,"div",8),r._uU(17),r.ALo(18,"date"),r.qZA(),r.TgZ(19,"div",9),r.YNc(20,S_,6,4,"div",10),r.YNc(21,A_,6,4,"div",11),r.qZA(),r.TgZ(22,"div"),r.YNc(23,D_,2,0,"span",12),r.YNc(24,O_,2,0,"span",12),r.qZA()),2&t&&(r.xp6(1),r.Q6J("ngIf",i.item.dateFinalisation),r.xp6(2),r.hij(" ",r.xi3(4,12,i.item.dateRelecture,"dd/MM/YYYY")," "),r.xp6(3),r.hij(" ",r.xi3(7,15,i.item.dateControle,"dd/MM/YYYY")," "),r.xp6(3),r.hij(" ",r.xi3(10,18,i.item.dateDiffusion,"dd/MM/YYYY")," "),r.xp6(2),r.Q6J("ngIf",i.item.respControle),r.xp6(2),r.Oqu(i.item.name),r.xp6(2),r.Oqu(i.item.theme),r.xp6(2),r.hij(" Cr\xe9\xe9 le : ",r.xi3(18,21,i.item.createdAt,"dd/MM/YYYY"),"\n"),r.xp6(3),r.Q6J("ngIf","broadcast"===i.column&&i.item.respRelecture),r.xp6(1),r.Q6J("ngIf","fixed"===i.column&&i.item.respControle),r.xp6(2),r.Q6J("ngIf",i.item.lock),r.xp6(1),r.Q6J("ngIf",!i.item.lock))},dependencies:[Je.gM,O.O5,O.PC,Vs,O.uU],styles:[".example-container[_ngcontent-%COMP%]{min-width:250px;font-size:14px;max-width:100%;margin:0 25px 25px 0;display:inline-block;vertical-align:top}.box-element[_ngcontent-%COMP%]{cursor:pointer;background-color:#fff!important}.rounded-circle[_ngcontent-%COMP%]{color:#f2f2f2!important;border:none!important}.example-list[_ngcontent-%COMP%]{border:solid 1px #ccc;min-height:60px;background:white;border-radius:4px;overflow:hidden;display:block;background-color:#f2f2f2;height:100%}.example-box[_ngcontent-%COMP%]{padding:20px 10px;border-bottom:solid 1px #ccc;color:#000000de;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;background:white;font-size:14px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]}),n})();const N_=["chart"];function I_(n,e){if(1&n&&(r.TgZ(0,"p")(1,"span",34),r._uU(2,"Trim\xe8stre en cours :"),r.qZA(),r._uU(3),r.ALo(4,"date"),r.ALo(5,"date"),r.qZA()),2&n){const t=r.oxw();r.xp6(3),r.AsE(" ",r.xi3(4,2,t.trimestre.debut,"dd/MM/YYYY")," - ",r.xi3(5,5,t.trimestre.fin,"dd/MM/YYYY")," ")}}function P_(n,e){if(1&n&&(r.TgZ(0,"p")(1,"span",34),r._uU(2,"Jours restants avant la fin du trimestre :"),r.qZA(),r._uU(3),r.qZA()),2&n){const t=r.oxw();r.xp6(3),r.hij(" ",t.daysLeft," ")}}function R_(n,e){if(1&n&&(r.TgZ(0,"mat-option",11),r._uU(1),r.qZA()),2&n){const t=e.$implicit;r.Q6J("value",t),r.xp6(1),r.hij(" ",t," ")}}function F_(n,e){if(1&n&&(r.TgZ(0,"mat-option",11),r._uU(1),r.qZA()),2&n){const t=e.$implicit;r.Q6J("value",t),r.xp6(1),r.hij(" ",t," ")}}const Ce=function(n,e,t){return{display:n,backgroundColor:e,cursor:t}};function Z_(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"app-planning-kanban-item",35),r.NdJ("click",function(o){const a=r.CHM(t).$implicit,l=r.oxw();return r.KtG(l.details(o,a,"notStarted"))}),r.qZA()}if(2&n){const t=e.$implicit,i=r.oxw();r.Q6J("ngStyle",r.kEZ(3,Ce,i.ficheFilter(t)?"flex":"none",t.lock?"#c0d9e47a":"#fff",t.lock?"not-allowed":"pointer"))("cdkDragDisabled",t.lock)("item",t)}}function L_(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"app-planning-kanban-item",36),r.NdJ("click",function(o){const a=r.CHM(t).$implicit,l=r.oxw();return r.KtG(l.details(o,a,"inProgress"))}),r.qZA()}if(2&n){const t=e.$implicit,i=r.oxw();r.Q6J("ngStyle",r.kEZ(3,Ce,i.ficheFilter(t)?"flex":"none",t.lock?"#c0d9e47a":"#fff",t.lock?"not-allowed":"pointer"))("cdkDragDisabled",t.lock)("item",t)}}function q_(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"app-planning-kanban-item",37),r.NdJ("click",function(o){const a=r.CHM(t).$implicit,l=r.oxw();return r.KtG(l.details(o,a,"onHold"))}),r.qZA()}if(2&n){const t=e.$implicit,i=r.oxw();r.Q6J("ngStyle",r.kEZ(3,Ce,i.ficheFilter(t)?"flex":"none",t.lock?"#c0d9e47a":"#fff",t.lock?"not-allowed":"pointer"))("cdkDragDisabled",t.lock)("item",t)}}function z_(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"app-planning-kanban-item",38),r.NdJ("click",function(o){const a=r.CHM(t).$implicit,l=r.oxw();return r.KtG(l.details(o,a,"broadcast"))}),r.qZA()}if(2&n){const t=e.$implicit,i=r.oxw();r.Q6J("ngStyle",r.kEZ(3,Ce,i.ficheFilter(t)?"flex":"none",t.lock?"#c0d9e47a":"#fff",t.lock?"not-allowed":"pointer"))("cdkDragDisabled",t.lock)("item",t)}}function B_(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"app-planning-kanban-item",39),r.NdJ("click",function(o){const a=r.CHM(t).$implicit,l=r.oxw();return r.KtG(l.details(o,a,"valid"))}),r.qZA()}if(2&n){const t=e.$implicit,i=r.oxw();r.Q6J("ngStyle",r.kEZ(3,Ce,i.ficheFilter(t)?"flex":"none",t.lock?"#c0d9e47a":"#fff",t.lock?"not-allowed":"pointer"))("cdkDragDisabled",t.lock)("item",t)}}function V_(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"app-planning-kanban-item",40),r.NdJ("click",function(o){const a=r.CHM(t).$implicit,l=r.oxw();return r.KtG(l.details(o,a,"rescheduled"))}),r.qZA()}if(2&n){const t=e.$implicit,i=r.oxw();r.Q6J("ngStyle",r.kEZ(3,Ce,i.ficheFilter(t)?"flex":"none",t.lock?"#c0d9e47a":"#fff",t.lock?"not-allowed":"pointer"))("cdkDragDisabled",t.lock)("item",t)}}function U_(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"app-planning-kanban-item",41),r.NdJ("click",function(o){const a=r.CHM(t).$implicit,l=r.oxw();return r.KtG(l.details(o,a,"fixed"))}),r.qZA()}if(2&n){const t=e.$implicit,i=r.oxw();r.Q6J("ngStyle",r.kEZ(3,Ce,i.ficheFilter(t)?"flex":"none",t.lock?"#c0d9e47a":"#fff",t.lock?"not-allowed":"pointer"))("cdkDragDisabled",t.lock)("item",t)}}function H_(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"app-planning-kanban-item",42),r.NdJ("click",function(o){const a=r.CHM(t).$implicit,l=r.oxw();return r.KtG(l.details(o,a,"archived"))}),r.qZA()}if(2&n){const t=e.$implicit,i=r.oxw();r.Q6J("ngStyle",r.kEZ(3,Ce,i.ficheFilter(t)?"flex":"none",t.lock?"#c0d9e47a":"#fff",t.lock?"not-allowed":"pointer"))("cdkDragDisabled",t.lock)("item",t)}}const ke=function(n,e,t,i,o,s,a){return[n,e,t,i,o,s,a]};let j_=(()=>{class n{constructor(t,i,o){this.toolsService=t,this.router=i,this.ficheService=o,this.myControl=new R.NI(""),this.options=[],this.periodicite=bm,this.allStatus=ym,this.period="",this.data={notStarted:[],inProgress:[],onHold:[],broadcast:[],fixed:[],valid:[],archived:[],rescheduled:[]};const s=oi.map(c=>c.respControle),l=[...new Set(s)].map(c=>c);this.options=l.filter(c=>c)}_filter(t){const i=t.toLowerCase();return this.options.filter(o=>o.toLowerCase().includes(i))}ficheFilter(t){if(!this.myControl.value)return!0;const o=new RegExp(this.myControl.value,"i");return t.respControle?o.test(String(t.respControle)):void 0}ngOnInit(){for(const i of oi)this.data[`${i.status}`]&&this.data[`${i.status}`].push(i);this.filteredOptions=this.myControl.valueChanges.pipe((0,_m.O)(""),(0,xm.U)(i=>this._filter(i||"")));const t=new Date;this.trimestre=gm.find(i=>t>=new Date(i.debut)&&t<=new Date(i.fin)),this.daysLeft=this.toolsService.nombreJoursEntreDeuxDates(t.toISOString(),this.trimestre.fin),this.initChartData()}details(t,i,o){const s=t.target;s.classList.contains("mat-mdc-button-touch-target")||s.classList.contains("bi-lock-fill")||s.classList.contains("bi-unlock")||i.lock||this.router.navigate([`/fiche/${i.ref}/details`],{queryParams:{statut:o}})}initChartData(){this.chartOptions={series:[{name:"",data:[this.data.notStarted.length,this.data.inProgress.length,this.data.onHold.length,this.data.broadcast.length,this.data.fixed.length]}],chart:{type:"bar",width:600,height:200},plotOptions:{bar:{horizontal:!0}},dataLabels:{enabled:!1},xaxis:{categories:["Non d\xe9marr\xe9","En cours","En attente de relecture","Diffus\xe9","Fig\xe9"]}}}drop(t){t.previousContainer===t.container?(0,oo.bA)(t.container.data,t.previousIndex,t.currentIndex):(0,oo.EA)(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex);for(const[i,o]of Object.entries(this.data))if(!dl(o))for(const s of o)s.status=i,"broadcast"===i?s.dateRelecture=(new Date).toISOString():"fixed"===i&&(s.dateDiffusion=(new Date).toISOString(),s.dateControle=(new Date).toISOString());this.initChartData()}}return n.\u0275fac=function(t){return new(t||n)(r.Y36(ul),r.Y36(be.F0),r.Y36(Bs))},n.\u0275cmp=r.Xpm({type:n,selectors:[["app-planning-de-controle"]],viewQuery:function(t,i){if(1&t&&r.Gf(N_,5),2&t){let o;r.iGM(o=r.CRH())&&(i.chart=o.first)}},decls:77,vars:103,consts:[[1,"d-flex","flex-row","flex-wrap"],[1,"me-4"],["mat-raised-button","","id","generate-planning-link",1,"mb-4"],[4,"ngIf"],[1,"d-flex","flex-row","mt-4"],["appearance","outline",1,"example-full-width"],["type","text","placeholder","R\xe9sponsable","aria-label","Number","matInput","",3,"formControl","matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline","id","periode-link",1,"ms-2"],["name","period",3,"ngModel","ngModelChange"],[3,"value"],[1,"ms-4"],["id","chart"],[3,"series","chart","dataLabels","plotOptions","xaxis"],["id","drag-and-drop-link",1,"d-flex","flex-row","flex-wrap","mb-4"],[1,"example-container"],["cdkDropList","",1,"example-list",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["notStarted","cdkDropList"],["role","button","class","shadow-sm box-element item-box flex-column border m-1 p-2 rounded","cdkDrag","","column","notStarted",3,"ngStyle","cdkDragDisabled","item","click",4,"ngFor","ngForOf"],["inProgress","cdkDropList"],["role","button","class","shadow-sm box-element item-box flex-column border m-1 p-2 rounded","cdkDrag","","column","inProgress",3,"ngStyle","cdkDragDisabled","item","click",4,"ngFor","ngForOf"],["onHold","cdkDropList"],["role","button","class","shadow-sm box-element item-box flex-column border m-1 p-2 rounded","cdkDrag","","column","onHold",3,"ngStyle","cdkDragDisabled","item","click",4,"ngFor","ngForOf"],["broadcast","cdkDropList"],["role","button","class","shadow-sm box-element item-box flex-column border m-1 p-2 rounded","cdkDrag","","column","broadcast",3,"ngStyle","cdkDragDisabled","item","click",4,"ngFor","ngForOf"],["valid","cdkDropList"],["role","button","class","shadow-sm box-element item-box flex-column border m-1 p-2 rounded","cdkDrag","","column","valid",3,"ngStyle","cdkDragDisabled","item","click",4,"ngFor","ngForOf"],["rescheduled","cdkDropList"],["role","button","class","shadow-sm box-element item-box flex-column border m-1 p-2 rounded","cdkDrag","","column","rescheduled",3,"ngStyle","cdkDragDisabled","item","click",4,"ngFor","ngForOf"],["fixed","cdkDropList"],["role","button","class","shadow-sm box-element item-box flex-column border m-1 p-2 rounded","cdkDrag","","column","fixed",3,"ngStyle","cdkDragDisabled","item","click",4,"ngFor","ngForOf"],["archived","cdkDropList"],["role","button","class","shadow-sm box-element item-box flex-column border m-1 p-2 rounded","cdkDrag","","column","archived",3,"ngStyle","cdkDragDisabled","item","click",4,"ngFor","ngForOf"],[1,"fw-bold"],["role","button","cdkDrag","","column","notStarted",1,"shadow-sm","box-element","item-box","flex-column","border","m-1","p-2","rounded",3,"ngStyle","cdkDragDisabled","item","click"],["role","button","cdkDrag","","column","inProgress",1,"shadow-sm","box-element","item-box","flex-column","border","m-1","p-2","rounded",3,"ngStyle","cdkDragDisabled","item","click"],["role","button","cdkDrag","","column","onHold",1,"shadow-sm","box-element","item-box","flex-column","border","m-1","p-2","rounded",3,"ngStyle","cdkDragDisabled","item","click"],["role","button","cdkDrag","","column","broadcast",1,"shadow-sm","box-element","item-box","flex-column","border","m-1","p-2","rounded",3,"ngStyle","cdkDragDisabled","item","click"],["role","button","cdkDrag","","column","valid",1,"shadow-sm","box-element","item-box","flex-column","border","m-1","p-2","rounded",3,"ngStyle","cdkDragDisabled","item","click"],["role","button","cdkDrag","","column","rescheduled",1,"shadow-sm","box-element","item-box","flex-column","border","m-1","p-2","rounded",3,"ngStyle","cdkDragDisabled","item","click"],["role","button","cdkDrag","","column","fixed",1,"shadow-sm","box-element","item-box","flex-column","border","m-1","p-2","rounded",3,"ngStyle","cdkDragDisabled","item","click"],["role","button","cdkDrag","","column","archived",1,"shadow-sm","box-element","item-box","flex-column","border","m-1","p-2","rounded",3,"ngStyle","cdkDragDisabled","item","click"]],template:function(t,i){if(1&t&&(r.TgZ(0,"h3"),r._uU(1,"Planning de contr\xf4le"),r.qZA(),r.TgZ(2,"div",0)(3,"div",1)(4,"div")(5,"button",2),r._uU(6," G\xe9n\xe9rer nouveau planning pour le prochain trimestre "),r.qZA(),r.YNc(7,I_,6,8,"p",3),r.YNc(8,P_,4,1,"p",3),r.qZA(),r.TgZ(9,"div",4)(10,"mat-form-field",5)(11,"mat-label"),r._uU(12,"R\xe9sponsable"),r.qZA(),r._UZ(13,"input",6),r.TgZ(14,"mat-autocomplete",null,7),r.YNc(16,R_,2,2,"mat-option",8),r.ALo(17,"async"),r.qZA()(),r.TgZ(18,"mat-form-field",9)(19,"mat-label"),r._uU(20,"Date de finalisation"),r.qZA(),r.TgZ(21,"mat-select",10),r.NdJ("ngModelChange",function(s){return i.period=s}),r.TgZ(22,"mat-option",11),r._uU(23," Tous "),r.qZA(),r.YNc(24,F_,2,2,"mat-option",8),r.qZA()()()(),r.TgZ(25,"div",12)(26,"div",13),r._UZ(27,"apx-chart",14),r.qZA()()(),r.TgZ(28,"div",15)(29,"div",16)(30,"h2"),r._uU(31,"Non d\xe9marr\xe9"),r.qZA(),r.TgZ(32,"div",17,18),r.NdJ("cdkDropListDropped",function(s){return i.drop(s)}),r.YNc(34,Z_,1,7,"app-planning-kanban-item",19),r.qZA()(),r.TgZ(35,"div",16)(36,"h2"),r._uU(37,"En cours"),r.qZA(),r.TgZ(38,"div",17,20),r.NdJ("cdkDropListDropped",function(s){return i.drop(s)}),r.YNc(40,L_,1,7,"app-planning-kanban-item",21),r.qZA()(),r.TgZ(41,"div",16)(42,"h2"),r._uU(43,"En attente de relecture"),r.qZA(),r.TgZ(44,"div",17,22),r.NdJ("cdkDropListDropped",function(s){return i.drop(s)}),r.YNc(46,q_,1,7,"app-planning-kanban-item",23),r.qZA()(),r.TgZ(47,"div",16)(48,"h2"),r._uU(49,"Diffus\xe9"),r.qZA(),r.TgZ(50,"div",17,24),r.NdJ("cdkDropListDropped",function(s){return i.drop(s)}),r.YNc(52,z_,1,7,"app-planning-kanban-item",25),r.qZA()(),r.TgZ(53,"div",16)(54,"h2"),r._uU(55,"Valid\xe9"),r.qZA(),r.TgZ(56,"div",17,26),r.NdJ("cdkDropListDropped",function(s){return i.drop(s)}),r.YNc(58,B_,1,7,"app-planning-kanban-item",27),r.qZA()(),r.TgZ(59,"div",16)(60,"h2"),r._uU(61,"Replanifi\xe9"),r.qZA(),r.TgZ(62,"div",17,28),r.NdJ("cdkDropListDropped",function(s){return i.drop(s)}),r.YNc(64,V_,1,7,"app-planning-kanban-item",29),r.qZA()(),r.TgZ(65,"div",16)(66,"h2"),r._uU(67,"Fig\xe9"),r.qZA(),r.TgZ(68,"div",17,30),r.NdJ("cdkDropListDropped",function(s){return i.drop(s)}),r.YNc(70,U_,1,7,"app-planning-kanban-item",31),r.qZA()(),r.TgZ(71,"div",16)(72,"h2"),r._uU(73,"Archiv\xe9"),r.qZA(),r.TgZ(74,"div",17,32),r.NdJ("cdkDropListDropped",function(s){return i.drop(s)}),r.YNc(76,H_,1,7,"app-planning-kanban-item",33),r.qZA()()()),2&t){const o=r.MAs(15),s=r.MAs(33),a=r.MAs(39),l=r.MAs(45),c=r.MAs(51),d=r.MAs(57),u=r.MAs(63),h=r.MAs(69),f=r.MAs(75);r.xp6(7),r.Q6J("ngIf",i.trimestre),r.xp6(1),r.Q6J("ngIf",i.daysLeft),r.xp6(5),r.Q6J("formControl",i.myControl)("matAutocomplete",o),r.xp6(3),r.Q6J("ngForOf",r.lcZ(17,37,i.filteredOptions)),r.xp6(5),r.Q6J("ngModel",i.period),r.xp6(1),r.Q6J("value",null),r.xp6(2),r.Q6J("ngForOf",i.periodicite),r.xp6(3),r.Q6J("series",i.chartOptions.series)("chart",i.chartOptions.chart)("dataLabels",i.chartOptions.dataLabels)("plotOptions",i.chartOptions.plotOptions)("xaxis",i.chartOptions.xaxis),r.xp6(5),r.Q6J("cdkDropListData",i.data.notStarted)("cdkDropListConnectedTo",r.Hh0(39,ke,a,l,c,h,u,d,f)),r.xp6(2),r.Q6J("ngForOf",i.data.notStarted),r.xp6(4),r.Q6J("cdkDropListData",i.data.inProgress)("cdkDropListConnectedTo",r.Hh0(47,ke,l,c,h,s,u,d,f)),r.xp6(2),r.Q6J("ngForOf",i.data.inProgress),r.xp6(4),r.Q6J("cdkDropListData",i.data.onHold)("cdkDropListConnectedTo",r.Hh0(55,ke,a,c,h,s,u,d,f)),r.xp6(2),r.Q6J("ngForOf",i.data.onHold),r.xp6(4),r.Q6J("cdkDropListData",i.data.broadcast)("cdkDropListConnectedTo",r.Hh0(63,ke,a,l,h,s,u,d,f)),r.xp6(2),r.Q6J("ngForOf",i.data.broadcast),r.xp6(4),r.Q6J("cdkDropListData",i.data.valid)("cdkDropListConnectedTo",r.Hh0(71,ke,a,l,c,h,s,u,f)),r.xp6(2),r.Q6J("ngForOf",i.data.valid),r.xp6(4),r.Q6J("cdkDropListData",i.data.rescheduled)("cdkDropListConnectedTo",r.Hh0(79,ke,a,l,c,h,s,d,f)),r.xp6(2),r.Q6J("ngForOf",i.data.rescheduled),r.xp6(4),r.Q6J("cdkDropListData",i.data.fixed)("cdkDropListConnectedTo",r.Hh0(87,ke,a,l,c,s,u,d,f)),r.xp6(2),r.Q6J("ngForOf",i.data.fixed),r.xp6(4),r.Q6J("cdkDropListData",i.data.archived)("cdkDropListConnectedTo",r.Hh0(95,ke,a,l,c,h,s,u,d)),r.xp6(2),r.Q6J("ngForOf",i.data.archived)}},dependencies:[hl.XC,Ts.ey,hl.ZL,It.lW,Es.Nt,ye.KE,ye.hX,Ss.gD,oo.Wj,oo.Zt,R.Fj,R.JJ,R.On,R.oH,O.sg,O.O5,O.PC,As.x,E_,O.Ov,O.uU],styles:[".example-container[_ngcontent-%COMP%]{min-width:250px;font-size:14px;max-width:300px;margin:40px 25px 25px 0;display:inline-block;vertical-align:top}.box-element[_ngcontent-%COMP%]{cursor:pointer}.rounded-circle[_ngcontent-%COMP%]{color:#f2f2f2!important;border:none!important}.example-list[_ngcontent-%COMP%]{border:solid 1px #ccc;min-height:60px;background:white;border-radius:4px;overflow:hidden;display:flex;flex-direction:column;background-color:#f2f2f2;height:100%}.example-box[_ngcontent-%COMP%]{padding:20px 10px;border-bottom:solid 1px #ccc;color:#000000de;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;background:white;font-size:14px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]}),n})();const fl={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let uo;const J_=new Uint8Array(16);function Y_(){if(!uo&&(uo=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!uo))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return uo(J_)}const lt=[];for(let n=0;n<256;++n)lt.push((n+256).toString(16).slice(1));const ml=function W_(n,e,t){if(fl.randomUUID&&!e&&!n)return fl.randomUUID();const i=(n=n||{}).random||(n.rng||Y_)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){t=t||0;for(let o=0;o<16;++o)e[t+o]=i[o];return e}return function pl(n,e=0){return(lt[n[e+0]]+lt[n[e+1]]+lt[n[e+2]]+lt[n[e+3]]+"-"+lt[n[e+4]]+lt[n[e+5]]+"-"+lt[n[e+6]]+lt[n[e+7]]+"-"+lt[n[e+8]]+lt[n[e+9]]+"-"+lt[n[e+10]]+lt[n[e+11]]+lt[n[e+12]]+lt[n[e+13]]+lt[n[e+14]]+lt[n[e+15]]).toLowerCase()}(i)};var $_=Z(1292),Q_=Z(8657),gl=Z(3617),ho=Z(7579),K_=Z(2722);const _l=n=>{const e=(n=>{const e={};return Object.keys(n).forEach(t=>{n[t]&&(e[t]=n[t])}),e})(n);return Object.entries(e).map(([t,i])=>`${(n=>n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`))(t)}:${i}`).join(";")};class Us extends Error{constructor(e){super(e),this.name=this.constructor.name}}function ft(n){this.content=n}ft.prototype={constructor:ft,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return-1==e?void 0:this.content[e+1]},update:function(n,e,t){var i=t&&t!=n?this.remove(t):this,o=i.find(n),s=i.content.slice();return-1==o?s.push(t||n,e):(s[o+1]=e,t&&(s[o]=t)),new ft(s)},remove:function(n){var e=this.find(n);if(-1==e)return this;var t=this.content.slice();return t.splice(e,2),new ft(t)},addToStart:function(n,e){return new ft([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new ft(t)},addBefore:function(n,e,t){var i=this.remove(e),o=i.content.slice(),s=i.find(n);return o.splice(-1==s?o.length:s,0,e,t),new ft(o)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return(n=ft.from(n)).size?new ft(n.content.concat(this.subtract(n).content)):this},append:function(n){return(n=ft.from(n)).size?new ft(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=ft.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}},ft.from=function(n){if(n instanceof ft)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new ft(e)};const xl=ft;function bl(n,e,t){for(let i=0;;i++){if(i==n.childCount||i==e.childCount)return n.childCount==e.childCount?null:t;let o=n.child(i),s=e.child(i);if(o!=s){if(!o.sameMarkup(s))return t;if(o.isText&&o.text!=s.text){for(let a=0;o.text[a]==s.text[a];a++)t++;return t}if(o.content.size||s.content.size){let a=bl(o.content,s.content,t+1);if(null!=a)return a}t+=o.nodeSize}else t+=o.nodeSize}}function yl(n,e,t,i){for(let o=n.childCount,s=e.childCount;;){if(0==o||0==s)return o==s?null:{a:t,b:i};let a=n.child(--o),l=e.child(--s),c=a.nodeSize;if(a!=l){if(!a.sameMarkup(l))return{a:t,b:i};if(a.isText&&a.text!=l.text){let d=0,u=Math.min(a.text.length,l.text.length);for(;d<u&&a.text[a.text.length-d-1]==l.text[l.text.length-d-1];)d++,t--,i--;return{a:t,b:i}}if(a.content.size||l.content.size){let d=yl(a.content,l.content,t-1,i-1);if(d)return d}t-=c,i-=c}else t-=c,i-=c}}class M{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let i=0;i<e.length;i++)this.size+=e[i].nodeSize}nodesBetween(e,t,i,o=0,s){for(let a=0,l=0;l<t;a++){let c=this.content[a],d=l+c.nodeSize;if(d>e&&!1!==i(c,o+l,s||null,a)&&c.content.size){let u=l+1;c.nodesBetween(Math.max(0,e-u),Math.min(c.content.size,t-u),i,o+u)}l=d}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,i,o){let s="",a=!0;return this.nodesBetween(e,t,(l,c)=>{l.isText?(s+=l.text.slice(Math.max(e,c)-c,t-c),a=!i):l.isLeaf?(o?s+="function"==typeof o?o(l):o:l.type.spec.leafText&&(s+=l.type.spec.leafText(l)),a=!i):!a&&l.isBlock&&(s+=i,a=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,i=e.firstChild,o=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(i)&&(o[o.length-1]=t.withText(t.text+i.text),s=1);s<e.content.length;s++)o.push(e.content[s]);return new M(o,this.size+e.size)}cut(e,t=this.size){if(0==e&&t==this.size)return this;let i=[],o=0;if(t>e)for(let s=0,a=0;a<t;s++){let l=this.content[s],c=a+l.nodeSize;c>e&&((a<e||c>t)&&(l=l.isText?l.cut(Math.max(0,e-a),Math.min(l.text.length,t-a)):l.cut(Math.max(0,e-a-1),Math.min(l.content.size,t-a-1))),i.push(l),o+=l.nodeSize),a=c}return new M(i,o)}cutByIndex(e,t){return e==t?M.empty:0==e&&t==this.content.length?this:new M(this.content.slice(e,t))}replaceChild(e,t){let i=this.content[e];if(i==t)return this;let o=this.content.slice(),s=this.size+t.nodeSize-i.nodeSize;return o[e]=t,new M(o,s)}addToStart(e){return new M([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new M(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,i=0;t<this.content.length;t++){let o=this.content[t];e(o,i,t),i+=o.nodeSize}}findDiffStart(e,t=0){return bl(this,e,t)}findDiffEnd(e,t=this.size,i=e.size){return yl(this,e,t,i)}findIndex(e,t=-1){if(0==e)return fo(0,e);if(e==this.size)return fo(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let i=0,o=0;;i++){let a=o+this.child(i).nodeSize;if(a>=e)return a==e||t>0?fo(i+1,a):fo(i,o);o=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return M.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new M(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return M.empty;let t,i=0;for(let o=0;o<e.length;o++){let s=e[o];i+=s.nodeSize,o&&s.isText&&e[o-1].sameMarkup(s)?(t||(t=e.slice(0,o)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new M(t||e,i)}static from(e){if(!e)return M.empty;if(e instanceof M)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new M([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}M.empty=new M([],0);const Hs={index:0,offset:0};function fo(n,e){return Hs.index=n,Hs.offset=e,Hs}function po(n,e){if(n===e)return!0;if(!n||"object"!=typeof n||!e||"object"!=typeof e)return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!po(n[i],e[i]))return!1}else{for(let i in n)if(!(i in e)||!po(n[i],e[i]))return!1;for(let i in e)if(!(i in n))return!1}return!0}let j=(()=>{class n{constructor(t,i){this.type=t,this.attrs=i}addToSet(t){let i,o=!1;for(let s=0;s<t.length;s++){let a=t[s];if(this.eq(a))return t;if(this.type.excludes(a.type))i||(i=t.slice(0,s));else{if(a.type.excludes(this.type))return t;!o&&a.type.rank>this.type.rank&&(i||(i=t.slice(0,s)),i.push(this),o=!0),i&&i.push(a)}}return i||(i=t.slice()),o||i.push(this),i}removeFromSet(t){for(let i=0;i<t.length;i++)if(this.eq(t[i]))return t.slice(0,i).concat(t.slice(i+1));return t}isInSet(t){for(let i=0;i<t.length;i++)if(this.eq(t[i]))return!0;return!1}eq(t){return this==t||this.type==t.type&&po(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let i in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,i){if(!i)throw new RangeError("Invalid input for Mark.fromJSON");let o=t.marks[i.type];if(!o)throw new RangeError(`There is no mark type ${i.type} in this schema`);return o.create(i.attrs)}static sameSet(t,i){if(t==i)return!0;if(t.length!=i.length)return!1;for(let o=0;o<t.length;o++)if(!t[o].eq(i[o]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&0==t.length)return n.none;if(t instanceof n)return[t];let i=t.slice();return i.sort((o,s)=>o.type.rank-s.type.rank),i}}return n.none=[],n})();class mo extends Error{}class A{constructor(e,t,i){this.content=e,this.openStart=t,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let i=Cl(this.content,e+this.openStart,t);return i&&new A(i,this.openStart,this.openEnd)}removeBetween(e,t){return new A(vl(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return A.empty;let i=t.openStart||0,o=t.openEnd||0;if("number"!=typeof i||"number"!=typeof o)throw new RangeError("Invalid input for Slice.fromJSON");return new A(M.fromJSON(e,t.content),i,o)}static maxOpen(e,t=!0){let i=0,o=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)i++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)o++;return new A(e,i,o)}}function vl(n,e,t){let{index:i,offset:o}=n.findIndex(e),s=n.maybeChild(i),{index:a,offset:l}=n.findIndex(t);if(o==e||s.isText){if(l!=t&&!n.child(a).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(i!=a)throw new RangeError("Removing non-flat range");return n.replaceChild(i,s.copy(vl(s.content,e-o-1,t-o-1)))}function Cl(n,e,t,i){let{index:o,offset:s}=n.findIndex(e),a=n.maybeChild(o);if(s==e||a.isText)return i&&!i.canReplace(o,o,t)?null:n.cut(0,e).append(t).append(n.cut(e));let l=Cl(a.content,e-s-1,t);return l&&n.replaceChild(o,a.copy(l))}function e0(n,e,t){if(t.openStart>n.depth)throw new mo("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new mo("Inconsistent open depths");return kl(n,e,t,0)}function kl(n,e,t,i){let o=n.index(i),s=n.node(i);if(o==e.index(i)&&i<n.depth-t.openStart){let a=kl(n,e,t,i+1);return s.copy(s.content.replaceChild(o,a))}if(t.content.size){if(t.openStart||t.openEnd||n.depth!=i||e.depth!=i){let{start:a,end:l}=function n0(n,e){let t=e.depth-n.openStart,o=e.node(t).copy(n.content);for(let s=t-1;s>=0;s--)o=e.node(s).copy(M.from(o));return{start:o.resolveNoCache(n.openStart+t),end:o.resolveNoCache(o.content.size-n.openEnd-t)}}(t,n);return Ge(s,Ml(n,a,l,e,i))}{let a=n.parent,l=a.content;return Ge(a,l.cut(0,n.parentOffset).append(t.content).append(l.cut(e.parentOffset)))}}return Ge(s,go(n,e,i))}function wl(n,e){if(!e.type.compatibleContent(n.type))throw new mo("Cannot join "+e.type.name+" onto "+n.type.name)}function js(n,e,t){let i=n.node(t);return wl(i,e.node(t)),i}function Ke(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function ci(n,e,t,i){let o=(e||n).node(t),s=0,a=e?e.index(t):o.childCount;n&&(s=n.index(t),n.depth>t?s++:n.textOffset&&(Ke(n.nodeAfter,i),s++));for(let l=s;l<a;l++)Ke(o.child(l),i);e&&e.depth==t&&e.textOffset&&Ke(e.nodeBefore,i)}function Ge(n,e){return n.type.checkContent(e),n.copy(e)}function Ml(n,e,t,i,o){let s=n.depth>o&&js(n,e,o+1),a=i.depth>o&&js(t,i,o+1),l=[];return ci(null,n,o,l),s&&a&&e.index(o)==t.index(o)?(wl(s,a),Ke(Ge(s,Ml(n,e,t,i,o+1)),l)):(s&&Ke(Ge(s,go(n,e,o+1)),l),ci(e,t,o,l),a&&Ke(Ge(a,go(t,i,o+1)),l)),ci(i,null,o,l),new M(l)}function go(n,e,t){let i=[];return ci(null,n,t,i),n.depth>t&&Ke(Ge(js(n,e,t+1),go(n,e,t+1)),i),ci(e,null,t,i),new M(i)}A.empty=new A(M.empty,0,0);class di{constructor(e,t,i){this.pos=e,this.path=t,this.parentOffset=i,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let i=this.pos-this.path[this.path.length-1],o=e.child(t);return i?e.child(t).cut(i):o}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let i=this.path[3*t],o=0==t?0:this.path[3*t-1]+1;for(let s=0;s<e;s++)o+=i.child(s).nodeSize;return o}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return j.none;if(this.textOffset)return e.child(t).marks;let i=e.maybeChild(t-1),o=e.maybeChild(t);if(!i){let l=i;i=o,o=l}let s=i.marks;for(var a=0;a<s.length;a++)!1===s[a].type.spec.inclusive&&(!o||!s[a].isInSet(o.marks))&&(s=s[a--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let i=t.marks,o=e.parent.maybeChild(e.index());for(var s=0;s<i.length;s++)!1===i[s].type.spec.inclusive&&(!o||!i[s].isInSet(o.marks))&&(i=i[s--].removeFromSet(i));return i}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);i>=0;i--)if(e.pos<=this.end(i)&&(!t||t(this.node(i))))return new _o(this,e,i);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let i=[],o=0,s=t;for(let a=e;;){let{index:l,offset:c}=a.content.findIndex(s),d=s-c;if(i.push(a,l,o+c),!d||(a=a.child(l),a.isText))break;s=d-1,o+=c+1}return new di(t,i,s)}static resolveCached(e,t){for(let o=0;o<Js.length;o++){let s=Js[o];if(s.pos==t&&s.doc==e)return s}let i=Js[Ys]=di.resolve(e,t);return Ys=(Ys+1)%o0,i}}let Js=[],Ys=0,o0=12;class _o{constructor(e,t,i){this.$from=e,this.$to=t,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const s0=Object.create(null);class Wt{constructor(e,t,i,o=j.none){this.type=e,this.attrs=t,this.marks=o,this.content=i||M.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,i,o=0){this.content.nodesBetween(e,t,i,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,i,o){return this.content.textBetween(e,t,i,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,i){return this.type==e&&po(this.attrs,t||e.defaultAttrs||s0)&&j.sameSet(this.marks,i||j.none)}copy(e=null){return e==this.content?this:new Wt(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Wt(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,i=!1){if(e==t)return A.empty;let o=this.resolve(e),s=this.resolve(t),a=i?0:o.sharedDepth(t),l=o.start(a),d=o.node(a).content.cut(o.pos-l,s.pos-l);return new A(d,o.depth-a,s.depth-a)}replace(e,t,i){return e0(this.resolve(e),this.resolve(t),i)}nodeAt(e){for(let t=this;;){let{index:i,offset:o}=t.content.findIndex(e);if(t=t.maybeChild(i),!t)return null;if(o==e||t.isText)return t;e-=o+1}}childAfter(e){let{index:t,offset:i}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:i}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:i}=this.content.findIndex(e);if(i<e)return{node:this.content.child(t),index:t,offset:i};let o=this.content.child(t-1);return{node:o,index:t-1,offset:i-o.nodeSize}}resolve(e){return di.resolveCached(this,e)}resolveNoCache(e){return di.resolve(this,e)}rangeHasMark(e,t,i){let o=!1;return t>e&&this.nodesBetween(e,t,s=>(i.isInSet(s.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Tl(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,i=M.empty,o=0,s=i.childCount){let a=this.contentMatchAt(e).matchFragment(i,o,s),l=a&&a.matchFragment(this.content,t);if(!l||!l.validEnd)return!1;for(let c=o;c<s;c++)if(!this.type.allowsMarks(i.child(c).marks))return!1;return!0}canReplaceWith(e,t,i,o){if(o&&!this.type.allowsMarks(o))return!1;let s=this.contentMatchAt(e).matchType(i),a=s&&s.matchFragment(this.content,t);return!!a&&a.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=j.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!j.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let i=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,i)}let o=M.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,o,i)}}Wt.prototype.text=void 0;class xo extends Wt{constructor(e,t,i,o){if(super(e,t,null,o),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Tl(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new xo(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new xo(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Tl(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Xe{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let i=new r0(e,t);if(null==i.next)return Xe.empty;let o=Sl(i);i.next&&i.err("Unexpected trailing text");let s=function f0(n){let e=Object.create(null);return function t(i){let o=[];i.forEach(a=>{n[a].forEach(({term:l,to:c})=>{if(!l)return;let d;for(let u=0;u<o.length;u++)o[u][0]==l&&(d=o[u][1]);Ol(n,c).forEach(u=>{d||o.push([l,d=[]]),-1==d.indexOf(u)&&d.push(u)})})});let s=e[i.join(",")]=new Xe(i.indexOf(n.length-1)>-1);for(let a=0;a<o.length;a++){let l=o[a][1].sort(Dl);s.next.push({type:o[a][0],next:e[l.join(",")]||t(l)})}return s}(Ol(n,0))}(function h0(n){let e=[[]];return o(function s(a,l){if("choice"==a.type)return a.exprs.reduce((c,d)=>c.concat(s(d,l)),[]);if("seq"!=a.type){if("star"==a.type){let c=t();return i(l,c),o(s(a.expr,c),c),[i(c)]}if("plus"==a.type){let c=t();return o(s(a.expr,l),c),o(s(a.expr,c),c),[i(c)]}if("opt"==a.type)return[i(l)].concat(s(a.expr,l));if("range"==a.type){let c=l;for(let d=0;d<a.min;d++){let u=t();o(s(a.expr,c),u),c=u}if(-1==a.max)o(s(a.expr,c),c);else for(let d=a.min;d<a.max;d++){let u=t();i(c,u),o(s(a.expr,c),u),c=u}return[i(c)]}if("name"==a.type)return[i(l,void 0,a.value)];throw new Error("Unknown expr type")}for(let c=0;;c++){let d=s(a.exprs[c],l);if(c==a.exprs.length-1)return d;o(d,l=t())}}(n,0),t()),e;function t(){return e.push([])-1}function i(a,l,c){let d={term:c,to:l};return e[a].push(d),d}function o(a,l){a.forEach(c=>c.to=l)}}(o));return function p0(n,e){for(let t=0,i=[n];t<i.length;t++){let o=i[t],s=!o.validEnd,a=[];for(let l=0;l<o.next.length;l++){let{type:c,next:d}=o.next[l];a.push(c.name),s&&!(c.isText||c.hasRequiredAttrs())&&(s=!1),-1==i.indexOf(d)&&i.push(d)}s&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(s,i),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,i=e.childCount){let o=this;for(let s=t;o&&s<i;s++)o=o.matchType(e.child(s).type);return o}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let i=0;i<e.next.length;i++)if(this.next[t].type==e.next[i].type)return!0;return!1}fillBefore(e,t=!1,i=0){let o=[this];return function s(a,l){let c=a.matchFragment(e,i);if(c&&(!t||c.validEnd))return M.from(l.map(d=>d.createAndFill()));for(let d=0;d<a.next.length;d++){let{type:u,next:h}=a.next[d];if(!u.isText&&!u.hasRequiredAttrs()&&-1==o.indexOf(h)){o.push(h);let f=s(h,l.concat(u));if(f)return f}}return null}(this,[])}findWrapping(e){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==e)return this.wrapCache[i+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let o=i.shift(),s=o.match;if(s.matchType(e)){let a=[];for(let l=o;l.type;l=l.via)a.push(l.type);return a.reverse()}for(let a=0;a<s.next.length;a++){let{type:l,next:c}=s.next[a];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in t)&&(!o.type||c.validEnd)&&(i.push({match:l.contentMatch,type:l,via:o}),t[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return function t(i){e.push(i);for(let o=0;o<i.next.length;o++)-1==e.indexOf(i.next[o].next)&&t(i.next[o].next)}(this),e.map((i,o)=>{let s=o+(i.validEnd?"*":" ")+" ";for(let a=0;a<i.next.length;a++)s+=(a?", ":"")+i.next[a].type.name+"->"+e.indexOf(i.next[a].next);return s}).join("\n")}}Xe.empty=new Xe(!0);class r0{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Sl(n){let e=[];do{e.push(a0(n))}while(n.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function a0(n){let e=[];do{e.push(l0(n))}while(n.next&&")"!=n.next&&"|"!=n.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function l0(n){let e=function u0(n){if(n.eat("(")){let e=Sl(n);return n.eat(")")||n.err("Missing closing paren"),e}if(!/\W/.test(n.next)){let e=function d0(n,e){let t=n.nodeTypes,i=t[e];if(i)return[i];let o=[];for(let s in t){let a=t[s];a.groups.indexOf(e)>-1&&o.push(a)}return 0==o.length&&n.err("No node type or group '"+e+"' found"),o}(n,n.next).map(t=>(null==n.inline?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,1==e.length?e[0]:{type:"choice",exprs:e}}n.err("Unexpected token '"+n.next+"'")}(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else{if(!n.eat("{"))break;e=c0(n,e)}return e}function Al(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function c0(n,e){let t=Al(n),i=t;return n.eat(",")&&(i="}"!=n.next?Al(n):-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:i,expr:e}}function Dl(n,e){return e-n}function Ol(n,e){let t=[];return function i(o){let s=n[o];if(1==s.length&&!s[0].term)return i(s[0].to);t.push(o);for(let a=0;a<s.length;a++){let{term:l,to:c}=s[a];!l&&-1==t.indexOf(c)&&i(c)}}(e),t.sort(Dl)}function El(n){let e=Object.create(null);for(let t in n){let i=n[t];if(!i.hasDefault)return null;e[t]=i.default}return e}function Nl(n,e){let t=Object.create(null);for(let i in n){let o=e&&e[i];if(void 0===o){let s=n[i];if(!s.hasDefault)throw new RangeError("No value supplied for attribute "+i);o=s.default}t[i]=o}return t}function Il(n){let e=Object.create(null);if(n)for(let t in n)e[t]=new m0(n[t]);return e}class bo{constructor(e,t,i){this.name=e,this.schema=t,this.spec=i,this.markSet=null,this.groups=i.group?i.group.split(" "):[],this.attrs=Il(i.attrs),this.defaultAttrs=El(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Xe.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Nl(this.attrs,e)}create(e=null,t,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Wt(this,this.computeAttrs(e),M.from(t),j.setFrom(i))}createChecked(e=null,t,i){return t=M.from(t),this.checkContent(t),new Wt(this,this.computeAttrs(e),t,j.setFrom(i))}createAndFill(e=null,t,i){if(e=this.computeAttrs(e),(t=M.from(t)).size){let a=this.contentMatch.fillBefore(t);if(!a)return null;t=a.append(t)}let o=this.contentMatch.matchFragment(t),s=o&&o.fillBefore(M.empty,!0);return s?new Wt(this,e,t.append(s),j.setFrom(i)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let i=0;i<e.childCount;i++)if(!this.allowsMarks(e.child(i).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(null==this.markSet)return e;let t;for(let i=0;i<e.length;i++)this.allowsMarkType(e[i].type)?t&&t.push(e[i]):t||(t=e.slice(0,i));return t?t.length?t:j.none:e}static compile(e,t){let i=Object.create(null);e.forEach((s,a)=>i[s]=new bo(s,t,a));let o=t.spec.topNode||"doc";if(!i[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let s in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}}class m0{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class yo{constructor(e,t,i,o){this.name=e,this.rank=t,this.schema=i,this.spec=o,this.attrs=Il(o.attrs),this.excluded=null;let s=El(this.attrs);this.instance=s?new j(this,s):null}create(e=null){return!e&&this.instance?this.instance:new j(this,Nl(this.attrs,e))}static compile(e,t){let i=Object.create(null),o=0;return e.forEach((s,a)=>i[s]=new yo(s,o++,t,a)),i}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}}function Pl(n,e){let t=[];for(let i=0;i<e.length;i++){let o=e[i],s=n.marks[o],a=s;if(s)t.push(s);else for(let l in n.marks){let c=n.marks[l];("_"==o||c.spec.group&&c.spec.group.split(" ").indexOf(o)>-1)&&t.push(a=c)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[i]+"'")}return t}class tn{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(i=>{i.tag?this.tags.push(i):i.style&&this.styles.push(i)}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,t={}){let i=new Ll(this,t,!1);return i.addAll(e,t.from,t.to),i.finish()}parseSlice(e,t={}){let i=new Ll(this,t,!0);return i.addAll(e,t.from,t.to),A.maxOpen(i.finish())}matchTag(e,t,i){for(let o=i?this.tags.indexOf(i)+1:0;o<this.tags.length;o++){let s=this.tags[o];if(b0(e,s.tag)&&(void 0===s.namespace||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let a=s.getAttrs(e);if(!1===a)continue;s.attrs=a||void 0}return s}}}matchStyle(e,t,i,o){for(let s=o?this.styles.indexOf(o)+1:0;s<this.styles.length;s++){let a=this.styles[s],l=a.style;if(!(0!=l.indexOf(e)||a.context&&!i.matchesContext(a.context)||l.length>e.length&&(61!=l.charCodeAt(e.length)||l.slice(e.length+1)!=t))){if(a.getAttrs){let c=a.getAttrs(t);if(!1===c)continue;a.attrs=c||void 0}return a}}}static schemaRules(e){let t=[];function i(o){let s=null==o.priority?50:o.priority,a=0;for(;a<t.length;a++){let l=t[a];if((null==l.priority?50:l.priority)<s)break}t.splice(a,0,o)}for(let o in e.marks){let s=e.marks[o].spec.parseDOM;s&&s.forEach(a=>{i(a=ql(a)),a.mark||a.ignore||a.clearMark||(a.mark=o)})}for(let o in e.nodes){let s=e.nodes[o].spec.parseDOM;s&&s.forEach(a=>{i(a=ql(a)),a.node||a.ignore||a.mark||(a.node=o)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new tn(e,tn.schemaRules(e)))}}const Rl={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},_0={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Fl={ol:!0,ul:!0},vo=1,Co=2,ui=4;function Zl(n,e,t){return null!=e?(e?vo:0)|("full"===e?Co:0):n&&"pre"==n.whitespace?vo|Co:t&~ui}class ko{constructor(e,t,i,o,s,a,l){this.type=e,this.attrs=t,this.marks=i,this.pendingMarks=o,this.solid=s,this.options=l,this.content=[],this.activeMarks=j.none,this.stashMarks=[],this.match=a||(l&ui?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(M.from(e));if(!t){let o,i=this.type.contentMatch;return(o=i.findWrapping(e.type))?(this.match=i,o):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&vo)){let o,i=this.content[this.content.length-1];if(i&&i.isText&&(o=/[ \t\r\n\u000c]+$/.exec(i.text))){let s=i;i.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-o[0].length))}}let t=M.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(M.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,i=this.pendingMarks;t<i.length;t++){let o=i[t];(this.type?this.type.allowsMarkType(o.type):v0(o.type,e))&&!o.isInSet(this.activeMarks)&&(this.activeMarks=o.addToSet(this.activeMarks),this.pendingMarks=o.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Rl.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Ll{constructor(e,t,i){this.parser=e,this.options=t,this.isOpen=i,this.open=0;let s,o=t.topNode,a=Zl(null,t.preserveWhitespace,0)|(i?ui:0);s=o?new ko(o.type,o.attrs,j.none,j.none,!0,t.topMatch||o.type.contentMatch,a):new ko(i?null:e.schema.topNodeType,null,j.none,j.none,!0,null,a),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){let t=e.getAttribute("style");if(t){let i=this.readStyles(function y0(n){let t,e=/\s*([\w-]+)\s*:\s*([^;]+)/g,i=[];for(;t=e.exec(n);)i.push(t[1],t[2].trim());return i}(t));if(!i)return;let[o,s]=i,a=this.top;for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l]);this.addElement(e);for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l])}else this.addElement(e)}}addTextNode(e){let t=e.nodeValue,i=this.top;if(i.options&Co||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(i.options&vo)t=i.options&Co?t.replace(/\r\n?/g,"\n"):t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],s=e.previousSibling;(!o||s&&"BR"==s.nodeName||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let o,i=e.nodeName.toLowerCase();Fl.hasOwnProperty(i)&&this.parser.normalizeLists&&function x0(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let i=1==e.nodeType?e.nodeName.toLowerCase():null;i&&Fl.hasOwnProperty(i)&&t?(t.appendChild(e),e=t):"li"==i?t=e:i&&(t=null)}}(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(o=this.parser.matchTag(e,this,t));if(s?s.ignore:_0.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let a,l=this.top,c=this.needsBlock;if(Rl.hasOwnProperty(i))l.content.length&&l.content[0].isInline&&this.open&&(this.open--,l=this.top),a=!0,l.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),a&&this.sync(l),this.needsBlock=c}else this.addElementByRule(e,s,!1===s.consuming?o:void 0)}leafFallback(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))}ignoreFallback(e){"BR"==e.nodeName&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=j.none,i=j.none;t:for(let o=0;o<e.length;o+=2)for(let s;;){let a=this.parser.matchStyle(e[o],e[o+1],this,s);if(!a)continue t;if(a.ignore)return null;if(a.clearMark?this.top.pendingMarks.forEach(l=>{a.clearMark(l)&&(i=l.addToSet(i))}):t=this.parser.schema.marks[a.mark].create(a.attrs).addToSet(t),!1!==a.consuming)break;s=a}return[t,i]}addElementByRule(e,t,i){let o,s,a;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):o=this.enter(s,t.attrs||null,t.preserveWhitespace)):(a=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(a));let l=this.top;if(s&&s.isLeaf)this.findInside(e);else if(i)this.addElement(e,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c));else{let c=e;"string"==typeof t.contentElement?c=e.querySelector(t.contentElement):"function"==typeof t.contentElement?c=t.contentElement(e):t.contentElement&&(c=t.contentElement),this.findAround(e,c,!0),this.addAll(c)}o&&this.sync(l)&&this.open--,a&&this.removePendingMark(a,l)}addAll(e,t,i){let o=t||0;for(let s=t?e.childNodes[t]:e.firstChild,a=null==i?null:e.childNodes[i];s!=a;s=s.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(s);this.findAtPoint(e,o)}findPlace(e){let t,i;for(let o=this.open;o>=0;o--){let s=this.nodes[o],a=s.findWrapping(e);if(a&&(!t||t.length>a.length)&&(t=a,i=s,!a.length)||s.solid)break}if(!t)return!1;this.sync(i);for(let o=0;o<t.length;o++)this.enterInner(t[o],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let i=t.activeMarks;for(let o=0;o<e.marks.length;o++)(!t.type||t.type.allowsMarkType(e.marks[o].type))&&(i=e.marks[o].addToSet(i));return t.content.push(e.mark(i)),!0}return!1}enter(e,t,i){let o=this.findPlace(e.create(t));return o&&this.enterInner(e,t,!0,i),o}enterInner(e,t=null,i=!1,o){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let a=Zl(e,o,s.options);s.options&ui&&0==s.content.length&&(a|=ui),this.nodes.push(new ko(e,t,s.activeMarks,s.pendingMarks,i,null,a)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let i=this.nodes[t].content;for(let o=i.length-1;o>=0;o--)e+=i[o].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==e&&this.find[i].offset==t&&(this.find[i].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,i){if(e!=t&&this.find)for(let o=0;o<this.find.length;o++)null==this.find[o].pos&&1==e.nodeType&&e.contains(this.find[o].node)&&t.compareDocumentPosition(this.find[o].node)&(i?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),i=this.options.context,o=!(this.isOpen||i&&i.parent.type!=this.nodes[0].type),s=(o?0:1)-(i?i.depth+1:0),a=(l,c)=>{for(;l>=0;l--){let d=t[l];if(""==d){if(l==t.length-1||0==l)continue;for(;c>=s;c--)if(a(l-1,c))return!0;return!1}{let u=c>0||0==c&&o?this.nodes[c].type:i&&c>=s?i.node(c-s).type:null;if(!u||u.name!=d&&-1==u.groups.indexOf(d))return!1;c--}}return!0};return a(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(let t in this.parser.schema.nodes){let i=this.parser.schema.nodes[t];if(i.isTextblock&&i.defaultAttrs)return i}}addPendingMark(e){let t=function C0(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let i=this.open;i>=0;i--){let o=this.nodes[i];if(o.pendingMarks.lastIndexOf(e)>-1)o.pendingMarks=e.removeFromSet(o.pendingMarks);else{o.activeMarks=e.removeFromSet(o.activeMarks);let a=o.popFromStashMark(e);a&&o.type&&o.type.allowsMarkType(a.type)&&(o.activeMarks=a.addToSet(o.activeMarks))}if(o==t)break}}}function b0(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function ql(n){let e={};for(let t in n)e[t]=n[t];return e}function v0(n,e){let t=e.schema.nodes;for(let i in t){let o=t[i];if(!o.allowsMarkType(n))continue;let s=[],a=l=>{s.push(l);for(let c=0;c<l.edgeCount;c++){let{type:d,next:u}=l.edge(c);if(d==e||s.indexOf(u)<0&&a(u))return!0}};if(a(o.contentMatch))return!0}}class $t{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},i){i||(i=Ws(t).createDocumentFragment());let o=i,s=[];return e.forEach(a=>{if(s.length||a.marks.length){let l=0,c=0;for(;l<s.length&&c<a.marks.length;){let d=a.marks[c];if(this.marks[d.type.name]){if(!d.eq(s[l][0])||!1===d.type.spec.spanning)break;l++,c++}else c++}for(;l<s.length;)o=s.pop()[1];for(;c<a.marks.length;){let d=a.marks[c++],u=this.serializeMark(d,a.isInline,t);u&&(s.push([d,o]),o.appendChild(u.dom),o=u.contentDOM||u.dom)}}o.appendChild(this.serializeNodeInner(a,t))}),i}serializeNodeInner(e,t){let{dom:i,contentDOM:o}=$t.renderSpec(Ws(t),this.nodes[e.type.name](e));if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,o)}return i}serializeNode(e,t={}){let i=this.serializeNodeInner(e,t);for(let o=e.marks.length-1;o>=0;o--){let s=this.serializeMark(e.marks[o],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(i),i=s.dom)}return i}serializeMark(e,t,i={}){let o=this.marks[e.type.name];return o&&$t.renderSpec(Ws(i),o(e,t))}static renderSpec(e,t,i=null){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let o=t[0],s=o.indexOf(" ");s>0&&(i=o.slice(0,s),o=o.slice(s+1));let a,l=i?e.createElementNS(i,o):e.createElement(o),c=t[1],d=1;if(c&&"object"==typeof c&&null==c.nodeType&&!Array.isArray(c)){d=2;for(let u in c)if(null!=c[u]){let h=u.indexOf(" ");h>0?l.setAttributeNS(u.slice(0,h),u.slice(h+1),c[u]):l.setAttribute(u,c[u])}}for(let u=d;u<t.length;u++){let h=t[u];if(0===h){if(u<t.length-1||u>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}{let{dom:f,contentDOM:p}=$t.renderSpec(e,h,i);if(l.appendChild(f),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new $t(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=zl(e.nodes);return t.text||(t.text=i=>i.text),t}static marksFromSchema(e){return zl(e.marks)}}function zl(n){let e={};for(let t in n){let i=n[t].spec.toDOM;i&&(e[t]=i)}return e}function Ws(n){return n.document||window.document}const Vl=Math.pow(2,16);function k0(n,e){return n+e*Vl}function Ul(n){return 65535&n}class $s{constructor(e,t,i){this.pos=e,this.delInfo=t,this.recover=i}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class Rt{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Rt.empty)return Rt.empty}recover(e){let t=0,i=Ul(e);if(!this.inverted)for(let o=0;o<i;o++)t+=this.ranges[3*o+2]-this.ranges[3*o+1];return this.ranges[3*i]+t+function w0(n){return(n-(65535&n))/Vl}(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,i){let o=0,s=this.inverted?2:1,a=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?o:0);if(c>e)break;let d=this.ranges[l+s],u=this.ranges[l+a],h=c+d;if(e<=h){let p=c+o+((d?e==c?-1:e==h?1:t:t)<0?0:u);if(i)return p;let m=e==(t<0?c:h)?null:k0(l/3,e-c),g=e==c?2:e==h?1:4;return(t<0?e!=c:e!=h)&&(g|=8),new $s(p,g,m)}o+=u-d}return i?e+o:new $s(e+o,0,null)}touches(e,t){let i=0,o=Ul(t),s=this.inverted?2:1,a=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?i:0);if(c>e)break;let d=this.ranges[l+s];if(e<=c+d&&l==3*o)return!0;i+=this.ranges[l+a]-d}return!1}forEach(e){let t=this.inverted?2:1,i=this.inverted?1:2;for(let o=0,s=0;o<this.ranges.length;o+=3){let a=this.ranges[o],l=a-(this.inverted?s:0),c=a+(this.inverted?0:s),d=this.ranges[o+t],u=this.ranges[o+i];e(l,l+d,c,c+u),s+=u-d}}invert(){return new Rt(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?Rt.empty:new Rt(e<0?[0,-e,0]:[0,0,e])}}Rt.empty=new Rt([]);class Mn{constructor(e=[],t,i=0,o=e.length){this.maps=e,this.mirror=t,this.from=i,this.to=o}slice(e=0,t=this.maps.length){return new Mn(this.maps,this.mirror,e,t)}copy(){return new Mn(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,i=this.maps.length;t<e.maps.length;t++){let o=e.getMirror(t);this.appendMap(e.maps[t],null!=o&&o<t?i+o:void 0)}}getMirror(e){if(this.mirror)for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,i=this.maps.length+e.maps.length;t>=0;t--){let o=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=o&&o>t?i-o-1:void 0)}}invert(){let e=new Mn;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let i=this.from;i<this.to;i++)e=this.maps[i].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,i){let o=0;for(let s=this.from;s<this.to;s++){let l=this.maps[s].mapResult(e,t);if(null!=l.recover){let c=this.getMirror(s);if(null!=c&&c>s&&c<this.to){s=c,e=this.maps[c].recover(l.recover);continue}}o|=l.delInfo,e=l.pos}return i?e:new $s(e,o,null)}}const Qs=Object.create(null);class wt{getMap(){return Rt.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=Qs[t.stepType];if(!i)throw new RangeError(`No step type ${t.stepType} defined`);return i.fromJSON(e,t)}static jsonID(e,t){if(e in Qs)throw new RangeError("Duplicate use of step JSON ID "+e);return Qs[e]=t,t.prototype.jsonID=e,t}}class st{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new st(e,null)}static fail(e){return new st(null,e)}static fromReplace(e,t,i,o){try{return st.ok(e.replace(t,i,o))}catch(s){if(s instanceof mo)return st.fail(s.message);throw s}}}function Ks(n,e,t){let i=[];for(let o=0;o<n.childCount;o++){let s=n.child(o);s.content.size&&(s=s.copy(Ks(s.content,e,s))),s.isInline&&(s=e(s,t,o)),i.push(s)}return M.fromArray(i)}class we extends wt{constructor(e,t,i){super(),this.from=e,this.to=t,this.mark=i}apply(e){let t=e.slice(this.from,this.to),i=e.resolve(this.from),o=i.node(i.sharedDepth(this.to)),s=new A(Ks(t.content,(a,l)=>a.isAtom&&l.type.allowsMarkType(this.mark.type)?a.mark(this.mark.addToSet(a.marks)):a,o),t.openStart,t.openEnd);return st.fromReplace(e,this.from,this.to,s)}invert(){return new Qt(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deleted&&i.deleted||t.pos>=i.pos?null:new we(t.pos,i.pos,this.mark)}merge(e){return e instanceof we&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new we(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new we(t.from,t.to,e.markFromJSON(t.mark))}}wt.jsonID("addMark",we);class Qt extends wt{constructor(e,t,i){super(),this.from=e,this.to=t,this.mark=i}apply(e){let t=e.slice(this.from,this.to),i=new A(Ks(t.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),t.openStart,t.openEnd);return st.fromReplace(e,this.from,this.to,i)}invert(){return new we(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deleted&&i.deleted||t.pos>=i.pos?null:new Qt(t.pos,i.pos,this.mark)}merge(e){return e instanceof Qt&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Qt(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Qt(t.from,t.to,e.markFromJSON(t.mark))}}wt.jsonID("removeMark",Qt);class Me extends wt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return st.fail("No node at mark step's position");let i=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return st.fromReplace(e,this.pos,this.pos+1,new A(M.from(i),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let i=this.mark.addToSet(t.marks);if(i.length==t.marks.length){for(let o=0;o<t.marks.length;o++)if(!t.marks[o].isInSet(i))return new Me(this.pos,t.marks[o]);return new Me(this.pos,this.mark)}}return new Tn(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Me(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Me(t.pos,e.markFromJSON(t.mark))}}wt.jsonID("addNodeMark",Me);class Tn extends wt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return st.fail("No node at mark step's position");let i=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return st.fromReplace(e,this.pos,this.pos+1,new A(M.from(i),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new Me(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Tn(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Tn(t.pos,e.markFromJSON(t.mark))}}wt.jsonID("removeNodeMark",Tn);class bt extends wt{constructor(e,t,i,o=!1){super(),this.from=e,this.to=t,this.slice=i,this.structure=o}apply(e){return this.structure&&Gs(e,this.from,this.to)?st.fail("Structure replace would overwrite content"):st.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Rt([this.from,this.to-this.from,this.slice.size])}invert(e){return new bt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deletedAcross&&i.deletedAcross?null:new bt(t.pos,Math.max(t.pos,i.pos),this.slice)}merge(e){if(!(e instanceof bt)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;{let t=this.slice.size+e.slice.size==0?A.empty:new A(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new bt(e.from,this.to,t,this.structure)}}{let t=this.slice.size+e.slice.size==0?A.empty:new A(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new bt(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new bt(t.from,t.to,A.fromJSON(e,t.slice),!!t.structure)}}wt.jsonID("replace",bt);class ct extends wt{constructor(e,t,i,o,s,a,l=!1){super(),this.from=e,this.to=t,this.gapFrom=i,this.gapTo=o,this.slice=s,this.insert=a,this.structure=l}apply(e){if(this.structure&&(Gs(e,this.from,this.gapFrom)||Gs(e,this.gapTo,this.to)))return st.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return st.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,t.content);return i?st.fromReplace(e,this.from,this.to,i):st.fail("Content does not fit in gap")}getMap(){return new Rt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new ct(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1),o=e.map(this.gapFrom,-1),s=e.map(this.gapTo,1);return t.deletedAcross&&i.deletedAcross||o<t.pos||s>i.pos?null:new ct(t.pos,i.pos,o,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ct(t.from,t.to,t.gapFrom,t.gapTo,A.fromJSON(e,t.slice),t.insert,!!t.structure)}}function Gs(n,e,t){let i=n.resolve(e),o=t-e,s=i.depth;for(;o>0&&s>0&&i.indexAfter(s)==i.node(s).childCount;)s--,o--;if(o>0){let a=i.node(s).maybeChild(i.indexAfter(s));for(;o>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,o--}}return!1}function A0(n,e,t){return(0==e||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function hi(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let i=n.depth;;--i){let o=n.$from.node(i),s=n.$from.index(i),a=n.$to.indexAfter(i);if(i<n.depth&&o.canReplace(s,a,t))return i;if(0==i||o.type.spec.isolating||!A0(o,s,a))break}return null}function Xs(n,e,t=null,i=n){let o=function O0(n,e){let{parent:t,startIndex:i,endIndex:o}=n,s=t.contentMatchAt(i).findWrapping(e);return s&&t.canReplaceWith(i,o,s.length?s[0]:e)?s:null}(n,e),s=o&&function E0(n,e){let{parent:t,startIndex:i,endIndex:o}=n,s=t.child(i),a=e.contentMatch.findWrapping(s.type);if(!a)return null;let c=(a.length?a[a.length-1]:e).contentMatch;for(let d=i;c&&d<o;d++)c=c.matchType(t.child(d).type);return c&&c.validEnd?a:null}(i,e);return s?o.map(Yl).concat({type:e,attrs:t}).concat(s.map(Yl)):null}function Yl(n){return{type:n,attrs:null}}function Sn(n,e,t=1,i){let o=n.resolve(e),s=o.depth-t,a=i&&i[i.length-1]||o.parent;if(s<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!a.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let d=o.depth-1,u=t-2;d>s;d--,u--){let h=o.node(d),f=o.index(d);if(h.type.spec.isolating)return!1;let p=h.content.cutByIndex(f,h.childCount),m=i&&i[u+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let g=i&&i[u]||h;if(!h.canReplace(f+1,h.childCount)||!g.type.validContent(p))return!1}let l=o.indexAfter(s),c=i&&i[0];return o.node(s).canReplaceWith(l,l,c?c.type:o.node(s+1).type)}function Mo(n,e){let t=n.resolve(e),i=t.index();return function Wl(n,e){return!(!n||!e||n.isLeaf||!n.canAppend(e))}(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(i,i+1)}function tr(n,e,t=e,i=A.empty){if(e==t&&!i.size)return null;let o=n.resolve(e),s=n.resolve(t);return $l(o,s,i)?new bt(e,t,i):new z0(o,s,i).fit()}function $l(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}wt.jsonID("replaceAround",ct);class z0{constructor(e,t,i){this.$from=e,this.$to=t,this.unplaced=i,this.frontier=[],this.placed=M.empty;for(let o=0;o<=e.depth;o++){let s=e.node(o);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=M.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,i=this.$from,o=this.close(e<0?this.$to:i.doc.resolve(e));if(!o)return null;let s=this.placed,a=i.depth,l=o.depth;for(;a&&l&&1==s.childCount;)s=s.firstChild.content,a--,l--;let c=new A(s,a,l);return e>-1?new ct(i.pos,e,this.$to.pos,this.$to.end(),c,t):c.size||i.pos!=this.$to.pos?new bt(i.pos,o.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,i=0,o=this.unplaced.openEnd;i<e;i++){let s=t.firstChild;if(t.childCount>1&&(o=0),s.type.spec.isolating&&o<=i){e=i;break}t=s.content}for(let t=1;t<=2;t++)for(let i=1==t?e:this.unplaced.openStart;i>=0;i--){let o,s=null;i?(s=er(this.unplaced.content,i-1).firstChild,o=s.content):o=this.unplaced.content;let a=o.firstChild;for(let l=this.depth;l>=0;l--){let u,{type:c,match:d}=this.frontier[l],h=null;if(1==t&&(a?d.matchType(a.type)||(h=d.fillBefore(M.from(a),!1)):s&&c.compatibleContent(s.type)))return{sliceDepth:i,frontierDepth:l,parent:s,inject:h};if(2==t&&a&&(u=d.findWrapping(a.type)))return{sliceDepth:i,frontierDepth:l,parent:s,wrap:u};if(s&&d.matchType(s.type))break}}}openMore(){let{content:e,openStart:t,openEnd:i}=this.unplaced,o=er(e,t);return!(!o.childCount||o.firstChild.isLeaf||(this.unplaced=new A(e,t+1,Math.max(i,o.size+t>=e.size-i?t+1:0)),0))}dropNode(){let{content:e,openStart:t,openEnd:i}=this.unplaced,o=er(e,t);if(o.childCount<=1&&t>0){let s=e.size-t<=t+o.size;this.unplaced=new A(fi(e,t-1,1),t-1,s?t-1:i)}else this.unplaced=new A(fi(e,t,1),t,i)}placeNodes({sliceDepth:e,frontierDepth:t,parent:i,inject:o,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let g=0;g<s.length;g++)this.openFrontierNode(s[g]);let a=this.unplaced,l=i?i.content:a.content,c=a.openStart-e,d=0,u=[],{match:h,type:f}=this.frontier[t];if(o){for(let g=0;g<o.childCount;g++)u.push(o.child(g));h=h.matchFragment(o)}let p=l.size+e-(a.content.size-a.openEnd);for(;d<l.childCount;){let g=l.child(d),_=h.matchType(g.type);if(!_)break;d++,(d>1||0==c||g.content.size)&&(h=_,u.push(Ql(g.mark(f.allowedMarks(g.marks)),1==d?c:0,d==l.childCount?p:-1)))}let m=d==l.childCount;m||(p=-1),this.placed=pi(this.placed,t,M.from(u)),this.frontier[t].match=h,m&&p<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,_=l;g<p;g++){let x=_.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),_=x.content}this.unplaced=m?0==e?A.empty:new A(fi(a.content,e-1,1),e-1,p<0?a.openEnd:e-1):new A(fi(a.content,e,d),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t,e=this.frontier[this.depth];if(!e.type.isTextblock||!nr(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:i}=this.$to,o=this.$to.after(i);for(;i>1&&o==this.$to.end(--i);)++o;return o}findCloseLevel(e){t:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:i,type:o}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),a=nr(e,t,o,i,s);if(a){for(let l=t-1;l>=0;l--){let{match:c,type:d}=this.frontier[l],u=nr(e,l,d,c,!0);if(!u||u.childCount)continue t}return{depth:t,fit:a,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=pi(this.placed,t.depth,t.fit)),e=t.move;for(let i=t.depth+1;i<=e.depth;i++){let o=e.node(i),s=o.type.contentMatch.fillBefore(o.content,!0,e.index(i));this.openFrontierNode(o.type,o.attrs,s)}return e}openFrontierNode(e,t=null,i){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=pi(this.placed,this.depth,M.from(e.create(t,i))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(M.empty,!0);t.childCount&&(this.placed=pi(this.placed,this.frontier.length,t))}}function fi(n,e,t){return 0==e?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(fi(n.firstChild.content,e-1,t)))}function pi(n,e,t){return 0==e?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(pi(n.lastChild.content,e-1,t)))}function er(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function Ql(n,e,t){if(e<=0)return n;let i=n.content;return e>1&&(i=i.replaceChild(0,Ql(i.firstChild,e-1,1==i.childCount?t-1:0))),e>0&&(i=n.type.contentMatch.fillBefore(i).append(i),t<=0&&(i=i.append(n.type.contentMatch.matchFragment(i).fillBefore(M.empty,!0)))),n.copy(i)}function nr(n,e,t,i,o){let s=n.node(e),a=o?n.indexAfter(e):n.index(e);if(a==s.childCount&&!t.compatibleContent(s.type))return null;let l=i.fillBefore(s.content,!0,a);return l&&!function B0(n,e,t){for(let i=t;i<e.childCount;i++)if(!n.allowsMarks(e.child(i).marks))return!0;return!1}(t,s.content,a)?l:null}function V0(n){return n.spec.defining||n.spec.definingForContent}function Kl(n,e,t,i,o){if(e<t){let s=n.firstChild;n=n.replaceChild(0,s.copy(Kl(s.content,e+1,t,i,s)))}if(e>i){let s=o.contentMatchAt(0),a=s.fillBefore(n).append(n);n=a.append(s.matchFragment(a).fillBefore(M.empty,!0))}return n}function Gl(n,e){let t=[];for(let o=Math.min(n.depth,e.depth);o>=0;o--){let s=n.start(o);if(s<n.pos-(n.depth-o)||e.end(o)>e.pos+(e.depth-o)||n.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(s==e.start(o)||o==n.depth&&o==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==s-1)&&t.push(o)}return t}class An extends wt{constructor(e,t,i){super(),this.pos=e,this.attr=t,this.value=i}apply(e){let t=e.nodeAt(this.pos);if(!t)return st.fail("No node at attribute step's position");let i=Object.create(null);for(let s in t.attrs)i[s]=t.attrs[s];i[this.attr]=this.value;let o=t.type.create(i,null,t.marks);return st.fromReplace(e,this.pos,this.pos+1,new A(M.from(o),0,t.isLeaf?0:1))}getMap(){return Rt.empty}invert(e){return new An(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new An(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new An(t.pos,t.attr,t.value)}}wt.jsonID("attr",An);let Dn=class extends Error{};Dn=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t},(Dn.prototype=Object.create(Error.prototype)).constructor=Dn,Dn.prototype.name="TransformError";class J0{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Mn}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Dn(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,i=A.empty){let o=tr(this.doc,e,t,i);return o&&this.step(o),this}replaceWith(e,t,i){return this.replace(e,t,new A(M.from(i),0,0))}delete(e,t){return this.replace(e,t,A.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,i){return function U0(n,e,t,i){if(!i.size)return n.deleteRange(e,t);let o=n.doc.resolve(e),s=n.doc.resolve(t);if($l(o,s,i))return n.step(new bt(e,t,i));let a=Gl(o,n.doc.resolve(t));0==a[a.length-1]&&a.pop();let l=-(o.depth+1);a.unshift(l);for(let f=o.depth,p=o.pos-1;f>0;f--,p--){let m=o.node(f).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;a.indexOf(f)>-1?l=f:o.before(f)==p&&a.splice(1,0,-f)}let c=a.indexOf(l),d=[],u=i.openStart;for(let f=i.content,p=0;;p++){let m=f.firstChild;if(d.push(m),p==i.openStart)break;f=m.content}for(let f=u-1;f>=0;f--){let p=d[f].type,m=V0(p);if(m&&o.node(c).type!=p)u=f;else if(m||!p.isTextblock)break}for(let f=i.openStart;f>=0;f--){let p=(f+u+1)%(i.openStart+1),m=d[p];if(m)for(let g=0;g<a.length;g++){let _=a[(g+c)%a.length],x=!0;_<0&&(x=!1,_=-_);let b=o.node(_-1),C=o.index(_-1);if(b.canReplaceWith(C,C,m.type,m.marks))return n.replace(o.before(_),x?s.after(_):t,new A(Kl(i.content,0,i.openStart,p),p,i.openEnd))}}let h=n.steps.length;for(let f=a.length-1;f>=0&&(n.replace(e,t,i),!(n.steps.length>h));f--){let p=a[f];p<0||(e=o.before(p),t=s.after(p))}}(this,e,t,i),this}replaceRangeWith(e,t,i){return function H0(n,e,t,i){if(!i.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let o=function L0(n,e,t){let i=n.resolve(e);if(i.parent.canReplaceWith(i.index(),i.index(),t))return e;if(0==i.parentOffset)for(let o=i.depth-1;o>=0;o--){let s=i.index(o);if(i.node(o).canReplaceWith(s,s,t))return i.before(o+1);if(s>0)return null}if(i.parentOffset==i.parent.content.size)for(let o=i.depth-1;o>=0;o--){let s=i.indexAfter(o);if(i.node(o).canReplaceWith(s,s,t))return i.after(o+1);if(s<i.node(o).childCount)return null}return null}(n.doc,e,i.type);null!=o&&(e=t=o)}n.replaceRange(e,t,new A(M.from(i),0,0))}(this,e,t,i),this}deleteRange(e,t){return function j0(n,e,t){let i=n.doc.resolve(e),o=n.doc.resolve(t),s=Gl(i,o);for(let a=0;a<s.length;a++){let l=s[a],c=a==s.length-1;if(c&&0==l||i.node(l).type.contentMatch.validEnd)return n.delete(i.start(l),o.end(l));if(l>0&&(c||i.node(l-1).canReplace(i.index(l-1),o.indexAfter(l-1))))return n.delete(i.before(l),o.after(l))}for(let a=1;a<=i.depth&&a<=o.depth;a++)if(e-i.start(a)==i.depth-a&&t>i.end(a)&&o.end(a)-t!=o.depth-a)return n.delete(i.before(a),t);n.delete(e,t)}(this,e,t),this}lift(e,t){return function D0(n,e,t){let{$from:i,$to:o,depth:s}=e,a=i.before(s+1),l=o.after(s+1),c=a,d=l,u=M.empty,h=0;for(let m=s,g=!1;m>t;m--)g||i.index(m)>0?(g=!0,u=M.from(i.node(m).copy(u)),h++):c--;let f=M.empty,p=0;for(let m=s,g=!1;m>t;m--)g||o.after(m+1)<o.end(m)?(g=!0,f=M.from(o.node(m).copy(f)),p++):d++;n.step(new ct(c,d,a,l,new A(u.append(f),h,p),u.size-h,!0))}(this,e,t),this}join(e,t=1){return function Z0(n,e,t){let i=new bt(e-t,e+t,A.empty,!0);n.step(i)}(this,e,t),this}wrap(e,t){return function N0(n,e,t){let i=M.empty;for(let a=t.length-1;a>=0;a--){if(i.size){let l=t[a].type.contentMatch.matchFragment(i);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=M.from(t[a].type.create(t[a].attrs,i))}let o=e.start,s=e.end;n.step(new ct(o,s,o,s,new A(i,0,0),t.length,!0))}(this,e,t),this}setBlockType(e,t=e,i,o=null){return function I0(n,e,t,i,o){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(e,t,(a,l)=>{if(a.isTextblock&&!a.hasMarkup(i,o)&&function P0(n,e,t){let i=n.resolve(e),o=i.index();return i.parent.canReplaceWith(o,o+1,t)}(n.doc,n.mapping.slice(s).map(l),i)){n.clearIncompatible(n.mapping.slice(s).map(l,1),i);let c=n.mapping.slice(s),d=c.map(l,1),u=c.map(l+a.nodeSize,1);return n.step(new ct(d,u,d+1,u-1,new A(M.from(i.create(o,null,a.marks)),0,0),1,!0)),!1}})}(this,e,t,i,o),this}setNodeMarkup(e,t,i=null,o){return function R0(n,e,t,i,o){let s=n.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");t||(t=s.type);let a=t.create(i,null,o||s.marks);if(s.isLeaf)return n.replaceWith(e,e+s.nodeSize,a);if(!t.validContent(s.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new ct(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new A(M.from(a),0,0),1,!0))}(this,e,t,i,o),this}setNodeAttribute(e,t,i){return this.step(new An(e,t,i)),this}addNodeMark(e,t){return this.step(new Me(e,t)),this}removeNodeMark(e,t){if(!(t instanceof j)){let i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at position "+e);if(!(t=t.isInSet(i.marks)))return this}return this.step(new Tn(e,t)),this}split(e,t=1,i){return function F0(n,e,t=1,i){let o=n.doc.resolve(e),s=M.empty,a=M.empty;for(let l=o.depth,c=o.depth-t,d=t-1;l>c;l--,d--){s=M.from(o.node(l).copy(s));let u=i&&i[d];a=M.from(u?u.type.create(u.attrs,a):o.node(l).copy(a))}n.step(new bt(e,e,new A(s.append(a),t,t),!0))}(this,e,t,i),this}addMark(e,t,i){return function M0(n,e,t,i){let a,l,o=[],s=[];n.doc.nodesBetween(e,t,(c,d,u)=>{if(!c.isInline)return;let h=c.marks;if(!i.isInSet(h)&&u.type.allowsMarkType(i.type)){let f=Math.max(d,e),p=Math.min(d+c.nodeSize,t),m=i.addToSet(h);for(let g=0;g<h.length;g++)h[g].isInSet(m)||(a&&a.to==f&&a.mark.eq(h[g])?a.to=p:o.push(a=new Qt(f,p,h[g])));l&&l.to==f?l.to=p:s.push(l=new we(f,p,i))}}),o.forEach(c=>n.step(c)),s.forEach(c=>n.step(c))}(this,e,t,i),this}removeMark(e,t,i){return function T0(n,e,t,i){let o=[],s=0;n.doc.nodesBetween(e,t,(a,l)=>{if(!a.isInline)return;s++;let c=null;if(i instanceof yo){let u,d=a.marks;for(;u=i.isInSet(d);)(c||(c=[])).push(u),d=u.removeFromSet(d)}else i?i.isInSet(a.marks)&&(c=[i]):c=a.marks;if(c&&c.length){let d=Math.min(l+a.nodeSize,t);for(let u=0;u<c.length;u++){let f,h=c[u];for(let p=0;p<o.length;p++){let m=o[p];m.step==s-1&&h.eq(o[p].style)&&(f=m)}f?(f.to=d,f.step=s):o.push({style:h,from:Math.max(l,e),to:d,step:s})}}}),o.forEach(a=>n.step(new Qt(a.from,a.to,a.style)))}(this,e,t,i),this}clearIncompatible(e,t,i){return function S0(n,e,t,i=t.contentMatch){let o=n.doc.nodeAt(e),s=[],a=e+1;for(let l=0;l<o.childCount;l++){let c=o.child(l),d=a+c.nodeSize,u=i.matchType(c.type);if(u){i=u;for(let h=0;h<c.marks.length;h++)t.allowsMarkType(c.marks[h].type)||n.step(new Qt(a,d,c.marks[h]))}else s.push(new bt(a,d,A.empty));a=d}if(!i.validEnd){let l=i.fillBefore(M.empty,!0);n.replace(a,a,new A(l,0,0))}for(let l=s.length-1;l>=0;l--)n.step(s[l])}(this,e,t,i),this}}const ir=Object.create(null);class z{constructor(e,t,i){this.$anchor=e,this.$head=t,this.ranges=i||[new Y0(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=A.empty){let i=t.content.lastChild,o=null;for(let l=0;l<t.openEnd;l++)o=i,i=i.lastChild;let s=e.steps.length,a=this.ranges;for(let l=0;l<a.length;l++){let{$from:c,$to:d}=a[l],u=e.mapping.slice(s);e.replaceRange(u.map(c.pos),u.map(d.pos),l?A.empty:t),0==l&&ec(e,s,(i?i.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,t){let i=e.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:a,$to:l}=o[s],c=e.mapping.slice(i),d=c.map(a.pos),u=c.map(l.pos);s?e.deleteRange(d,u):(e.replaceRangeWith(d,u,t),ec(e,i,t.isInline?-1:1))}}static findFrom(e,t,i=!1){let o=e.parent.inlineContent?new U(e):On(e.node(0),e.parent,e.pos,e.index(),t,i);if(o)return o;for(let s=e.depth-1;s>=0;s--){let a=t<0?On(e.node(0),e.node(s),e.before(s+1),e.index(s),t,i):On(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,t,i);if(a)return a}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new At(e.node(0))}static atStart(e){return On(e,e,0,0,1)||new At(e)}static atEnd(e){return On(e,e,e.content.size,e.childCount,-1)||new At(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=ir[t.type];if(!i)throw new RangeError(`No selection type ${t.type} defined`);return i.fromJSON(e,t)}static jsonID(e,t){if(e in ir)throw new RangeError("Duplicate use of selection JSON ID "+e);return ir[e]=t,t.prototype.jsonID=e,t}getBookmark(){return U.between(this.$anchor,this.$head).getBookmark()}}z.prototype.visible=!0;class Y0{constructor(e,t){this.$from=e,this.$to=t}}let Xl=!1;function tc(n){!Xl&&!n.parent.inlineContent&&(Xl=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class U extends z{constructor(e,t=e){tc(e),tc(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let i=e.resolve(t.map(this.head));if(!i.parent.inlineContent)return z.near(i);let o=e.resolve(t.map(this.anchor));return new U(o.parent.inlineContent?o:i,i)}replace(e,t=A.empty){if(super.replace(e,t),t==A.empty){let i=this.$from.marksAcross(this.$to);i&&e.ensureMarks(i)}}eq(e){return e instanceof U&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new To(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new U(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,i=t){let o=e.resolve(t);return new this(o,i==t?o:e.resolve(i))}static between(e,t,i){let o=e.pos-t.pos;if((!i||o)&&(i=o>=0?1:-1),!t.parent.inlineContent){let s=z.findFrom(t,i,!0)||z.findFrom(t,-i,!0);if(!s)return z.near(t,i);t=s.$head}return e.parent.inlineContent||(0==o||(e=(z.findFrom(e,-i,!0)||z.findFrom(e,i,!0)).$anchor).pos<t.pos!=o<0)&&(e=t),new U(e,t)}}z.jsonID("text",U);class To{constructor(e,t){this.anchor=e,this.head=t}map(e){return new To(e.map(this.anchor),e.map(this.head))}resolve(e){return U.between(e.resolve(this.anchor),e.resolve(this.head))}}class N extends z{constructor(e){let t=e.nodeAfter,i=e.node(0).resolve(e.pos+t.nodeSize);super(e,i),this.node=t}map(e,t){let{deleted:i,pos:o}=t.mapResult(this.anchor),s=e.resolve(o);return i?z.near(s):new N(s)}content(){return new A(M.from(this.node),0,0)}eq(e){return e instanceof N&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new or(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new N(e.resolve(t.anchor))}static create(e,t){return new N(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}N.prototype.visible=!1,z.jsonID("node",N);class or{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:i}=e.mapResult(this.anchor);return t?new To(i,i):new or(i)}resolve(e){let t=e.resolve(this.anchor),i=t.nodeAfter;return i&&N.isSelectable(i)?new N(t):z.near(t)}}class At extends z{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=A.empty){if(t==A.empty){e.delete(0,e.doc.content.size);let i=z.atStart(e.doc);i.eq(e.selection)||e.setSelection(i)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new At(e)}map(e){return new At(e)}eq(e){return e instanceof At}getBookmark(){return W0}}z.jsonID("all",At);const W0={map(){return this},resolve:n=>new At(n)};function On(n,e,t,i,o,s=!1){if(e.inlineContent)return U.create(n,t);for(let a=i-(o>0?0:1);o>0?a<e.childCount:a>=0;a+=o){let l=e.child(a);if(l.isAtom){if(!s&&N.isSelectable(l))return N.create(n,t-(o<0?l.nodeSize:0))}else{let c=On(n,l,t+o,o<0?l.childCount:0,o,s);if(c)return c}t+=l.nodeSize*o}return null}function ec(n,e,t){let i=n.steps.length-1;if(i<e)return;let a,o=n.steps[i];(o instanceof bt||o instanceof ct)&&(n.mapping.maps[i].forEach((l,c,d,u)=>{null==a&&(a=u)}),n.setSelection(z.near(n.doc.resolve(a),t)))}class $0 extends J0{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return j.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(e,t){super.addStep(e,t),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let i=this.selection;return t&&(e=e.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||j.none))),i.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,i){let o=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(null==i&&(i=t),i=i??t,!e)return this.deleteRange(t,i);let s=this.storedMarks;if(!s){let a=this.doc.resolve(t);s=i==t?a.marks():a.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(t,i,o.text(e,s)),this.selection.empty||this.setSelection(z.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function oc(n,e){return e&&n?n.bind(e):n}class mi{constructor(e,t,i){this.name=e,this.init=oc(t.init,i),this.apply=oc(t.apply,i)}}const Q0=[new mi("doc",{init:n=>n.doc||n.schema.topNodeType.createAndFill(),apply:n=>n.doc}),new mi("selection",{init:(n,e)=>n.selection||z.atStart(e.doc),apply:n=>n.selection}),new mi("storedMarks",{init:n=>n.storedMarks||null,apply:(n,e,t,i)=>i.selection.$cursor?n.storedMarks:null}),new mi("scrollToSelection",{init:()=>0,apply:(n,e)=>n.scrolledIntoView?e+1:e})];class sr{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Q0.slice(),t&&t.forEach(i=>{if(this.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");this.plugins.push(i),this.pluginsByKey[i.key]=i,i.spec.state&&this.fields.push(new mi(i.key,i.spec.state,i))})}}class En{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=t){let o=this.config.plugins[i];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],i=this.applyInner(e),o=null;for(;;){let s=!1;for(let a=0;a<this.config.plugins.length;a++){let l=this.config.plugins[a];if(l.spec.appendTransaction){let c=o?o[a].n:0,d=o?o[a].state:this,u=c<t.length&&l.spec.appendTransaction.call(l,c?t.slice(c):t,d,i);if(u&&i.filterTransaction(u,a)){if(u.setMeta("appendedTransaction",e),!o){o=[];for(let h=0;h<this.config.plugins.length;h++)o.push(h<a?{state:i,n:t.length}:{state:this,n:0})}t.push(u),i=i.applyInner(u),s=!0}o&&(o[a]={state:i,n:t.length})}}if(!s)return{state:i,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new En(this.config),i=this.config.fields;for(let o=0;o<i.length;o++){let s=i[o];t[s.name]=s.apply(e,this[s.name],this,t)}return t}get tr(){return new $0(this)}static create(e){let t=new sr(e.doc?e.doc.type.schema:e.schema,e.plugins),i=new En(t);for(let o=0;o<t.fields.length;o++)i[t.fields[o].name]=t.fields[o].init(e,i);return i}reconfigure(e){let t=new sr(this.schema,e.plugins),i=t.fields,o=new En(t);for(let s=0;s<i.length;s++){let a=i[s].name;o[a]=this.hasOwnProperty(a)?this[a]:i[s].init(e,o)}return o}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(i=>i.toJSON())),e&&"object"==typeof e)for(let i in e){if("doc"==i||"selection"==i)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[i],s=o.spec.state;s&&s.toJSON&&(t[i]=s.toJSON.call(o,this[o.key]))}return t}static fromJSON(e,t,i){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new sr(e.schema,e.plugins),s=new En(o);return o.fields.forEach(a=>{if("doc"==a.name)s.doc=Wt.fromJSON(e.schema,t.doc);else if("selection"==a.name)s.selection=z.fromJSON(s.doc,t.selection);else if("storedMarks"==a.name)t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(i)for(let l in i){let c=i[l],d=c.spec.state;if(c.key==a.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(t,l))return void(s[a.name]=d.fromJSON.call(c,e,t[l],s))}s[a.name]=a.init(e,s)}}),s}}function sc(n,e,t){for(let i in n){let o=n[i];o instanceof Function?o=o.bind(e):"handleDOMEvents"==i&&(o=sc(o,e,{})),t[i]=o}return t}class Kt{constructor(e){this.spec=e,this.props={},e.props&&sc(e.props,this,this.props),this.key=e.key?e.key.key:rc("plugin")}getState(e){return e[this.key]}}const rr=Object.create(null);function rc(n){return n in rr?n+"$"+ ++rr[n]:(rr[n]=0,n+"$")}class re{constructor(e="key"){this.key=rc(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Dt=function(n){for(var e=0;;e++)if(!(n=n.previousSibling))return e},gi=function(n){let e=n.assignedSlot||n.parentNode;return e&&11==e.nodeType?e.host:e};let ac=null;const ae=function(n,e,t){let i=ac||(ac=document.createRange());return i.setEnd(n,t??n.nodeValue.length),i.setStart(n,e||0),i},en=function(n,e,t,i){return t&&(lc(n,e,t,i,-1)||lc(n,e,t,i,1))},K0=/^(img|br|input|textarea|hr)$/i;function lc(n,e,t,i,o){for(;;){if(n==t&&e==i)return!0;if(e==(o<0?0:Gt(n))){let s=n.parentNode;if(!s||1!=s.nodeType||X0(n)||K0.test(n.nodeName)||"false"==n.contentEditable)return!1;e=Dt(n)+(o<0?0:1),n=s}else{if(1!=n.nodeType)return!1;if("false"==(n=n.childNodes[e+(o<0?-1:0)]).contentEditable)return!1;e=o<0?Gt(n):0}}}function Gt(n){return 3==n.nodeType?n.nodeValue.length:n.childNodes.length}function X0(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const Ao=function(n){return n.focusNode&&en(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function nn(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}const Te=typeof navigator<"u"?navigator:null,cc=typeof document<"u"?document:null,Se=Te&&Te.userAgent||"",ar=/Edge\/(\d+)/.exec(Se),dc=/MSIE \d/.exec(Se),lr=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Se),Mt=!!(dc||lr||ar),Ae=dc?document.documentMode:lr?+lr[1]:ar?+ar[1]:0,zt=!Mt&&/gecko\/(\d+)/i.test(Se);zt&&/Firefox\/(\d+)/.exec(Se);const cr=!Mt&&/Chrome\/(\d+)/.exec(Se),yt=!!cr,ex=cr?+cr[1]:0,vt=!Mt&&!!Te&&/Apple Computer/.test(Te.vendor),Nn=vt&&(/Mobile\/\w+/.test(Se)||!!Te&&Te.maxTouchPoints>2),Ft=Nn||!!Te&&/Mac/.test(Te.platform),Bt=/Android \d/.test(Se),Do=!!cc&&"webkitFontSmoothing"in cc.documentElement.style,nx=Do?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function ix(n){return{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function De(n,e){return"number"==typeof n?n:n[e]}function ox(n){let e=n.getBoundingClientRect();return{left:e.left,right:e.left+n.clientWidth*(e.width/n.offsetWidth||1),top:e.top,bottom:e.top+n.clientHeight*(e.height/n.offsetHeight||1)}}function uc(n,e,t){let i=n.someProp("scrollThreshold")||0,o=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let a=t||n.dom;a;a=gi(a)){if(1!=a.nodeType)continue;let l=a,c=l==s.body,d=c?ix(s):ox(l),u=0,h=0;if(e.top<d.top+De(i,"top")?h=-(d.top-e.top+De(o,"top")):e.bottom>d.bottom-De(i,"bottom")&&(h=e.bottom-d.bottom+De(o,"bottom")),e.left<d.left+De(i,"left")?u=-(d.left-e.left+De(o,"left")):e.right>d.right-De(i,"right")&&(u=e.right-d.right+De(o,"right")),u||h)if(c)s.defaultView.scrollBy(u,h);else{let f=l.scrollLeft,p=l.scrollTop;h&&(l.scrollTop+=h),u&&(l.scrollLeft+=u);let m=l.scrollLeft-f,g=l.scrollTop-p;e={left:e.left-m,top:e.top-g,right:e.right-m,bottom:e.bottom-g}}if(c)break}}function hc(n){let e=[],t=n.ownerDocument;for(let i=n;i&&(e.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),n!=t);i=gi(i));return e}function fc(n,e){for(let t=0;t<n.length;t++){let{dom:i,top:o,left:s}=n[t];i.scrollTop!=o+e&&(i.scrollTop=o+e),i.scrollLeft!=s&&(i.scrollLeft=s)}}let In=null;function pc(n,e){let t,o,i=2e8,s=0,a=e.top,l=e.top;for(let c=n.firstChild,d=0;c;c=c.nextSibling,d++){let u;if(1==c.nodeType)u=c.getClientRects();else{if(3!=c.nodeType)continue;u=ae(c).getClientRects()}for(let h=0;h<u.length;h++){let f=u[h];if(f.top<=a&&f.bottom>=l){a=Math.max(f.bottom,a),l=Math.min(f.top,l);let p=f.left>e.left?f.left-e.left:f.right<e.left?e.left-f.right:0;if(p<i){t=c,i=p,o=p&&3==t.nodeType?{left:f.right<e.left?f.right:f.left,top:e.top}:e,1==c.nodeType&&p&&(s=d+(e.left>=(f.left+f.right)/2?1:0));continue}}!t&&(e.left>=f.right&&e.top>=f.top||e.left>=f.left&&e.top>=f.bottom)&&(s=d+1)}}return t&&3==t.nodeType?function lx(n,e){let t=n.nodeValue.length,i=document.createRange();for(let o=0;o<t;o++){i.setEnd(n,o+1),i.setStart(n,o);let s=Oe(i,1);if(s.top!=s.bottom&&dr(e,s))return{node:n,offset:o+(e.left>=(s.left+s.right)/2?1:0)}}return{node:n,offset:0}}(t,o):!t||i&&1==t.nodeType?{node:n,offset:s}:pc(t,o)}function dr(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function mc(n,e,t){let i=n.childNodes.length;if(i&&t.top<t.bottom)for(let o=Math.max(0,Math.min(i-1,Math.floor(i*(e.top-t.top)/(t.bottom-t.top))-2)),s=o;;){let a=n.childNodes[s];if(1==a.nodeType){let l=a.getClientRects();for(let c=0;c<l.length;c++){let d=l[c];if(dr(e,d))return mc(a,e,d)}}if((s=(s+1)%i)==o)break}return n}function hx(n,e){let i,t=n.dom.ownerDocument,o=0;if(t.caretPositionFromPoint)try{let c=t.caretPositionFromPoint(e.left,e.top);c&&({offsetNode:i,offset:o}=c)}catch{}if(!i&&t.caretRangeFromPoint){let c=t.caretRangeFromPoint(e.left,e.top);c&&({startContainer:i,startOffset:o}=c)}let a,s=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top);if(!s||!n.dom.contains(1!=s.nodeType?s.parentNode:s)){let c=n.dom.getBoundingClientRect();if(!dr(e,c)||(s=mc(n.dom,e,c),!s))return null}if(vt)for(let c=s;i&&c;c=gi(c))c.draggable&&(i=void 0);if(s=function cx(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}(s,e),i){if(zt&&1==i.nodeType&&(o=Math.min(o,i.childNodes.length),o<i.childNodes.length)){let d,c=i.childNodes[o];"IMG"==c.nodeName&&(d=c.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&o++}i==n.dom&&o==i.childNodes.length-1&&1==i.lastChild.nodeType&&e.top>i.lastChild.getBoundingClientRect().bottom?a=n.state.doc.content.size:(0==o||1!=i.nodeType||"BR"!=i.childNodes[o-1].nodeName)&&(a=function ux(n,e,t,i){let o=-1;for(let s=e;s!=n.dom;){let a=n.docView.nearestDesc(s,!0);if(!a)return null;if(1==a.dom.nodeType&&(a.node.isBlock&&a.parent||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&(l.left>i.left||l.top>i.top?o=a.posBefore:(l.right<i.left||l.bottom<i.top)&&(o=a.posAfter)),!a.contentDOM&&o<0)return(a.node.isBlock?i.top<(l.top+l.bottom)/2:i.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}s=a.dom.parentNode}return o>-1?o:n.docView.posFromDOM(e,t,-1)}(n,i,o,e))}null==a&&(a=function dx(n,e,t){let{node:i,offset:o}=pc(e,t),s=-1;if(1==i.nodeType&&!i.firstChild){let a=i.getBoundingClientRect();s=a.left!=a.right&&t.left>(a.left+a.right)/2?1:-1}return n.docView.posFromDOM(i,o,s)}(n,s,e));let l=n.docView.nearestDesc(s,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function Oe(n,e){let t=n.getClientRects();return t.length?t[e<0?0:t.length-1]:n.getBoundingClientRect()}const fx=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function gc(n,e,t){let{node:i,offset:o,atom:s}=n.docView.domFromPos(e,t<0?-1:1),a=Do||zt;if(3==i.nodeType){if(!a||!fx.test(i.nodeValue)&&(t<0?o:o!=i.nodeValue.length)){let c=o,d=o,u=t<0?1:-1;return t<0&&!o?(d++,u=-1):t>=0&&o==i.nodeValue.length?(c--,u=1):t<0?c--:d++,_i(Oe(ae(i,c,d),1),u<0)}{let c=Oe(ae(i,o,o),t);if(zt&&o&&/\s/.test(i.nodeValue[o-1])&&o<i.nodeValue.length){let d=Oe(ae(i,o-1,o-1),-1);if(d.top==c.top){let u=Oe(ae(i,o,o+1),-1);if(u.top!=c.top)return _i(u,u.left<d.left)}}return c}}if(!n.state.doc.resolve(e-(s||0)).parent.inlineContent){if(null==s&&o&&(t<0||o==Gt(i))){let c=i.childNodes[o-1];if(1==c.nodeType)return ur(c.getBoundingClientRect(),!1)}if(null==s&&o<Gt(i)){let c=i.childNodes[o];if(1==c.nodeType)return ur(c.getBoundingClientRect(),!0)}return ur(i.getBoundingClientRect(),t>=0)}if(null==s&&o&&(t<0||o==Gt(i))){let c=i.childNodes[o-1],d=3==c.nodeType?ae(c,Gt(c)-(a?0:1)):1!=c.nodeType||"BR"==c.nodeName&&c.nextSibling?null:c;if(d)return _i(Oe(d,1),!1)}if(null==s&&o<Gt(i)){let c=i.childNodes[o];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let d=c?3==c.nodeType?ae(c,0,a?0:1):1==c.nodeType?c:null:null;if(d)return _i(Oe(d,-1),!0)}return _i(Oe(3==i.nodeType?ae(i):i,-t),t>=0)}function _i(n,e){if(0==n.width)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function ur(n,e){if(0==n.height)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function _c(n,e,t){let i=n.state,o=n.root.activeElement;i!=e&&n.updateState(e),o!=n.dom&&n.focus();try{return t()}finally{i!=e&&n.updateState(i),o!=n.dom&&o&&o.focus()}}const mx=/[\u0590-\u08ac]/;let xc=null,bc=null,yc=!1;class xi{constructor(e,t,i,o){this.parent=e,this.children=t,this.dom=i,this.contentDOM=o,this.dirty=0,i.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,i){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,i=this.posAtStart;;t++){let o=this.children[t];if(o==e)return i;i+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,i){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(i<0){let s,a;if(e==this.contentDOM)s=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&(!(a=s.pmViewDesc)||a.parent!=this);)s=s.previousSibling;return s?this.posBeforeChild(a)+a.size:this.posAtStart}{let s,a;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&(!(a=s.pmViewDesc)||a.parent!=this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}}let o;if(e==this.dom&&this.contentDOM)o=t>Dt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!1;break}if(s.previousSibling)break}if(null==o&&t==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!0;break}if(s.nextSibling)break}}return o??i>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let i=!0,o=e;o;o=o.parentNode){let a,s=this.getDesc(o);if(s&&(!t||s.node)){if(!i||!(a=s.nodeDOM)||(1==a.nodeType?a.contains(1==e.nodeType?e:e.parentNode):a==e))return s;i=!1}}}getDesc(e){let t=e.pmViewDesc;for(let i=t;i;i=i.parent)if(i==this)return t}posFromDOM(e,t,i){for(let o=e;o;o=o.parentNode){let s=this.getDesc(o);if(s)return s.localPosFromDOM(e,t,i)}return-1}descAt(e){for(let t=0,i=0;t<this.children.length;t++){let o=this.children[t],s=i+o.size;if(i==e&&s!=i){for(;!o.border&&o.children.length;)o=o.children[0];return o}if(e<s)return o.descAt(e-i-o.border);i=s}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let i=0,o=0;for(let s=0;i<this.children.length;i++){let a=this.children[i],l=s+a.size;if(l>e||a instanceof wc){o=e-s;break}s=l}if(o)return this.children[i].domFromPos(o-this.children[i].border,t);for(let s;i&&!(s=this.children[i-1]).size&&s instanceof Cc&&s.side>=0;i--);if(t<=0){let s,a=!0;for(;s=i?this.children[i-1]:null,s&&s.dom.parentNode!=this.contentDOM;i--,a=!1);return s&&t&&a&&!s.border&&!s.domAtom?s.domFromPos(s.size,t):{node:this.contentDOM,offset:s?Dt(s.dom)+1:0}}{let s,a=!0;for(;s=i<this.children.length?this.children[i]:null,s&&s.dom.parentNode!=this.contentDOM;i++,a=!1);return s&&a&&!s.border&&!s.domAtom?s.domFromPos(0,t):{node:this.contentDOM,offset:s?Dt(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,i=0){if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,s=-1;for(let a=i,l=0;;l++){let c=this.children[l],d=a+c.size;if(-1==o&&e<=d){let u=a+c.border;if(e>=u&&t<=d-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,t,u);e=a;for(let h=l;h>0;h--){let f=this.children[h-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){o=Dt(f.dom)+1;break}e-=f.size}-1==o&&(o=0)}if(o>-1&&(d>t||l==this.children.length-1)){t=d;for(let u=l+1;u<this.children.length;u++){let h=this.children[u];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){s=Dt(h.dom);break}t+=h.size}-1==s&&(s=this.contentDOM.childNodes.length);break}a=d}return{node:this.contentDOM,from:e,to:t,fromOffset:o,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:i}=this.domFromPos(e,0);if(1!=t.nodeType||i==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[i]}setSelection(e,t,i,o=!1){let s=Math.min(e,t),a=Math.max(e,t);for(let f=0,p=0;f<this.children.length;f++){let m=this.children[f],g=p+m.size;if(s>p&&a<g)return m.setSelection(e-p-m.border,t-p-m.border,i,o);p=g}let l=this.domFromPos(e,e?-1:1),c=t==e?l:this.domFromPos(t,t?-1:1),d=i.getSelection(),u=!1;if((zt||vt)&&e==t){let{node:f,offset:p}=l;if(3==f.nodeType){if(u=!(!p||"\n"!=f.nodeValue[p-1]),u&&p==f.nodeValue.length)for(let g,m=f;m;m=m.parentNode){if(g=m.nextSibling){"BR"==g.nodeName&&(l=c={node:g.parentNode,offset:Dt(g)+1});break}let _=m.pmViewDesc;if(_&&_.node&&_.node.isBlock)break}}else{let m=f.childNodes[p-1];u=m&&("BR"==m.nodeName||"false"==m.contentEditable)}}if(zt&&d.focusNode&&d.focusNode!=c.node&&1==d.focusNode.nodeType){let f=d.focusNode.childNodes[d.focusOffset];f&&"false"==f.contentEditable&&(o=!0)}if(!(o||u&&vt)&&en(l.node,l.offset,d.anchorNode,d.anchorOffset)&&en(c.node,c.offset,d.focusNode,d.focusOffset))return;let h=!1;if((d.extend||e==t)&&!u){d.collapse(l.node,l.offset);try{e!=t&&d.extend(c.node,c.offset),h=!0}catch{}}if(!h){if(e>t){let p=l;l=c,c=p}let f=document.createRange();f.setEnd(c.node,c.offset),f.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let i=0,o=0;o<this.children.length;o++){let s=this.children[o],a=i+s.size;if(i==a?e<=a&&t>=i:e<a&&t>i){let l=i+s.border,c=a-s.border;if(e>=l&&t<=c)return this.dirty=e==i||t==a?2:1,void(e!=l||t!=c||!s.contentLost&&s.dom.parentNode==this.contentDOM?s.markDirty(e-l,t-l):s.dirty=3);s.dirty=s.dom!=s.contentDOM||s.dom.parentNode!=this.contentDOM||s.children.length?3:2}i=a}this.dirty=2}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let i=1==e?2:1;t.dirty<i&&(t.dirty=i)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class Cc extends xi{constructor(e,t,i,o){let s,a=t.type.toDOM;if("function"==typeof a&&(a=a(i,()=>s?s.parent?s.parent.posBeforeChild(s):void 0:o)),!t.type.spec.raw){if(1!=a.nodeType){let l=document.createElement("span");l.appendChild(a),a=l}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(e,[],a,null),this.widget=t,this.widget=t,s=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class xx extends xi{constructor(e,t,i,o){super(e,[],t,null),this.textDOM=i,this.text=o}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class on extends xi{constructor(e,t,i,o){super(e,[],i,o),this.mark=t}static create(e,t,i,o){let s=o.nodeViews[t.type.name],a=s&&s(t,o,i);return(!a||!a.dom)&&(a=$t.renderSpec(document,t.type.spec.toDOM(t,i))),new on(e,t,a.dom,a.contentDOM||a.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),0!=this.dirty){let i=this.parent;for(;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=0}}slice(e,t,i){let o=on.create(this.parent,this.mark,!0,i),s=this.children,a=this.size;t<a&&(s=pr(s,t,a,i)),e>0&&(s=pr(s,0,e,i));for(let l=0;l<s.length;l++)s[l].parent=o;return o.children=s,o}}class sn extends xi{constructor(e,t,i,o,s,a,l,c,d){super(e,[],s,a),this.node=t,this.outerDeco=i,this.innerDeco=o,this.nodeDOM=l,a&&this.updateChildren(c,d)}static create(e,t,i,o,s,a){let c,l=s.nodeViews[t.type.name],d=l&&l(t,s,()=>c?c.parent?c.parent.posBeforeChild(c):void 0:a,i,o),u=d&&d.dom,h=d&&d.contentDOM;if(t.isText)if(u){if(3!=u.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else u=document.createTextNode(t.text);else u||({dom:u,contentDOM:h}=$t.renderSpec(document,t.type.spec.toDOM(t)));!h&&!t.isText&&"BR"!=u.nodeName&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),t.type.spec.draggable&&(u.draggable=!0));let f=u;return u=Sc(u,i,t),d?c=new bx(e,t,i,o,u,h||null,f,d,s,a+1):t.isText?new Oo(e,t,i,o,u,f,s):new sn(e,t,i,o,u,h||null,f,s,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let i=this.children[t];if(this.dom.contains(i.dom.parentNode)){e.contentElement=i.dom.parentNode;break}}e.contentElement||(e.getContent=()=>M.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,t,i){return 0==this.dirty&&e.eq(this.node)&&fr(t,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let i=this.node.inlineContent,o=t,s=e.composing?this.localCompositionInfo(e,t):null,a=s&&s.pos>-1?s:null,l=s&&s.pos<0,c=new vx(this,a&&a.node,e);(function wx(n,e,t,i){let o=e.locals(n),s=0;if(0==o.length){for(let d=0;d<n.childCount;d++){let u=n.child(d);i(u,o,e.forChild(s,u),d),s+=u.nodeSize}return}let a=0,l=[],c=null;for(let d=0;;){if(a<o.length&&o[a].to==s){let g,m=o[a++];for(;a<o.length&&o[a].to==s;)(g||(g=[m])).push(o[a++]);if(g){g.sort(kx);for(let _=0;_<g.length;_++)t(g[_],d,!!c)}else t(m,d,!!c)}let u,h;if(c)h=-1,u=c,c=null;else{if(!(d<n.childCount))break;h=d,u=n.child(d++)}for(let m=0;m<l.length;m++)l[m].to<=s&&l.splice(m--,1);for(;a<o.length&&o[a].from<=s&&o[a].to>s;)l.push(o[a++]);let f=s+u.nodeSize;if(u.isText){let m=f;a<o.length&&o[a].from<m&&(m=o[a].from);for(let g=0;g<l.length;g++)l[g].to<m&&(m=l[g].to);m<f&&(c=u.cut(m-s),u=u.cut(0,m-s),f=m,h=-1)}i(u,u.isInline&&!u.isLeaf?l.filter(m=>!m.inline):l.slice(),e.forChild(s,u),h),s=f}})(this.node,this.innerDeco,(d,u,h)=>{d.spec.marks?c.syncToMarks(d.spec.marks,i,e):d.type.side>=0&&!h&&c.syncToMarks(u==this.node.childCount?j.none:this.node.child(u).marks,i,e),c.placeWidget(d,e,o)},(d,u,h,f)=>{let p;c.syncToMarks(d.marks,i,e),c.findNodeMatch(d,u,h,f)||l&&e.state.selection.from>o&&e.state.selection.to<o+d.nodeSize&&(p=c.findIndexWithChild(s.node))>-1&&c.updateNodeAt(d,u,h,p,e)||c.updateNextNode(d,u,h,e,f)||c.addNode(d,u,h,e,o),o+=d.nodeSize}),c.syncToMarks([],i,e),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||2==this.dirty)&&(a&&this.protectLocalComposition(e,a),Mc(this.contentDOM,this.children,e),Nn&&function Mx(n){if("UL"==n.nodeName||"OL"==n.nodeName){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n),n.style.cssText=e}}(this.dom))}localCompositionInfo(e,t){let{from:i,to:o}=e.state.selection;if(!(e.state.selection instanceof U)||i<t||o>t+this.node.content.size)return null;let s=e.domSelectionRange(),a=function Tx(n,e){for(;;){if(3==n.nodeType)return n;if(1==n.nodeType&&e>0){if(n.childNodes.length>e&&3==n.childNodes[e].nodeType)return n.childNodes[e];e=Gt(n=n.childNodes[e-1])}else{if(!(1==n.nodeType&&e<n.childNodes.length))return null;n=n.childNodes[e],e=0}}}(s.focusNode,s.focusOffset);if(!a||!this.dom.contains(a.parentNode))return null;if(this.node.inlineContent){let l=a.nodeValue,c=function Sx(n,e,t,i){for(let o=0,s=0;o<n.childCount&&s<=i;){let a=n.child(o++),l=s;if(s+=a.nodeSize,!a.isText)continue;let c=a.text;for(;o<n.childCount;){let d=n.child(o++);if(s+=d.nodeSize,!d.isText)break;c+=d.text}if(s>=t){let d=l<i?c.lastIndexOf(e,i-l-1):-1;if(d>=0&&d+e.length+l>=t)return l+d;if(t==i&&c.length>=i+e.length-l&&c.slice(i-l,i-l+e.length)==e)return i}}return-1}(this.node.content,l,i-t,o-t);return c<0?null:{node:a,pos:c,text:l}}return{node:a,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:i,text:o}){if(this.getDesc(t))return;let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let a=new xx(this,s,t,o);e.input.compositionNodes.push(a),this.children=pr(this.children,i,i+o.length,e,a)}update(e,t,i,o){return!(3==this.dirty||!e.sameMarkup(this.node)||(this.updateInner(e,t,i,o),0))}updateInner(e,t,i,o){this.updateOuterDeco(t),this.node=e,this.innerDeco=i,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=0}updateOuterDeco(e){if(fr(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,i=this.dom;this.dom=Tc(this.dom,this.nodeDOM,hr(this.outerDeco,this.node,t),hr(e,this.node,t)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function kc(n,e,t,i,o){return Sc(i,e,n),new sn(void 0,n,e,t,i,i,i,o,0)}class Oo extends sn{constructor(e,t,i,o,s,a,l){super(e,t,i,o,s,null,a,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,i,o){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node)||(this.updateOuterDeco(t),(0!=this.dirty||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=0,0))}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,i){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,i)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,i){let o=this.node.cut(e,t),s=document.createTextNode(o.text);return new Oo(this.parent,o,this.outerDeco,this.innerDeco,s,s,i)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(0==e||t==this.nodeDOM.nodeValue.length)&&(this.dirty=3)}get domAtom(){return!1}}class wc extends xi{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class bx extends sn{constructor(e,t,i,o,s,a,l,c,d,u){super(e,t,i,o,s,a,l,d,u),this.spec=c}update(e,t,i,o){if(3==this.dirty)return!1;if(this.spec.update){let s=this.spec.update(e,t,i);return s&&this.updateInner(e,t,i,o),s}return!(!this.contentDOM&&!e.isLeaf)&&super.update(e,t,i,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,i,o){this.spec.setSelection?this.spec.setSelection(e,t,i):super.setSelection(e,t,i,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Mc(n,e,t){let i=n.firstChild,o=!1;for(let s=0;s<e.length;s++){let a=e[s],l=a.dom;if(l.parentNode==n){for(;l!=i;)i=Ac(i),o=!0;i=i.nextSibling}else o=!0,n.insertBefore(l,i);if(a instanceof on){let c=i?i.previousSibling:n.lastChild;Mc(a.contentDOM,a.children,t),i=c?c.nextSibling:n.firstChild}}for(;i;)i=Ac(i),o=!0;o&&t.trackWrites==n&&(t.trackWrites=null)}const bi=function(n){n&&(this.nodeName=n)};bi.prototype=Object.create(null);const rn=[new bi];function hr(n,e,t){if(0==n.length)return rn;let i=t?rn[0]:new bi,o=[i];for(let s=0;s<n.length;s++){let a=n[s].type.attrs;if(a){a.nodeName&&o.push(i=new bi(a.nodeName));for(let l in a){let c=a[l];null!=c&&(t&&1==o.length&&o.push(i=new bi(e.isInline?"span":"div")),"class"==l?i.class=(i.class?i.class+" ":"")+c:"style"==l?i.style=(i.style?i.style+";":"")+c:"nodeName"!=l&&(i[l]=c))}}}return o}function Tc(n,e,t,i){if(t==rn&&i==rn)return e;let o=e;for(let s=0;s<i.length;s++){let a=i[s],l=t[s];if(s){let c;l&&l.nodeName==a.nodeName&&o!=n&&(c=o.parentNode)&&c.nodeName.toLowerCase()==a.nodeName||(c=document.createElement(a.nodeName),c.pmIsDeco=!0,c.appendChild(o),l=rn[0]),o=c}yx(o,l||rn[0],a)}return o}function yx(n,e,t){for(let i in e)"class"!=i&&"style"!=i&&"nodeName"!=i&&!(i in t)&&n.removeAttribute(i);for(let i in t)"class"!=i&&"style"!=i&&"nodeName"!=i&&t[i]!=e[i]&&n.setAttribute(i,t[i]);if(e.class!=t.class){let i=e.class?e.class.split(" ").filter(Boolean):[],o=t.class?t.class.split(" ").filter(Boolean):[];for(let s=0;s<i.length;s++)-1==o.indexOf(i[s])&&n.classList.remove(i[s]);for(let s=0;s<o.length;s++)-1==i.indexOf(o[s])&&n.classList.add(o[s]);0==n.classList.length&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let o,i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;o=i.exec(e.style);)n.style.removeProperty(o[1])}t.style&&(n.style.cssText+=t.style)}}function Sc(n,e,t){return Tc(n,n,rn,hr(e,t,1!=n.nodeType))}function fr(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function Ac(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class vx{constructor(e,t,i){this.lock=t,this.view=i,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function Cx(n,e){let t=e,i=t.children.length,o=n.childCount,s=new Map,a=[];t:for(;o>0;){let l;for(;;)if(i){let d=t.children[i-1];if(!(d instanceof on)){l=d,i--;break}t=d,i=d.children.length}else{if(t==e)break t;i=t.parent.children.indexOf(t),t=t.parent}let c=l.node;if(c){if(c!=n.child(o-1))break;--o,s.set(l,o),a.push(l)}}return{index:o,matched:s,matches:a.reverse()}}(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let i=e;i<t;i++)this.top.children[i].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,i){let o=0,s=this.stack.length>>1,a=Math.min(s,e.length);for(;o<a&&(o==s-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&!1!==e[o].type.spec.spanning;)o++;for(;o<s;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let d=this.top.children[c];if(d.matchesMark(e[s])&&!this.isLocked(d.dom)){l=c;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let c=on.create(this.top,e[s],t,i);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,s++}}findNodeMatch(e,t,i,o){let a,s=-1;if(o>=this.preMatch.index&&(a=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&a.matchesNode(e,t,i))s=this.top.children.indexOf(a,this.index);else for(let l=this.index,c=Math.min(this.top.children.length,l+5);l<c;l++){let d=this.top.children[l];if(d.matchesNode(e,t,i)&&!this.preMatch.matched.has(d)){s=l;break}}return!(s<0||(this.destroyBetween(this.index,s),this.index++,0))}updateNodeAt(e,t,i,o,s){let a=this.top.children[o];return 3==a.dirty&&a.dom==a.contentDOM&&(a.dirty=2),!!a.update(e,t,i,s)&&(this.destroyBetween(this.index,o),this.index++,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let i=e.pmViewDesc;if(i)for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==i)return o;return-1}e=t}}updateNextNode(e,t,i,o,s){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof sn){let c=this.preMatch.matched.get(l);if(null!=c&&c!=s)return!1;let d=l.dom;if((!this.isLocked(d)||e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&3!=l.dirty&&fr(t,l.outerDeco))&&l.update(e,t,i,o))return this.destroyBetween(this.index,a),l.dom!=d&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(e,t,i,o,s){this.top.children.splice(this.index++,0,sn.create(this.top,e,t,i,o,s)),this.changed=!0}placeWidget(e,t,i){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(!o||!o.matchesWidget(e)||e!=o.widget&&o.widget.type.toDOM.parentNode){let s=new Cc(this.top,e,t,i);this.top.children.splice(this.index++,0,s),this.changed=!0}else this.index++}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof on;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Oo)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((vt||yt)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let i=document.createElement(e);"IMG"==e&&(i.className="ProseMirror-separator",i.alt=""),"BR"==e&&(i.className="ProseMirror-trailingBreak");let o=new wc(this.top,[],i,null);t!=this.top?t.children.push(o):t.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function kx(n,e){return n.type.side-e.type.side}function pr(n,e,t,i,o){let s=[];for(let a=0,l=0;a<n.length;a++){let c=n[a],d=l,u=l+=c.size;d>=t||u<=e?s.push(c):(d<e&&s.push(c.slice(0,e-d,i)),o&&(s.push(o),o=void 0),u>t&&s.push(c.slice(t-d,c.size,i)))}return s}function mr(n,e=null){let t=n.domSelectionRange(),i=n.state.doc;if(!t.focusNode)return null;let o=n.docView.nearestDesc(t.focusNode),s=o&&0==o.size,a=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(a<0)return null;let c,d,l=i.resolve(a);if(Ao(t)){for(c=l;o&&!o.node;)o=o.parent;let u=o.node;if(o&&u.isAtom&&N.isSelectable(u)&&o.parent&&(!u.isInline||!function G0(n,e,t){for(let i=0==e,o=e==Gt(n);i||o;){if(n==t)return!0;let s=Dt(n);if(!(n=n.parentNode))return!1;i=i&&0==s,o=o&&s==Gt(n)}}(t.focusNode,t.focusOffset,o.dom))){let h=o.posBefore;d=new N(a==h?l:i.resolve(h))}}else{let u=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(u<0)return null;c=i.resolve(u)}return d||(d=_r(n,c,l,"pointer"==e||n.state.selection.head<l.pos&&!s?1:-1)),d}function Dc(n){return n.editable?n.hasFocus():Fc(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function le(n,e=!1){let t=n.state.selection;if(Ic(n,t),Dc(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&yt){let i=n.domSelectionRange(),o=n.domObserver.currentSelection;if(i.anchorNode&&o.anchorNode&&en(i.anchorNode,i.anchorOffset,o.anchorNode,o.anchorOffset))return n.input.mouseDown.delayedSelectionSync=!0,void n.domObserver.setCurSelection()}if(n.domObserver.disconnectSelection(),n.cursorWrapper)!function Dx(n){let e=n.domSelection(),t=document.createRange(),i=n.cursorWrapper.dom,o="IMG"==i.nodeName;o?t.setEnd(i.parentNode,Dt(i)+1):t.setEnd(i,0),t.collapse(!1),e.removeAllRanges(),e.addRange(t),!o&&!n.state.selection.visible&&Mt&&Ae<=11&&(i.disabled=!0,i.disabled=!1)}(n);else{let s,a,{anchor:i,head:o}=t;Oc&&!(t instanceof U)&&(t.$from.parent.inlineContent||(s=Ec(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(a=Ec(n,t.to))),n.docView.setSelection(i,o,n.root,e),Oc&&(s&&Nc(s),a&&Nc(a)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function Ax(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),i=t.anchorNode,o=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=i||t.anchorOffset!=o)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!Dc(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Oc=vt||yt&&ex<63;function Ec(n,e){let{node:t,offset:i}=n.docView.domFromPos(e,0),o=i<t.childNodes.length?t.childNodes[i]:null,s=i?t.childNodes[i-1]:null;if(vt&&o&&"false"==o.contentEditable)return gr(o);if(!(o&&"false"!=o.contentEditable||s&&"false"!=s.contentEditable)){if(o)return gr(o);if(s)return gr(s)}}function gr(n){return n.contentEditable="true",vt&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Nc(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function Ic(n,e){if(e instanceof N){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(Pc(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else Pc(n)}function Pc(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function _r(n,e,t,i){return n.someProp("createSelectionBetween",o=>o(n,e,t))||U.between(e,t,i)}function Rc(n){return!(n.editable&&!n.hasFocus())&&Fc(n)}function Fc(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function xr(n,e){let{$anchor:t,$head:i}=n.selection,o=e>0?t.max(i):t.min(i),s=o.parent.inlineContent?o.depth?n.doc.resolve(e>0?o.after():o.before()):null:o;return s&&z.findFrom(s,e)}function an(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function Zc(n,e,t){let i=n.state.selection;if(!(i instanceof U)){if(i instanceof N&&i.node.isInline)return an(n,new U(e>0?i.$to:i.$from));{let o=xr(n.state,e);return!!o&&an(n,o)}}if(!i.empty||t.indexOf("s")>-1)return!1;if(n.endOfTextblock(e>0?"right":"left")){let o=xr(n.state,e);return!!(o&&o instanceof N)&&an(n,o)}if(!(Ft&&t.indexOf("m")>-1)){let a,o=i.$head,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!s||s.isText)return!1;let l=e<0?o.pos-s.nodeSize:o.pos;return!!(s.isAtom||(a=n.docView.descAt(l))&&!a.contentDOM)&&(N.isSelectable(s)?an(n,new N(e<0?n.state.doc.resolve(o.pos-s.nodeSize):o)):!!Do&&an(n,new U(n.state.doc.resolve(e<0?l:l+s.nodeSize))))}}function Eo(n){return 3==n.nodeType?n.nodeValue.length:n.childNodes.length}function yi(n){let e=n.pmViewDesc;return e&&0==e.size&&(n.nextSibling||"BR"!=n.nodeName)}function br(n){let e=n.domSelectionRange(),t=e.focusNode,i=e.focusOffset;if(!t)return;let o,s,a=!1;for(zt&&1==t.nodeType&&i<Eo(t)&&yi(t.childNodes[i])&&(a=!0);;)if(i>0){if(1!=t.nodeType)break;{let l=t.childNodes[i-1];if(yi(l))o=t,s=--i;else{if(3!=l.nodeType)break;t=l,i=t.nodeValue.length}}}else{if(Lc(t))break;{let l=t.previousSibling;for(;l&&yi(l);)o=t.parentNode,s=Dt(l),l=l.previousSibling;if(l)t=l,i=Eo(t);else{if(t=t.parentNode,t==n.dom)break;i=0}}}a?vr(n,t,i):o&&vr(n,o,s)}function yr(n){let e=n.domSelectionRange(),t=e.focusNode,i=e.focusOffset;if(!t)return;let s,a,o=Eo(t);for(;;)if(i<o){if(1!=t.nodeType)break;if(!yi(t.childNodes[i]))break;s=t,a=++i}else{if(Lc(t))break;{let l=t.nextSibling;for(;l&&yi(l);)s=l.parentNode,a=Dt(l)+1,l=l.nextSibling;if(l)t=l,i=0,o=Eo(t);else{if(t=t.parentNode,t==n.dom)break;i=o=0}}}s&&vr(n,s,a)}function Lc(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function vr(n,e,t){let i=n.domSelection();if(Ao(i)){let s=document.createRange();s.setEnd(e,t),s.setStart(e,t),i.removeAllRanges(),i.addRange(s)}else i.extend&&i.extend(e,t);n.domObserver.setCurSelection();let{state:o}=n;setTimeout(()=>{n.state==o&&le(n)},50)}function qc(n,e,t){let i=n.state.selection;if(i instanceof U&&!i.empty||t.indexOf("s")>-1||Ft&&t.indexOf("m")>-1)return!1;let{$from:o,$to:s}=i;if(!o.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let a=xr(n.state,e);if(a&&a instanceof N)return an(n,a)}if(!o.parent.inlineContent){let a=e<0?o:s,l=i instanceof At?z.near(a,e):z.findFrom(a,e);return!!l&&an(n,l)}return!1}function zc(n,e){if(!(n.state.selection instanceof U))return!0;let{$head:t,$anchor:i,empty:o}=n.state.selection;if(!t.sameParent(i))return!0;if(!o)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(s&&!s.isText){let a=n.state.tr;return e<0?a.delete(t.pos-s.nodeSize,t.pos):a.delete(t.pos,t.pos+s.nodeSize),n.dispatch(a),!0}return!1}function Bc(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function Vc(n,e){n.someProp("transformCopied",p=>{e=p(e,n)});let t=[],{content:i,openStart:o,openEnd:s}=e;for(;o>1&&s>1&&1==i.childCount&&1==i.firstChild.childCount;){o--,s--;let p=i.firstChild;t.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),i=p.content}let a=n.someProp("clipboardSerializer")||$t.fromSchema(n.state.schema),l=Qc(),c=l.createElement("div");c.appendChild(a.serializeFragment(i,{document:l}));let u,d=c.firstChild,h=0;for(;d&&1==d.nodeType&&(u=Wc[d.nodeName.toLowerCase()]);){for(let p=u.length-1;p>=0;p--){let m=l.createElement(u[p]);for(;c.firstChild;)m.appendChild(c.firstChild);c.appendChild(m),h++}d=c.firstChild}return d&&1==d.nodeType&&d.setAttribute("data-pm-slice",`${o} ${s}${h?` -${h}`:""} ${JSON.stringify(t)}`),{dom:c,text:n.someProp("clipboardTextSerializer",p=>p(e,n))||e.content.textBetween(0,e.content.size,"\n\n")}}function Uc(n,e,t,i,o){let a,l,s=o.parent.type.spec.code;if(!t&&!e)return null;let c=e&&(i||s||!t);if(c){if(n.someProp("transformPastedText",f=>{e=f(e,s||i,n)}),s)return e?new A(M.from(n.state.schema.text(e.replace(/\r\n?/g,"\n"))),0,0):A.empty;let h=n.someProp("clipboardTextParser",f=>f(e,o,i,n));if(h)l=h;else{let f=o.marks(),{schema:p}=n.state,m=$t.fromSchema(p);a=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let _=a.appendChild(document.createElement("p"));g&&_.appendChild(m.serializeNode(p.text(g,f)))})}}else n.someProp("transformPastedHTML",h=>{t=h(t,n)}),a=function Fx(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let o,t=Qc().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(n);if((o=i&&Wc[i[1].toLowerCase()])&&(n=o.map(s=>"<"+s+">").join("")+n+o.map(s=>"</"+s+">").reverse().join("")),t.innerHTML=n,o)for(let s=0;s<o.length;s++)t=t.querySelector(o[s])||t;return t}(t),Do&&function Zx(n){let e=n.querySelectorAll(yt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let i=e[t];1==i.childNodes.length&&"\xa0"==i.textContent&&i.parentNode&&i.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),i)}}(a);let d=a&&a.querySelector("[data-pm-slice]"),u=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let h=+u[3];h>0;h--){let f=a.firstChild;for(;f&&1!=f.nodeType;)f=f.nextSibling;if(!f)break;a=f}if(l||(l=(n.someProp("clipboardParser")||n.someProp("domParser")||tn.fromSchema(n.state.schema)).parseSlice(a,{preserveWhitespace:!(!c&&!u),context:o,ruleFromNode:f=>"BR"!=f.nodeName||f.nextSibling||!f.parentNode||Px.test(f.parentNode.nodeName)?null:{ignore:!0}})),u)l=function Lx(n,e){if(!n.size)return n;let i,t=n.content.firstChild.type.schema;try{i=JSON.parse(e)}catch{return n}let{content:o,openStart:s,openEnd:a}=n;for(let l=i.length-2;l>=0;l-=2){let c=t.nodes[i[l]];if(!c||c.hasRequiredAttrs())break;o=M.from(c.create(i[l+1],o)),s++,a++}return new A(o,s,a)}(Yc(l,+u[1],+u[2]),u[4]);else if(l=A.maxOpen(function Rx(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let s,o=e.node(t).contentMatchAt(e.index(t)),a=[];if(n.forEach(l=>{if(!a)return;let d,c=o.findWrapping(l.type);if(!c)return a=null;if(d=a.length&&s.length&&jc(c,s,l,a[a.length-1],0))a[a.length-1]=d;else{a.length&&(a[a.length-1]=Jc(a[a.length-1],s.length));let u=Hc(l,c);a.push(u),o=o.matchType(u.type),s=c}}),a)return M.from(a)}return n}(l.content,o),!0),l.openStart||l.openEnd){let h=0,f=0;for(let p=l.content.firstChild;h<l.openStart&&!p.type.spec.isolating;h++,p=p.firstChild);for(let p=l.content.lastChild;f<l.openEnd&&!p.type.spec.isolating;f++,p=p.lastChild);l=Yc(l,h,f)}return n.someProp("transformPasted",h=>{l=h(l,n)}),l}const Px=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Hc(n,e,t=0){for(let i=e.length-1;i>=t;i--)n=e[i].create(null,M.from(n));return n}function jc(n,e,t,i,o){if(o<n.length&&o<e.length&&n[o]==e[o]){let s=jc(n,e,t,i.lastChild,o+1);if(s)return i.copy(i.content.replaceChild(i.childCount-1,s));if(i.contentMatchAt(i.childCount).matchType(o==n.length-1?t.type:n[o+1]))return i.copy(i.content.append(M.from(Hc(t,n,o+1))))}}function Jc(n,e){if(0==e)return n;let t=n.content.replaceChild(n.childCount-1,Jc(n.lastChild,e-1)),i=n.contentMatchAt(n.childCount).fillBefore(M.empty,!0);return n.copy(t.append(i))}function Cr(n,e,t,i,o,s){let a=e<0?n.firstChild:n.lastChild,l=a.content;return o<i-1&&(l=Cr(l,e,t,i,o+1,s)),o>=t&&(l=e<0?a.contentMatchAt(0).fillBefore(l,n.childCount>1||s<=o).append(l):l.append(a.contentMatchAt(a.childCount).fillBefore(M.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,a.copy(l))}function Yc(n,e,t){return e<n.openStart&&(n=new A(Cr(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new A(Cr(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const Wc={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let $c=null;function Qc(){return $c||($c=document.implementation.createHTMLDocument("title"))}const Ct={},kt={},qx={touchstart:!0,touchmove:!0};class zx{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Ee(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function kr(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=i=>wr(n,i))})}function wr(n,e){return n.someProp("handleDOMEvents",t=>{let i=t[e.type];return!!i&&(i(n,e)||e.defaultPrevented)})}function Ux(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||11==t.nodeType||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function No(n){return{left:n.clientX,top:n.clientY}}function Mr(n,e,t,i,o){if(-1==i)return!1;let s=n.state.doc.resolve(i);for(let a=s.depth+1;a>0;a--)if(n.someProp(e,l=>a>s.depth?l(n,t,s.nodeAfter,s.before(a),o,!0):l(n,t,s.node(a),s.before(a),o,!1)))return!0;return!1}function Rn(n,e,t){n.focused||n.focus();let i=n.state.tr.setSelection(e);"pointer"==t&&i.setMeta("pointer",!0),n.dispatch(i)}function $x(n,e,t,i){return Mr(n,"handleDoubleClickOn",e,t,i)||n.someProp("handleDoubleClick",o=>o(n,e,i))}function Qx(n,e,t,i){return Mr(n,"handleTripleClickOn",e,t,i)||n.someProp("handleTripleClick",o=>o(n,e,i))||function Kx(n,e,t){if(0!=t.button)return!1;let i=n.state.doc;if(-1==e)return!!i.inlineContent&&(Rn(n,U.create(i,0,i.content.size),"pointer"),!0);let o=i.resolve(e);for(let s=o.depth+1;s>0;s--){let a=s>o.depth?o.nodeAfter:o.node(s),l=o.before(s);if(a.inlineContent)Rn(n,U.create(i,l+1,l+1+a.content.size),"pointer");else{if(!N.isSelectable(a))continue;Rn(n,N.create(i,l),"pointer")}return!0}}(n,t,i)}function Tr(n){return Io(n)}kt.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=16==t.keyCode||t.shiftKey,!Gc(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!Bt||!yt||13!=t.keyCode))if(229!=t.keyCode&&n.domObserver.forceFlush(),!Nn||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)n.someProp("handleKeyDown",i=>i(n,t))||function Ix(n,e){let t=e.keyCode,i=function Nx(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}(e);return 8==t||Ft&&72==t&&"c"==i?zc(n,-1)||br(n):46==t||Ft&&68==t&&"c"==i?zc(n,1)||yr(n):13==t||27==t||(37==t||Ft&&66==t&&"c"==i?Zc(n,-1,i)||br(n):39==t||Ft&&70==t&&"c"==i?Zc(n,1,i)||yr(n):38==t||Ft&&80==t&&"c"==i?qc(n,-1,i)||br(n):40==t||Ft&&78==t&&"c"==i?function Ex(n){if(!vt||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&1==e.nodeType&&0==t&&e.firstChild&&"false"==e.firstChild.contentEditable){let i=e.firstChild;Bc(n,i,"true"),setTimeout(()=>Bc(n,i,"false"),20)}return!1}(n)||qc(n,1,i)||yr(n):i==(Ft?"m":"c")&&(66==t||73==t||89==t||90==t))}(n,t)?t.preventDefault():Ee(n,"key");else{let i=Date.now();n.input.lastIOSEnter=i,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==i&&(n.someProp("handleKeyDown",o=>o(n,nn(13,"Enter"))),n.input.lastIOSEnter=0)},200)}},kt.keyup=(n,e)=>{16==e.keyCode&&(n.input.shiftKey=!1)},kt.keypress=(n,e)=>{let t=e;if(Gc(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Ft&&t.metaKey)return;if(n.someProp("handleKeyPress",o=>o(n,t)))return void t.preventDefault();let i=n.state.selection;if(!(i instanceof U&&i.$from.sameParent(i.$to))){let o=String.fromCharCode(t.charCode);!/[\r\n]/.test(o)&&!n.someProp("handleTextInput",s=>s(n,i.$from.pos,i.$to.pos,o))&&n.dispatch(n.state.tr.insertText(o).scrollIntoView()),t.preventDefault()}};const Kc=Ft?"metaKey":"ctrlKey";Ct.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let i=Tr(n),o=Date.now(),s="singleClick";o-n.input.lastClick.time<500&&function jx(n,e){let t=e.x-n.clientX,i=e.y-n.clientY;return t*t+i*i<100}(t,n.input.lastClick)&&!t[Kc]&&("singleClick"==n.input.lastClick.type?s="doubleClick":"doubleClick"==n.input.lastClick.type&&(s="tripleClick")),n.input.lastClick={time:o,x:t.clientX,y:t.clientY,type:s};let a=n.posAtCoords(No(t));a&&("singleClick"==s?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new Gx(n,a,t,!!i)):("doubleClick"==s?$x:Qx)(n,a.pos,a.inside,t)?t.preventDefault():Ee(n,"pointer"))};class Gx{constructor(e,t,i,o){let s,a;if(this.view=e,this.pos=t,this.event=i,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!i[Kc],this.allowDefault=i.shiftKey,t.inside>-1)s=e.state.doc.nodeAt(t.inside),a=t.inside;else{let u=e.state.doc.resolve(t.pos);s=u.parent,a=u.depth?u.before():0}const l=o?null:i.target,c=l?e.docView.nearestDesc(l,!0):null;this.target=c?c.dom:null;let{selection:d}=e.state;(0==i.button&&s.type.spec.draggable&&!1!==s.type.spec.selectable||d instanceof N&&d.from<=a&&d.to>a)&&(this.mightDrag={node:s,pos:a,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!zt||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ee(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>le(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(No(e))),this.updateAllowDefault(e),this.allowDefault||!t?Ee(this.view,"pointer"):function Wx(n,e,t,i,o){return Mr(n,"handleClickOn",e,t,i)||n.someProp("handleClick",s=>s(n,e,i))||(o?function Yx(n,e){if(-1==e)return!1;let i,o,t=n.state.selection;t instanceof N&&(i=t.node);let s=n.state.doc.resolve(e);for(let a=s.depth+1;a>0;a--){let l=a>s.depth?s.nodeAfter:s.node(a);if(N.isSelectable(l)){o=i&&t.$from.depth>0&&a>=t.$from.depth&&s.before(t.$from.depth+1)==t.$from.pos?s.before(t.$from.depth):s.before(a);break}}return null!=o&&(Rn(n,N.create(n.state.doc,o),"pointer"),!0)}(n,t):function Jx(n,e){if(-1==e)return!1;let t=n.state.doc.resolve(e),i=t.nodeAfter;return!!(i&&i.isAtom&&N.isSelectable(i))&&(Rn(n,new N(t),"pointer"),!0)}(n,t))}(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||vt&&this.mightDrag&&!this.mightDrag.node.isAtom||yt&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Rn(this.view,z.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Ee(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ee(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function Gc(n,e){return!!n.composing||!!(vt&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500)&&(n.input.compositionEndedAt=-2e8,!0)}Ct.touchstart=n=>{n.input.lastTouch=Date.now(),Tr(n),Ee(n,"pointer")},Ct.touchmove=n=>{n.input.lastTouch=Date.now(),Ee(n,"pointer")},Ct.contextmenu=n=>Tr(n);const Xx=Bt?5e3:-1;function Xc(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Io(n),e))}function td(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=function tb(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function Io(n,e=!1){if(!(Bt&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),td(n),e||n.docView&&n.docView.dirty){let t=mr(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):n.updateState(n.state),!0}return!1}}kt.compositionstart=kt.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(i=>!1===i.type.spec.inclusive)))n.markCursor=n.state.storedMarks||t.marks(),Io(n,!0),n.markCursor=null;else if(Io(n),zt&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let i=n.domSelectionRange();for(let o=i.focusNode,s=i.focusOffset;o&&1==o.nodeType&&0!=s;){let a=s<0?o.lastChild:o.childNodes[s-1];if(!a)break;if(3==a.nodeType){n.domSelection().collapse(a,a.nodeValue.length);break}o=a,s=-1}}n.input.composing=!0}Xc(n,Xx)},kt.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,Xc(n,20))};const Fn=Mt&&Ae<15||Nn&&nx<604;function vi(n,e,t,i,o){let s=Uc(n,e,t,i,n.state.selection.$from);if(n.someProp("handlePaste",c=>c(n,o,s||A.empty)))return!0;if(!s)return!1;let a=function nb(n){return 0==n.openStart&&0==n.openEnd&&1==n.content.childCount?n.content.firstChild:null}(s),l=a?n.state.tr.replaceSelectionWith(a,n.input.shiftKey):n.state.tr.replaceSelection(s);return n.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Ct.copy=kt.cut=(n,e)=>{let t=e,i=n.state.selection,o="cut"==t.type;if(i.empty)return;let s=Fn?null:t.clipboardData,a=i.content(),{dom:l,text:c}=Vc(n,a);s?(t.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",c)):function eb(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),o=document.createRange();o.selectNodeContents(e),n.dom.blur(),i.removeAllRanges(),i.addRange(o),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}(n,l),o&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},kt.paste=(n,e)=>{let t=e;if(n.composing&&!Bt)return;let i=Fn?null:t.clipboardData;i&&vi(n,i.getData("text/plain"),i.getData("text/html"),n.input.shiftKey,t)?t.preventDefault():function ib(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,i=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout(()=>{n.focus(),i.parentNode&&i.parentNode.removeChild(i),t?vi(n,i.value,null,n.input.shiftKey,e):vi(n,i.textContent,i.innerHTML,n.input.shiftKey,e)},50)}(n,t)};class ob{constructor(e,t){this.slice=e,this.move=t}}const ed=Ft?"altKey":"ctrlKey";Ct.dragstart=(n,e)=>{let t=e,i=n.input.mouseDown;if(i&&i.done(),!t.dataTransfer)return;let o=n.state.selection,s=o.empty?null:n.posAtCoords(No(t));if(!(s&&s.pos>=o.from&&s.pos<=(o instanceof N?o.to-1:o.to)))if(i&&i.mightDrag)n.dispatch(n.state.tr.setSelection(N.create(n.state.doc,i.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){let d=n.docView.nearestDesc(t.target,!0);d&&d.node.type.spec.draggable&&d!=n.docView&&n.dispatch(n.state.tr.setSelection(N.create(n.state.doc,d.posBefore)))}let a=n.state.selection.content(),{dom:l,text:c}=Vc(n,a);t.dataTransfer.clearData(),t.dataTransfer.setData(Fn?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",Fn||t.dataTransfer.setData("text/plain",c),n.dragging=new ob(a,!t[ed])},Ct.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)},kt.dragover=kt.dragenter=(n,e)=>e.preventDefault(),kt.drop=(n,e)=>{let t=e,i=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let o=n.posAtCoords(No(t));if(!o)return;let s=n.state.doc.resolve(o.pos),a=i&&i.slice;a?n.someProp("transformPasted",m=>{a=m(a,n)}):a=Uc(n,t.dataTransfer.getData(Fn?"Text":"text/plain"),Fn?null:t.dataTransfer.getData("text/html"),!1,s);let l=!(!i||t[ed]);if(n.someProp("handleDrop",m=>m(n,t,a||A.empty,l)))return void t.preventDefault();if(!a)return;t.preventDefault();let c=a?function q0(n,e,t){let i=n.resolve(e);if(!t.content.size)return e;let o=t.content;for(let s=0;s<t.openStart;s++)o=o.firstChild.content;for(let s=1;s<=(0==t.openStart&&t.size?2:1);s++)for(let a=i.depth;a>=0;a--){let l=a==i.depth?0:i.pos<=(i.start(a+1)+i.end(a+1))/2?-1:1,c=i.index(a)+(l>0?1:0),d=i.node(a),u=!1;if(1==s)u=d.canReplace(c,c,o);else{let h=d.contentMatchAt(c).findWrapping(o.firstChild.type);u=h&&d.canReplaceWith(c,c,h[0])}if(u)return 0==l?i.pos:l<0?i.before(a+1):i.after(a+1)}return null}(n.state.doc,s.pos,a):s.pos;null==c&&(c=s.pos);let d=n.state.tr;l&&d.deleteSelection();let u=d.mapping.map(c),h=0==a.openStart&&0==a.openEnd&&1==a.content.childCount,f=d.doc;if(h?d.replaceRangeWith(u,u,a.content.firstChild):d.replaceRange(u,u,a),d.doc.eq(f))return;let p=d.doc.resolve(u);if(h&&N.isSelectable(a.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(a.content.firstChild))d.setSelection(new N(p));else{let m=d.mapping.map(c);d.mapping.maps[d.mapping.maps.length-1].forEach((g,_,x,b)=>m=b),d.setSelection(_r(n,p,d.doc.resolve(m)))}n.focus(),n.dispatch(d.setMeta("uiEvent","drop"))},Ct.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&le(n)},20))},Ct.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)},Ct.beforeinput=(n,e)=>{if(yt&&Bt&&"deleteContentBackward"==e.inputType){n.domObserver.flushSoon();let{domChangeCount:i}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=i||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,nn(8,"Backspace")))))return;let{$cursor:o}=n.state.selection;o&&o.pos>0&&n.dispatch(n.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let n in kt)Ct[n]=kt[n];function Ci(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Sr{constructor(e,t){this.toDOM=e,this.spec=t||ln,this.side=this.spec.side||0}map(e,t,i,o){let{pos:s,deleted:a}=e.mapResult(t.from+o,this.side<0?-1:1);return a?null:new Zt(s-i,s-i,this)}valid(){return!0}eq(e){return this==e||e instanceof Sr&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ci(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ne{constructor(e,t){this.attrs=e,this.spec=t||ln}map(e,t,i,o){let s=e.map(t.from+o,this.spec.inclusiveStart?-1:1)-i,a=e.map(t.to+o,this.spec.inclusiveEnd?1:-1)-i;return s>=a?null:new Zt(s,a,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Ne&&Ci(this.attrs,e.attrs)&&Ci(this.spec,e.spec)}static is(e){return e.type instanceof Ne}destroy(){}}class Ar{constructor(e,t){this.attrs=e,this.spec=t||ln}map(e,t,i,o){let s=e.mapResult(t.from+o,1);if(s.deleted)return null;let a=e.mapResult(t.to+o,-1);return a.deleted||a.pos<=s.pos?null:new Zt(s.pos-i,a.pos-i,this)}valid(e,t){let s,{index:i,offset:o}=e.content.findIndex(t.from);return o==t.from&&!(s=e.child(i)).isText&&o+s.nodeSize==t.to}eq(e){return this==e||e instanceof Ar&&Ci(this.attrs,e.attrs)&&Ci(this.spec,e.spec)}destroy(){}}class Zt{constructor(e,t,i){this.from=e,this.to=t,this.type=i}copy(e,t){return new Zt(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,i){return this.type.map(e,this,t,i)}static widget(e,t,i){return new Zt(e,e,new Sr(t,i))}static inline(e,t,i,o){return new Zt(e,t,new Ne(i,o))}static node(e,t,i,o){return new Zt(e,t,new Ar(i,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ne}}const Zn=[],ln={};class ot{constructor(e,t){this.local=e.length?e:Zn,this.children=t.length?t:Zn}static create(e,t){return t.length?Po(t,e,0,ln):pt}find(e,t,i){let o=[];return this.findInner(e??0,t??1e9,o,0,i),o}findInner(e,t,i,o,s){for(let a=0;a<this.local.length;a++){let l=this.local[a];l.from<=t&&l.to>=e&&(!s||s(l.spec))&&i.push(l.copy(l.from+o,l.to+o))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){let l=this.children[a]+1;this.children[a+2].findInner(e-l,t-l,i,o+l,s)}}map(e,t,i){return this==pt||0==e.maps.length?this:this.mapInner(e,t,0,0,i||ln)}mapInner(e,t,i,o,s){let a;for(let l=0;l<this.local.length;l++){let c=this.local[l].map(e,i,o);c&&c.type.valid(t,c)?(a||(a=[])).push(c):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?function sb(n,e,t,i,o,s,a){let l=n.slice();for(let d=0,u=s;d<t.maps.length;d++){let h=0;t.maps[d].forEach((f,p,m,g)=>{let _=g-m-(p-f);for(let x=0;x<l.length;x+=3){let b=l[x+1];if(b<0||f>b+u-h)continue;let C=l[x]+u-h;p>=C?l[x+1]=f<=C?-2:-1:m>=o&&_&&(l[x]+=_,l[x+1]+=_)}h+=_}),u=t.maps[d].map(u,-1)}let c=!1;for(let d=0;d<l.length;d+=3)if(l[d+1]<0){if(-2==l[d+1]){c=!0,l[d+1]=-1;continue}let u=t.map(n[d]+s),h=u-o;if(h<0||h>=i.content.size){c=!0;continue}let p=t.map(n[d+1]+s,-1)-o,{index:m,offset:g}=i.content.findIndex(h),_=i.maybeChild(m);if(_&&g==h&&g+_.nodeSize==p){let x=l[d+2].mapInner(t,_,u+1,n[d]+s+1,a);x!=pt?(l[d]=h,l[d+1]=p,l[d+2]=x):(l[d+1]=-2,c=!0)}else c=!0}if(c){let d=function rb(n,e,t,i,o,s,a){function l(c,d){for(let u=0;u<c.local.length;u++){let h=c.local[u].map(i,o,d);h?t.push(h):a.onRemove&&a.onRemove(c.local[u].spec)}for(let u=0;u<c.children.length;u+=3)l(c.children[u+2],c.children[u]+d+1)}for(let c=0;c<n.length;c+=3)-1==n[c+1]&&l(n[c+2],e[c]+s+1);return t}(l,n,e,t,o,s,a),u=Po(d,i,0,a);e=u.local;for(let h=0;h<l.length;h+=3)l[h+1]<0&&(l.splice(h,3),h-=3);for(let h=0,f=0;h<u.children.length;h+=3){let p=u.children[h];for(;f<l.length&&l[f]<p;)f+=3;l.splice(f,0,u.children[h],u.children[h+1],u.children[h+2])}}return new ot(e.sort(cn),l)}(this.children,a||[],e,t,i,o,s):a?new ot(a.sort(cn),Zn):pt}add(e,t){return t.length?this==pt?ot.create(e,t):this.addInner(e,t,0):this}addInner(e,t,i){let o,s=0;e.forEach((l,c)=>{let u,d=c+i;if(u=id(t,l,d)){for(o||(o=this.children.slice());s<o.length&&o[s]<c;)s+=3;o[s]==c?o[s+2]=o[s+2].addInner(l,u,d+1):o.splice(s,0,c,c+l.nodeSize,Po(u,l,d+1,ln)),s+=3}});let a=nd(s?od(t):t,-i);for(let l=0;l<a.length;l++)a[l].type.valid(e,a[l])||a.splice(l--,1);return new ot(a.length?this.local.concat(a).sort(cn):this.local,o||this.children)}remove(e){return 0==e.length||this==pt?this:this.removeInner(e,0)}removeInner(e,t){let i=this.children,o=this.local;for(let s=0;s<i.length;s+=3){let a,l=i[s]+t,c=i[s+1]+t;for(let h,u=0;u<e.length;u++)(h=e[u])&&h.from>l&&h.to<c&&(e[u]=null,(a||(a=[])).push(h));if(!a)continue;i==this.children&&(i=this.children.slice());let d=i[s+2].removeInner(a,l+1);d!=pt?i[s+2]=d:(i.splice(s,3),s-=3)}if(o.length)for(let a,s=0;s<e.length;s++)if(a=e[s])for(let l=0;l<o.length;l++)o[l].eq(a,t)&&(o==this.local&&(o=this.local.slice()),o.splice(l--,1));return i==this.children&&o==this.local?this:o.length||i.length?new ot(o,i):pt}forChild(e,t){if(this==pt)return this;if(t.isLeaf)return ot.empty;let i,o;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(i=this.children[l+2]);break}let s=e+1,a=s+t.content.size;for(let l=0;l<this.local.length;l++){let c=this.local[l];if(c.from<a&&c.to>s&&c.type instanceof Ne){let d=Math.max(s,c.from)-s,u=Math.min(a,c.to)-s;d<u&&(o||(o=[])).push(c.copy(d,u))}}if(o){let l=new ot(o.sort(cn),Zn);return i?new Ie([l,i]):l}return i||pt}eq(e){if(this==e)return!0;if(!(e instanceof ot)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Dr(this.localsInner(e))}localsInner(e){if(this==pt)return Zn;if(e.inlineContent||!this.local.some(Ne.is))return this.local;let t=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof Ne||t.push(this.local[i]);return t}}ot.empty=new ot([],[]),ot.removeOverlap=Dr;const pt=ot.empty;class Ie{constructor(e){this.members=e}map(e,t){const i=this.members.map(o=>o.map(e,t,ln));return Ie.from(i)}forChild(e,t){if(t.isLeaf)return ot.empty;let i=[];for(let o=0;o<this.members.length;o++){let s=this.members[o].forChild(e,t);s!=pt&&(s instanceof Ie?i=i.concat(s.members):i.push(s))}return Ie.from(i)}eq(e){if(!(e instanceof Ie)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,i=!0;for(let o=0;o<this.members.length;o++){let s=this.members[o].localsInner(e);if(s.length)if(t){i&&(t=t.slice(),i=!1);for(let a=0;a<s.length;a++)t.push(s[a])}else t=s}return t?Dr(i?t:t.sort(cn)):Zn}static from(e){switch(e.length){case 0:return pt;case 1:return e[0];default:return new Ie(e.every(t=>t instanceof ot)?e:e.reduce((t,i)=>t.concat(i instanceof ot?i:i.members),[]))}}}function nd(n,e){if(!e||!n.length)return n;let t=[];for(let i=0;i<n.length;i++){let o=n[i];t.push(new Zt(o.from+e,o.to+e,o.type))}return t}function id(n,e,t){if(e.isLeaf)return null;let i=t+e.nodeSize,o=null;for(let a,s=0;s<n.length;s++)(a=n[s])&&a.from>t&&a.to<i&&((o||(o=[])).push(a),n[s]=null);return o}function od(n){let e=[];for(let t=0;t<n.length;t++)null!=n[t]&&e.push(n[t]);return e}function Po(n,e,t,i){let o=[],s=!1;e.forEach((l,c)=>{let d=id(n,l,c+t);if(d){s=!0;let u=Po(d,l,t+c+1,i);u!=pt&&o.push(c,c+l.nodeSize,u)}});let a=nd(s?od(n):n,-t).sort(cn);for(let l=0;l<a.length;l++)a[l].type.valid(e,a[l])||(i.onRemove&&i.onRemove(a[l].spec),a.splice(l--,1));return a.length||o.length?new ot(a,o):pt}function cn(n,e){return n.from-e.from||n.to-e.to}function Dr(n){let e=n;for(let t=0;t<e.length-1;t++){let i=e[t];if(i.from!=i.to)for(let o=t+1;o<e.length;o++){let s=e[o];if(s.from!=i.from){s.from<i.to&&(e==n&&(e=n.slice()),e[t]=i.copy(i.from,s.from),sd(e,o,i.copy(s.from,i.to)));break}s.to!=i.to&&(e==n&&(e=n.slice()),e[o]=s.copy(s.from,i.to),sd(e,o+1,s.copy(i.to,s.to)))}}return e}function sd(n,e,t){for(;e<n.length&&cn(t,n[e])>0;)e++;n.splice(e,0,t)}function Or(n){let e=[];return n.someProp("decorations",t=>{let i=t(n.state);i&&i!=pt&&e.push(i)}),n.cursorWrapper&&e.push(ot.create(n.state.doc,[n.cursorWrapper.deco])),Ie.from(e)}const ab={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},lb=Mt&&Ae<=11;class cb{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class db{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new cb,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(i=>{for(let o=0;o<i.length;o++)this.queue.push(i[o]);Mt&&Ae<=11&&i.some(o=>"childList"==o.type&&o.removedNodes.length||"characterData"==o.type&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),lb&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,ab)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Rc(this.view)){if(this.suppressingSelectionUpdates)return le(this.view);if(Mt&&Ae<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&en(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let i,t=new Set;for(let s=e.focusNode;s;s=gi(s))t.add(s);for(let s=e.anchorNode;s;s=gi(s))if(t.has(s)){i=s;break}let o=i&&this.view.docView.nearestDesc(i);return o&&o.ignoreMutation({type:"selection",target:3==i.nodeType?i.parentNode:i})?(this.setCurSelection(),!0):void 0}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);let i=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(i)&&Rc(e)&&!this.ignoreSelectionChange(i),s=-1,a=-1,l=!1,c=[];if(e.editable)for(let u=0;u<t.length;u++){let h=this.registerMutation(t[u],c);h&&(s=s<0?h.from:Math.min(h.from,s),a=a<0?h.to:Math.max(h.to,a),h.typeOver&&(l=!0))}if(zt&&c.length>1){let u=c.filter(h=>"BR"==h.nodeName);if(2==u.length){let h=u[0],f=u[1];h.parentNode&&h.parentNode.parentNode==f.parentNode?f.remove():h.remove()}}let d=null;s<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Ao(i)&&(d=mr(e))&&d.eq(z.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,le(e),this.currentSelection.set(i),e.scrollToSelection()):(s>-1||o)&&(s>-1&&(e.docView.markDirty(s,a),function ub(n){if(!rd.has(n)&&(rd.set(n,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace))){if(n.requiresGeckoHackNode=zt,ad)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),ad=!0}}(e)),this.handleDOMChange(s,a,l,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(i)||le(e),this.currentSelection.set(i))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let i=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(i==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style"))||!i||i.ignoreMutation(e))return null;if("childList"==e.type){for(let u=0;u<e.addedNodes.length;u++)t.push(e.addedNodes[u]);if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(e.target))return{from:i.posBefore,to:i.posAfter};let o=e.previousSibling,s=e.nextSibling;if(Mt&&Ae<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:h,nextSibling:f}=e.addedNodes[u];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(o=h),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let a=o&&o.parentNode==e.target?Dt(o)+1:0,l=i.localPosFromDOM(e.target,a,-1),c=s&&s.parentNode==e.target?Dt(s):e.target.childNodes.length;return{from:l,to:i.localPosFromDOM(e.target,c,1)}}return"attributes"==e.type?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:{from:i.posAtStart,to:i.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let rd=new WeakMap,ad=!1;function pb(n){let e=n.pmViewDesc;if(e)return e.parseRule();if("BR"==n.nodeName&&n.parentNode){if(vt&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}if(n.parentNode.lastChild==n||vt&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if("IMG"==n.nodeName&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}function ld(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:_r(n,e.resolve(t.anchor),e.resolve(t.head))}function Er(n,e,t){let i=n.depth,o=e?n.end():n.pos;for(;i>0&&(e||n.indexAfter(i)==n.node(i).childCount);)i--,o++,e=!1;if(t){let s=n.node(i).maybeChild(n.indexAfter(i));for(;s&&!s.isLeaf;)s=s.firstChild,o++}return o}class bb{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new zx,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(fd),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=ud(this),dd(this),this.nodeViews=hd(this),this.docView=kc(this.state.doc,cd(this),Or(this),this.dom,this),this.domObserver=new db(this,(i,o,s,a)=>function mb(n,e,t,i,o){if(e<0){let v=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,D=mr(n,v);if(D&&!n.state.selection.eq(D)){if(yt&&Bt&&13===n.input.lastKeyCode&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",P=>P(n,nn(13,"Enter"))))return;let I=n.state.tr.setSelection(D);"pointer"==v?I.setMeta("pointer",!0):"key"==v&&I.scrollIntoView(),n.dispatch(I)}return}let s=n.state.doc.resolve(e),a=s.sharedDepth(t);e=s.before(a+1),t=n.state.doc.resolve(t).after(a+1);let h,f,l=n.state.selection,c=function fb(n,e,t){let d,{node:i,fromOffset:o,toOffset:s,from:a,to:l}=n.docView.parseRange(e,t),c=n.domSelectionRange(),u=c.anchorNode;if(u&&n.dom.contains(1==u.nodeType?u:u.parentNode)&&(d=[{node:u,offset:c.anchorOffset}],Ao(c)||d.push({node:c.focusNode,offset:c.focusOffset})),yt&&8===n.input.lastKeyCode)for(let _=s;_>o;_--){let x=i.childNodes[_-1],b=x.pmViewDesc;if("BR"==x.nodeName&&!b){s=_;break}if(!b||b.size)break}let h=n.state.doc,f=n.someProp("domParser")||tn.fromSchema(n.state.schema),p=h.resolve(a),m=null,g=f.parse(i,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:o,to:s,preserveWhitespace:"pre"!=p.parent.type.whitespace||"full",findPositions:d,ruleFromNode:pb,context:p});if(d&&null!=d[0].pos){let _=d[0].pos,x=d[1]&&d[1].pos;null==x&&(x=_),m={anchor:_+a,head:x+a}}return{doc:g,sel:m,from:a,to:l}}(n,e,t),d=n.state.doc,u=d.slice(c.from,c.to);8===n.input.lastKeyCode&&Date.now()-100<n.input.lastKeyCodeTime?(h=n.state.selection.to,f="end"):(h=n.state.selection.from,f="start"),n.input.lastKeyCode=null;let p=function xb(n,e,t,i,o){let s=n.findDiffStart(e,t);if(null==s)return null;let{a,b:l}=n.findDiffEnd(e,t+n.size,t+e.size);return"end"==o&&(i-=a+Math.max(0,s-Math.min(a,l))-s),a<s&&n.size<e.size?(s-=i<=s&&i>=a?s-i:0,l=s+(l-a),a=s):l<s&&(s-=i<=s&&i>=l?s-i:0,a=s+(a-l),l=s),{start:s,endA:a,endB:l}}(u.content,c.doc.content,c.from,h,f);if((Nn&&n.input.lastIOSEnter>Date.now()-225||Bt)&&o.some(v=>"DIV"==v.nodeName||"P"==v.nodeName||"LI"==v.nodeName)&&(!p||p.endA>=p.endB)&&n.someProp("handleKeyDown",v=>v(n,nn(13,"Enter"))))return void(n.input.lastIOSEnter=0);if(!p){if(!(i&&l instanceof U&&!l.empty&&l.$head.sameParent(l.$anchor))||n.composing||c.sel&&c.sel.anchor!=c.sel.head){if(c.sel){let v=ld(n,n.state.doc,c.sel);v&&!v.eq(n.state.selection)&&n.dispatch(n.state.tr.setSelection(v))}return}p={start:l.from,endA:l.to,endB:l.to}}if(yt&&n.cursorWrapper&&c.sel&&c.sel.anchor==n.cursorWrapper.deco.from&&c.sel.head==c.sel.anchor){let v=p.endB-p.start;c.sel={anchor:c.sel.anchor+v,head:c.sel.anchor+v}}n.input.domChangeCount++,n.state.selection.from<n.state.selection.to&&p.start==p.endB&&n.state.selection instanceof U&&(p.start>n.state.selection.from&&p.start<=n.state.selection.from+2&&n.state.selection.from>=c.from?p.start=n.state.selection.from:p.endA<n.state.selection.to&&p.endA>=n.state.selection.to-2&&n.state.selection.to<=c.to&&(p.endB+=n.state.selection.to-p.endA,p.endA=n.state.selection.to)),Mt&&Ae<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&" \xa0"==c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)&&(p.start--,p.endA--,p.endB--);let b,m=c.doc.resolveNoCache(p.start-c.from),g=c.doc.resolveNoCache(p.endB-c.from),_=d.resolve(p.start),x=m.sameParent(g)&&m.parent.inlineContent&&_.end()>=p.endA;if((Nn&&n.input.lastIOSEnter>Date.now()-225&&(!x||o.some(v=>"DIV"==v.nodeName||"P"==v.nodeName))||!x&&m.pos<c.doc.content.size&&(b=z.findFrom(c.doc.resolve(m.pos+1),1,!0))&&b.head==g.pos)&&n.someProp("handleKeyDown",v=>v(n,nn(13,"Enter"))))return void(n.input.lastIOSEnter=0);if(n.state.selection.anchor>p.start&&function _b(n,e,t,i,o){if(!i.parent.isTextblock||t-e<=o.pos-i.pos||Er(i,!0,!1)<o.pos)return!1;let s=n.resolve(e);if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let a=n.resolve(Er(s,!0,!0));return!(!a.parent.isTextblock||a.pos>t||Er(a,!0,!1)<t)&&i.parent.content.cut(i.parentOffset).eq(a.parent.content)}(d,p.start,p.endA,m,g)&&n.someProp("handleKeyDown",v=>v(n,nn(8,"Backspace"))))return void(Bt&&yt&&n.domObserver.suppressSelectionUpdates());yt&&Bt&&p.endB==p.start&&(n.input.lastAndroidDelete=Date.now()),Bt&&!x&&m.start()!=g.start()&&0==g.parentOffset&&m.depth==g.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,g=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{n.someProp("handleKeyDown",function(v){return v(n,nn(13,"Enter"))})},20));let y,w,S,C=p.start,k=p.endA;if(x)if(m.pos==g.pos)Mt&&Ae<=11&&0==m.parentOffset&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>le(n),20)),y=n.state.tr.delete(C,k),w=d.resolve(p.start).marksAcross(d.resolve(p.endA));else if(p.endA==p.endB&&(S=function gb(n,e){let a,l,c,t=n.firstChild.marks,i=e.firstChild.marks,o=t,s=i;for(let u=0;u<i.length;u++)o=i[u].removeFromSet(o);for(let u=0;u<t.length;u++)s=t[u].removeFromSet(s);if(1==o.length&&0==s.length)l=o[0],a="add",c=u=>u.mark(l.addToSet(u.marks));else{if(0!=o.length||1!=s.length)return null;l=s[0],a="remove",c=u=>u.mark(l.removeFromSet(u.marks))}let d=[];for(let u=0;u<e.childCount;u++)d.push(c(e.child(u)));if(M.from(d).eq(n))return{mark:l,type:a}}(m.parent.content.cut(m.parentOffset,g.parentOffset),_.parent.content.cut(_.parentOffset,p.endA-_.start()))))y=n.state.tr,"add"==S.type?y.addMark(C,k,S.mark):y.removeMark(C,k,S.mark);else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let v=m.parent.textBetween(m.parentOffset,g.parentOffset);if(n.someProp("handleTextInput",D=>D(n,C,k,v)))return;y=n.state.tr.insertText(v,C,k)}if(y||(y=n.state.tr.replace(C,k,c.doc.slice(p.start-c.from,p.endB-c.from))),c.sel){let v=ld(n,y.doc,c.sel);v&&!(yt&&Bt&&n.composing&&v.empty&&(p.start!=p.endB||n.input.lastAndroidDelete<Date.now()-100)&&(v.head==C||v.head==y.mapping.map(k)-1)||Mt&&v.empty&&v.head==C)&&y.setSelection(v)}w&&y.ensureMarks(w),n.dispatch(y.scrollIntoView())}(this,i,o,s,a)),this.domObserver.start(),function Bx(n){for(let e in Ct){let t=Ct[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=i=>{Ux(n,i)&&!wr(n,i)&&(n.editable||!(i.type in kt))&&t(n,i)},qx[e]?{passive:!0}:void 0)}vt&&n.dom.addEventListener("input",()=>null),kr(n)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&kr(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(fd),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let i in this._props)t[i]=this._props[i];t.state=this.state;for(let i in e)t[i]=e[i];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){let i=this.state,o=!1,s=!1;e.storedMarks&&this.composing&&(td(this),s=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(a||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let f=hd(this);(function vb(n,e){let t=0,i=0;for(let o in n){if(n[o]!=e[o])return!0;t++}for(let o in e)i++;return t!=i})(f,this.nodeViews)&&(this.nodeViews=f,o=!0)}(a||t.handleDOMEvents!=this._props.handleDOMEvents)&&kr(this),this.editable=ud(this),dd(this);let l=Or(this),c=cd(this),d=i.plugins==e.plugins||i.doc.eq(e.doc)?e.scrollToSelection>i.scrollToSelection?"to selection":"preserve":"reset",u=o||!this.docView.matchesNode(e.doc,c,l);(u||!e.selection.eq(i.selection))&&(s=!0);let h="preserve"==d&&s&&null==this.dom.style.overflowAnchor&&function sx(n){let i,o,e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top);for(let s=(e.left+e.right)/2,a=t+1;a<Math.min(innerHeight,e.bottom);a+=5){let l=n.root.elementFromPoint(s,a);if(!l||l==n.dom||!n.dom.contains(l))continue;let c=l.getBoundingClientRect();if(c.top>=t-20){i=l,o=c.top;break}}return{refDOM:i,refTop:o,stack:hc(n.dom)}}(this);if(s){this.domObserver.stop();let f=u&&(Mt||yt)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&function yb(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}(i.selection,e.selection);if(u){let p=yt?this.trackWrites=this.domSelectionRange().focusNode:null;(o||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=kc(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function Ox(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return en(e.node,e.offset,t.anchorNode,t.anchorOffset)}(this))?le(this,f):(Ic(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),"reset"==d?this.dom.scrollTop=0:"to selection"==d?this.scrollToSelection():h&&function rx({refDOM:n,refTop:e,stack:t}){let i=n?n.getBoundingClientRect().top:0;fc(t,0==i?0:i-e)}(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof N){let t=this.docView.domAfterPos(this.state.selection.from);1==t.nodeType&&uc(this,t.getBoundingClientRect(),e)}else uc(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let i=this.pluginViews[t];i.update&&i.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let i=this.directPlugins[t];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let i=this.state.plugins[t];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}}someProp(e,t){let o,i=this._props&&this._props[e];if(null!=i&&(o=t?t(i):i))return o;for(let a=0;a<this.directPlugins.length;a++){let l=this.directPlugins[a].props[e];if(null!=l&&(o=t?t(l):l))return o}let s=this.state.plugins;if(s)for(let a=0;a<s.length;a++){let l=s[a].props[e];if(null!=l&&(o=t?t(l):l))return o}}hasFocus(){if(Mt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function ax(n){if(n.setActive)return n.setActive();if(In)return n.focus(In);let e=hc(n);n.focus(null==In?{get preventScroll(){return In={preventScroll:!0},!0}}:void 0),In||(In=!1,fc(e,0))}(this.dom),le(this),this.domObserver.start()}get root(){let e=this._root;if(null==e)for(let t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t;return e||document}posAtCoords(e){return hx(this,e)}coordsAtPos(e,t=1){return gc(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,i=-1){let o=this.docView.posFromDOM(e,t,i);if(null==o)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,t){return function _x(n,e,t){return xc==e&&bc==t?yc:(xc=e,bc=t,yc="up"==t||"down"==t?function px(n,e,t){let i=e.selection,o="up"==t?i.$from:i.$to;return _c(n,e,()=>{let{node:s}=n.docView.domFromPos(o.pos,"up"==t?-1:1);for(;;){let l=n.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let a=gc(n,o.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let c;if(1==l.nodeType)c=l.getClientRects();else{if(3!=l.nodeType)continue;c=ae(l,0,l.nodeValue.length).getClientRects()}for(let d=0;d<c.length;d++){let u=c[d];if(u.bottom>u.top+1&&("up"==t?a.top-u.top>2*(u.bottom-a.top):u.bottom-a.bottom>2*(a.bottom-u.top)))return!1}}return!0})}(n,e,t):function gx(n,e,t){let{$head:i}=e.selection;if(!i.parent.isTextblock)return!1;let o=i.parentOffset,s=!o,a=o==i.parent.content.size,l=n.domSelection();return mx.test(i.parent.textContent)&&l.modify?_c(n,e,()=>{let{focusNode:c,focusOffset:d,anchorNode:u,anchorOffset:h}=n.domSelectionRange(),f=l.caretBidiLevel;l.modify("move",t,"character");let p=i.depth?n.docView.domAfterPos(i.before()):n.dom,{focusNode:m,focusOffset:g}=n.domSelectionRange(),_=m&&!p.contains(1==m.nodeType?m:m.parentNode)||c==m&&d==g;try{l.collapse(u,h),c&&(c!=u||d!=h)&&l.extend&&l.extend(c,d)}catch{}return null!=f&&(l.caretBidiLevel=f),_}):"left"==t||"backward"==t?s:a}(n,e,t))}(this,t||this.state,e)}pasteHTML(e,t){return vi(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return vi(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(function Vx(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Or(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(e){return function Hx(n,e){!wr(n,e)&&Ct[e.type]&&(n.editable||!(e.type in kt))&&Ct[e.type](n,e)}(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return vt&&11===this.root.nodeType&&function tx(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}(this.dom.ownerDocument)==this.dom?function hb(n){let e;function t(c){c.preventDefault(),c.stopImmediatePropagation(),e=c.getTargetRanges()[0]}n.dom.addEventListener("beforeinput",t,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",t,!0);let i=e.startContainer,o=e.startOffset,s=e.endContainer,a=e.endOffset,l=n.domAtPos(n.state.selection.anchor);return en(l.node,l.offset,s,a)&&([i,o,s,a]=[s,a,i,o]),{anchorNode:i,anchorOffset:o,focusNode:s,focusOffset:a}}(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function cd(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),e.translate="no",n.someProp("attributes",t=>{if("function"==typeof t&&(t=t(n.state)),t)for(let i in t)"class"==i&&(e.class+=" "+t[i]),"style"==i?e.style=(e.style?e.style+";":"")+t[i]:!e[i]&&"contenteditable"!=i&&"nodeName"!=i&&(e[i]=String(t[i]))}),[Zt.node(0,n.state.doc.content.size,e)]}function dd(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Zt.widget(n.state.selection.head,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function ud(n){return!n.someProp("editable",e=>!1===e(n.state))}function hd(n){let e=Object.create(null);function t(i){for(let o in i)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=i[o])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function fd(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}const Cb=["ol",0],kb=["ul",0],wb=["li",0],pd={attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:n=>({order:n.hasAttribute("start")?+n.getAttribute("start"):1})}],toDOM:n=>1==n.attrs.order?Cb:["ol",{start:n.attrs.order},0]};function Sb(n){return function(e,t){let{$from:i,$to:o,node:s}=e.selection;if(s&&s.isBlock||i.depth<2||!i.sameParent(o))return!1;let a=i.node(-1);if(a.type!=n)return!1;if(0==i.parent.content.size&&i.node(-1).childCount==i.indexAfter(-1)){if(3==i.depth||i.node(-3).type!=n||i.index(-2)!=i.node(-2).childCount-1)return!1;if(t){let u=M.empty,h=i.index(-1)?1:i.index(-2)?2:3;for(let _=i.depth-h;_>=i.depth-3;_--)u=M.from(i.node(_).copy(u));let f=i.indexAfter(-1)<i.node(-2).childCount?1:i.indexAfter(-2)<i.node(-3).childCount?2:3;u=u.append(M.from(n.createAndFill()));let p=i.before(i.depth-(h-1)),m=e.tr.replace(p,i.after(-f),new A(u,4-h,0)),g=-1;m.doc.nodesBetween(p,m.doc.content.size,(_,x)=>{if(g>-1)return!1;_.isTextblock&&0==_.content.size&&(g=x+1)}),g>-1&&m.setSelection(z.near(m.doc.resolve(g))),t(m.scrollIntoView())}return!0}let l=o.pos==i.end()?a.contentMatchAt(0).defaultType:null,c=e.tr.delete(i.pos,o.pos),d=l?[null,{type:l}]:void 0;return!!Sn(c.doc,i.pos,2,d)&&(t&&t(c.split(i.pos,2,d).scrollIntoView()),!0)}}function _d(n){return function(e,t){let{$from:i,$to:o}=e.selection,s=i.blockRange(o,a=>a.childCount>0&&a.firstChild.type==n);return!!s&&(!t||(i.node(s.depth-1).type==n?function Ab(n,e,t,i){let o=n.tr,s=i.end,a=i.$to.end(i.depth);s<a&&(o.step(new ct(s-1,a,s,a,new A(M.from(t.create(null,i.parent.copy())),1,0),1,!0)),i=new _o(o.doc.resolve(i.$from.pos),o.doc.resolve(a),i.depth));const l=hi(i);if(null==l)return!1;o.lift(i,l);let c=o.mapping.map(s,-1)-1;return Mo(o.doc,c)&&o.join(c),e(o.scrollIntoView()),!0}(e,t,n,s):function Db(n,e,t){let i=n.tr,o=t.parent;for(let p=t.end,m=t.endIndex-1,g=t.startIndex;m>g;m--)p-=o.child(m).nodeSize,i.delete(p-1,p+1);let s=i.doc.resolve(t.start),a=s.nodeAfter;if(i.mapping.map(t.end)!=t.start+s.nodeAfter.nodeSize)return!1;let l=0==t.startIndex,c=t.endIndex==o.childCount,d=s.node(-1),u=s.index(-1);if(!d.canReplace(u+(l?0:1),u+1,a.content.append(c?M.empty:M.from(o))))return!1;let h=s.pos,f=h+a.nodeSize;return i.step(new ct(h-(l?1:0),f+(c?1:0),h+1,f-1,new A((l?M.empty:M.from(o.copy(M.empty))).append(c?M.empty:M.from(o.copy(M.empty))),l?0:1,c?0:1),l?0:1)),e(i.scrollIntoView()),!0}(e,t,s)))}}function xd(n){return function(e,t){let{$from:i,$to:o}=e.selection,s=i.blockRange(o,d=>d.childCount>0&&d.firstChild.type==n);if(!s)return!1;let a=s.startIndex;if(0==a)return!1;let l=s.parent,c=l.child(a-1);if(c.type!=n)return!1;if(t){let d=c.lastChild&&c.lastChild.type==l.type,u=M.from(d?n.create():null),h=new A(M.from(n.create(null,M.from(l.type.create(null,u)))),d?3:1,0),f=s.start,p=s.end;t(e.tr.step(new ct(f-(d?3:1),p,f,p,h,1,!0)).scrollIntoView())}return!0}}const Ob={link:{attrs:{href:{},title:{default:null},target:{default:"_blank"}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:n=>({href:n.getAttribute("href"),title:n.getAttribute("title"),target:n.getAttribute("target")})}],toDOM(n){const{href:e,title:t,target:i}=n.attrs;return["a",{href:e,title:t,target:i},0]}},em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:()=>["em",0]},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:n=>"normal"!==n.style.fontWeight&&null},{style:"font-weight",getAttrs:n=>/^(?:bold(?:er)?|[5-9]\d{2,})$/.test(n)&&null}],toDOM:()=>["strong",0]},code:{parseDOM:[{tag:"code"}],toDOM:()=>["code",0]},u:{parseDOM:[{tag:"u"},{style:"text-decoration=underline",consuming:!1}],toDOM:()=>["u",0]},s:{parseDOM:[{tag:"s"},{tag:"strike"},{style:"text-decoration=line-through"}],toDOM:()=>["s",0]},text_color:{attrs:{color:{default:null}},parseDOM:[{style:"color",getAttrs:n=>({color:n})}],toDOM(n){const{color:e}=n.attrs;return["span",{style:`color:${e};`},0]}},text_background_color:{attrs:{backgroundColor:{default:null}},parseDOM:[{style:"background-color",getAttrs:n=>({backgroundColor:n})}],toDOM(n){const{backgroundColor:e}=n.attrs;return["span",{style:`background-color:${e};`},0]}}},Ib={content:"inline*",group:"block",attrs:{align:{default:null}},parseDOM:[{tag:"p",getAttrs(n){const{textAlign:e}=n.style;return{align:n.getAttribute("align")||e||null}}}],toDOM(n){const{align:e}=n.attrs;return["p",{style:_l({textAlign:"left"!==e?e:null})||null},0]}},Fb={attrs:{level:{default:1},align:{default:null}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs(n){const{textAlign:e}=n.style;return{level:1,align:n.getAttribute("align")||e||null}}},{tag:"h2",getAttrs(n){const{textAlign:e}=n.style;return{level:2,align:n.getAttribute("align")||e||null}}},{tag:"h3",getAttrs(n){const{textAlign:e}=n.style;return{level:3,align:n.getAttribute("align")||e||null}}},{tag:"h4",getAttrs(n){const{textAlign:e}=n.style;return{level:4,align:n.getAttribute("align")||e||null}}},{tag:"h5",getAttrs(n){const{textAlign:e}=n.style;return{level:5,align:n.getAttribute("align")||e||null}}},{tag:"h6",getAttrs(n){const{textAlign:e}=n.style;return{level:6,align:n.getAttribute("align")||e||null}}}],toDOM(n){const{level:e,align:t}=n.attrs;return[`h${e}`,{style:_l({textAlign:"left"!==t?t:null})||null},0]}},qb={inline:!0,attrs:{src:{},alt:{default:null},title:{default:null},width:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:n=>({src:n.getAttribute("src"),title:n.getAttribute("title"),alt:n.getAttribute("alt"),width:n.getAttribute("width")})}],toDOM(n){const{src:e,alt:t,title:i,width:o}=n.attrs;return["img",{src:e,alt:t,title:i,width:o}]}},Ub={doc:{content:"block+"},text:{group:"inline"},paragraph:Ib,blockquote:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",0]},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>["hr"]},heading:Fb,hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:()=>["pre",["code",0]]},image:qb,list_item:{...{parseDOM:[{tag:"li"}],toDOM:()=>wb,defining:!0},content:"paragraph block*"},ordered_list:{...pd,content:"list_item+",group:"block"},bullet_list:{...{parseDOM:[{tag:"ul"}],toDOM:()=>kb},content:"list_item+",group:"block"}},Ro=new class g0{constructor(e){this.cached=Object.create(null);let t=this.spec={};for(let o in e)t[o]=e[o];t.nodes=xl.from(e.nodes),t.marks=xl.from(e.marks||{}),this.nodes=bo.compile(this.spec.nodes,this),this.marks=yo.compile(this.spec.marks,this);let i=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let s=this.nodes[o],a=s.spec.content||"",l=s.spec.marks;s.contentMatch=i[a]||(i[a]=Xe.parse(a,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet="_"==l?null:l?Pl(this,l.split(" ")):""!=l&&s.inlineContent?null:[]}for(let o in this.marks){let s=this.marks[o],a=s.spec.excludes;s.excluded=null==a?[s]:""==a?[]:Pl(this,a.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,i,o){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof bo))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,i,o)}text(e,t){let i=this.nodes.text;return new xo(i,i.defaultAttrs,e,j.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Wt.fromJSON(this,e)}markFromJSON(e){return j.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}({marks:Ob,nodes:Ub}),bd=(n,e)=>!n.selection.empty&&(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function Ln(n,e,t=!1){for(let i=n;i;i="start"==e?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(t&&1!=i.childCount)return!1}return!1}function Ir(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function Pr(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const kd=(n,e)=>{let{$head:t,$anchor:i}=n.selection;return!(!t.parent.type.spec.code||!t.sameParent(i)||(e&&e(n.tr.insertText("\n").scrollIntoView()),0))};function Rr(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const wd=(n,e)=>{let{$head:t,$anchor:i}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(i))return!1;let o=t.node(-1),s=t.indexAfter(-1),a=Rr(o.contentMatchAt(s));if(!a||!o.canReplaceWith(s,s,a))return!1;if(e){let l=t.after(),c=n.tr.replaceWith(l,l,a.createAndFill());c.setSelection(z.near(c.doc.resolve(l),1)),e(c.scrollIntoView())}return!0},Md=(n,e)=>{let t=n.selection,{$from:i,$to:o}=t;if(t instanceof At||i.parent.inlineContent||o.parent.inlineContent)return!1;let s=Rr(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let a=(!i.parentOffset&&o.index()<o.parent.childCount?i:o).pos,l=n.tr.insert(a,s.createAndFill());l.setSelection(U.create(l.doc,a+1)),e(l.scrollIntoView())}return!0},Td=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let s=t.before();if(Sn(n.doc,s))return e&&e(n.tr.split(s).scrollIntoView()),!0}let i=t.blockRange(),o=i&&hi(i);return null!=o&&(e&&e(n.tr.lift(i,o).scrollIntoView()),!0)},Fr=function $b(n){return(e,t)=>{let{$from:i,$to:o}=e.selection;if(e.selection instanceof N&&e.selection.node.isBlock)return!(!i.parentOffset||!Sn(e.doc,i.pos)||(t&&t(e.tr.split(i.pos).scrollIntoView()),0));if(!i.parent.isBlock)return!1;if(t){let s=o.parentOffset==o.parent.content.size,a=e.tr;(e.selection instanceof U||e.selection instanceof At)&&a.deleteSelection();let l=0==i.depth?null:Rr(i.node(-1).contentMatchAt(i.indexAfter(-1))),c=n&&n(o.parent,s),d=c?[c]:s&&l?[{type:l}]:void 0,u=Sn(a.doc,a.mapping.map(i.pos),1,d);if(!d&&!u&&Sn(a.doc,a.mapping.map(i.pos),1,l?[{type:l}]:void 0)&&(l&&(d=[{type:l}]),u=!0),u&&(a.split(a.mapping.map(i.pos),1,d),!s&&!i.parentOffset&&i.parent.type!=l)){let h=a.mapping.map(i.before()),f=a.doc.resolve(h);l&&i.node(-1).canReplaceWith(f.index(),f.index()+1,l)&&a.setNodeMarkup(a.mapping.map(i.before()),l)}t(a.scrollIntoView())}return!0}}();function Sd(n,e,t){let s,a,i=e.nodeBefore,o=e.nodeAfter;if(i.type.spec.isolating||o.type.spec.isolating)return!1;if(function Kb(n,e,t){let i=e.nodeBefore,o=e.nodeAfter,s=e.index();return!(!(i&&o&&i.type.compatibleContent(o.type))||(!i.content.size&&e.parent.canReplace(s-1,s)?(t&&t(n.tr.delete(e.pos-i.nodeSize,e.pos).scrollIntoView()),0):!e.parent.canReplace(s,s+1)||!o.isTextblock&&!Mo(n.doc,e.pos)||(t&&t(n.tr.clearIncompatible(e.pos,i.type,i.contentMatchAt(i.childCount)).join(e.pos).scrollIntoView()),0)))}(n,e,t))return!0;let l=e.parent.canReplace(e.index(),e.index()+1);if(l&&(s=(a=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&a.matchType(s[0]||o.type).validEnd){if(t){let h=e.pos+o.nodeSize,f=M.empty;for(let g=s.length-1;g>=0;g--)f=M.from(s[g].create(null,f));f=M.from(i.copy(f));let p=n.tr.step(new ct(e.pos-1,h,e.pos,h,new A(f,1,0),s.length,!0)),m=h+2*s.length;Mo(p.doc,m)&&p.join(m),t(p.scrollIntoView())}return!0}let c=z.findFrom(e,1),d=c&&c.$from.blockRange(c.$to),u=d&&hi(d);if(null!=u&&u>=e.depth)return t&&t(n.tr.lift(d,u).scrollIntoView()),!0;if(l&&Ln(o,"start",!0)&&Ln(i,"end")){let h=i,f=[];for(;f.push(h),!h.isTextblock;)h=h.lastChild;let p=o,m=1;for(;!p.isTextblock;p=p.firstChild)m++;if(h.canReplace(h.childCount,h.childCount,p.content)){if(t){let g=M.empty;for(let x=f.length-1;x>=0;x--)g=M.from(f[x].copy(g));t(n.tr.step(new ct(e.pos-f.length,e.pos+o.nodeSize,e.pos+m,e.pos+o.nodeSize-m,new A(g,f.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function Ad(n){return function(e,t){let i=e.selection,o=n<0?i.$from:i.$to,s=o.depth;for(;o.node(s).isInline;){if(!s)return!1;s--}return!!o.node(s).isTextblock&&(t&&t(e.tr.setSelection(U.create(e.doc,n<0?o.start(s):o.end(s)))),!0)}}const Gb=Ad(-1),Xb=Ad(1);function Zr(n,e=null){return function(t,i){let o=!1;for(let s=0;s<t.selection.ranges.length&&!o;s++){let{$from:{pos:a},$to:{pos:l}}=t.selection.ranges[s];t.doc.nodesBetween(a,l,(c,d)=>{if(o)return!1;if(c.isTextblock&&!c.hasMarkup(n,e))if(c.type==n)o=!0;else{let u=t.doc.resolve(d),h=u.index();o=u.parent.canReplaceWith(h,h+1,n)}})}if(!o)return!1;if(i){let s=t.tr;for(let a=0;a<t.selection.ranges.length;a++){let{$from:{pos:l},$to:{pos:c}}=t.selection.ranges[a];s.setBlockType(l,c,n,e)}i(s.scrollIntoView())}return!0}}function qn(n,e=null){return function(t,i){let{empty:o,$cursor:s,ranges:a}=t.selection;if(o&&!s||!function e1(n,e,t){for(let i=0;i<e.length;i++){let{$from:o,$to:s}=e[i],a=0==o.depth&&n.inlineContent&&n.type.allowsMarkType(t);if(n.nodesBetween(o.pos,s.pos,l=>{if(a)return!1;a=l.inlineContent&&l.type.allowsMarkType(t)}),a)return!0}return!1}(t.doc,a,n))return!1;if(i)if(s)n.isInSet(t.storedMarks||s.marks())?i(t.tr.removeStoredMark(n)):i(t.tr.addStoredMark(n.create(e)));else{let l=!1,c=t.tr;for(let d=0;!l&&d<a.length;d++){let{$from:u,$to:h}=a[d];l=t.doc.rangeHasMark(u.pos,h.pos,n)}for(let d=0;d<a.length;d++){let{$from:u,$to:h}=a[d];if(l)c.removeMark(u.pos,h.pos,n);else{let f=u.pos,p=h.pos,m=u.nodeAfter,g=h.nodeBefore,_=m&&m.isText?/^\s*/.exec(m.text)[0].length:0,x=g&&g.isText?/\s*$/.exec(g.text)[0].length:0;f+_<p&&(f+=_,p-=x),c.addMark(f,p,n.create(e))}}i(c.scrollIntoView())}return!0}}function ki(...n){return function(e,t,i){for(let o=0;o<n.length;o++)if(n[o](e,t,i))return!0;return!1}}let Lr=ki(bd,(n,e,t)=>{let i=function yd(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}(n,t);if(!i)return!1;let o=Ir(i);if(!o){let a=i.blockRange(),l=a&&hi(a);return null!=l&&(e&&e(n.tr.lift(a,l).scrollIntoView()),!0)}let s=o.nodeBefore;if(!s.type.spec.isolating&&Sd(n,o,e))return!0;if(0==i.parent.content.size&&(Ln(s,"end")||N.isSelectable(s))){let a=tr(n.doc,i.before(),i.after(),A.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=n.tr.step(a);l.setSelection(Ln(s,"end")?z.findFrom(l.doc.resolve(l.mapping.map(o.pos,-1)),-1):N.create(l.doc,o.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}}return!(!s.isAtom||o.depth!=i.depth-1||(e&&e(n.tr.delete(o.pos-s.nodeSize,o.pos).scrollIntoView()),0))},(n,e,t)=>{let{$head:i,empty:o}=n.selection,s=i;if(!o)return!1;if(i.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):i.parentOffset>0)return!1;s=Ir(i)}let a=s&&s.nodeBefore;return!(!a||!N.isSelectable(a)||(e&&e(n.tr.setSelection(N.create(n.doc,s.pos-a.nodeSize)).scrollIntoView()),0))}),Dd=ki(bd,(n,e,t)=>{let i=function Cd(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}(n,t);if(!i)return!1;let o=Pr(i);if(!o)return!1;let s=o.nodeAfter;if(Sd(n,o,e))return!0;if(0==i.parent.content.size&&(Ln(s,"start")||N.isSelectable(s))){let a=tr(n.doc,i.before(),i.after(),A.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=n.tr.step(a);l.setSelection(Ln(s,"start")?z.findFrom(l.doc.resolve(l.mapping.map(o.pos)),1):N.create(l.doc,l.mapping.map(o.pos))),e(l.scrollIntoView())}return!0}}return!(!s.isAtom||o.depth!=i.depth-1||(e&&e(n.tr.delete(o.pos,o.pos+s.nodeSize).scrollIntoView()),0))},(n,e,t)=>{let{$head:i,empty:o}=n.selection,s=i;if(!o)return!1;if(i.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):i.parentOffset<i.parent.content.size)return!1;s=Pr(i)}let a=s&&s.nodeAfter;return!(!a||!N.isSelectable(a)||(e&&e(n.tr.setSelection(N.create(n.doc,s.pos)).scrollIntoView()),0))});const ce={Enter:ki(kd,Md,Td,Fr),"Mod-Enter":wd,Backspace:Lr,"Mod-Backspace":Lr,"Shift-Backspace":Lr,Delete:Dd,"Mod-Delete":Dd,"Mod-a":(n,e)=>(e&&e(n.tr.setSelection(new At(n.doc))),!0)},Od={"Ctrl-h":ce.Backspace,"Alt-Backspace":ce["Mod-Backspace"],"Ctrl-d":ce.Delete,"Ctrl-Alt-Backspace":ce["Mod-Delete"],"Alt-Delete":ce["Mod-Delete"],"Alt-d":ce["Mod-Delete"],"Ctrl-a":Gb,"Ctrl-e":Xb};for(let n in ce)Od[n]=ce[n];const i1=(typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&"darwin"==os.platform())?Od:ce;class de{constructor(e,t){this.match=e,this.match=e,this.handler="string"==typeof t?function o1(n){return function(e,t,i,o){let s=n;if(t[1]){let a=t[0].lastIndexOf(t[1]);s+=t[0].slice(a+t[1].length);let l=(i+=a)-o;l>0&&(s=t[0].slice(a-l,a)+s,i=o)}return e.tr.insertText(s,i,o)}}(t):t}}function Ed(n,e,t,i,o,s){if(n.composing)return!1;let a=n.state,l=a.doc.resolve(e);if(l.parent.type.spec.code)return!1;let c=l.parent.textBetween(Math.max(0,l.parentOffset-500),l.parentOffset,null,"\ufffc")+i;for(let d=0;d<o.length;d++){let u=o[d].match.exec(c),h=u&&o[d].handler(a,u,e-(u[0].length-i.length),t);if(h)return n.dispatch(h.setMeta(s,{transform:h,from:e,to:t,text:i})),!0}return!1}const a1=new de(/--$/,"\u2014"),l1=new de(/\.\.\.$/,"\u2026"),f1=[new de(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"\u201c"),new de(/"$/,"\u201d"),new de(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"\u2018"),new de(/'$/,"\u2019")];function qr(n,e,t=null,i){return new de(n,(o,s,a,l)=>{let c=t instanceof Function?t(s):t,d=o.tr.delete(a,l),h=d.doc.resolve(a).blockRange(),f=h&&Xs(h,e,c);if(!f)return null;d.wrap(h,f);let p=d.doc.resolve(a-1).nodeBefore;return p&&p.type==e&&Mo(d.doc,a-1)&&(!i||i(s,p))&&d.join(a-1),d})}function Nd(n,e,t=null){return new de(n,(i,o,s,a)=>{let l=i.doc.resolve(s),c=t instanceof Function?t(o):t;return l.node(-1).canReplaceWith(l.index(-1),l.indexAfter(-1),e)?i.tr.delete(s,a).setBlockType(s,s,e,c):null})}const zr=(n,e)=>{const{from:t,$from:i,to:o,empty:s}=n.selection;return s?!!e.isInSet(n.storedMarks||i.marks()):n.doc.rangeHasMark(t,o,e)},Id=(n,e,t={})=>{const{selection:i}=n,{$from:o,to:s}=i,a=((n,e)=>{for(let t=e.depth;t>0;t-=1)if(e.node(t).type===n)return e.node(t).type;return null})(e,o);return Object.entries(t).length&&a?s<=o.end()&&o.parent.hasMarkup(e,t):!!a},Pd=n=>{const e=[],{selection:{from:t,to:i}}=n;return n.doc.nodesBetween(t,i,o=>{e.push(o)}),e},Rd=(n,e,t)=>{for(const i of e){const{$from:o,$to:s}=i;let a=0===o.depth&&n.type.allowsMarkType(t);if(n.nodesBetween(o.pos,s.pos,l=>!a&&(a=l.inlineContent&&l.type.allowsMarkType(t),!0)),a)return!0}return!1},Fd=(n,e,t)=>new de(n,(i,o,s,a)=>{const{tr:l}=i,c=s;let d=a;if(o[2]){const u=s+o[0].indexOf(o[2]),h=u+o[2].length;h<a&&l.delete(h,a),u>s&&l.delete(s,u),d=s+o[2].length}return l.addMark(c,d,e.create(t))}),Zd=(n,e={})=>(t,i)=>{const{tr:o,selection:s}=t,{empty:a,ranges:l,$from:c,$to:d}=s;if(a&&s instanceof U){const{$cursor:u}=s;if(!u||!Rd(t.doc,l,n)||(o.addStoredMark(n.create(e)),!o.storedMarksSet))return!1;i?.(o)}else{if(o.addMark(c.pos,d.pos,n.create(e)),!o.docChanged)return!1;i?.(o.scrollIntoView())}return!0};for(var b1=Z(6550),Pe={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Fo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},y1=typeof navigator<"u"&&/Mac/.test(navigator.platform),v1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),dt=0;dt<10;dt++)Pe[48+dt]=Pe[96+dt]=String(dt);for(dt=1;dt<=24;dt++)Pe[dt+111]="F"+dt;for(dt=65;dt<=90;dt++)Pe[dt]=String.fromCharCode(dt+32),Fo[dt]=String.fromCharCode(dt);for(var Br in Pe)Fo.hasOwnProperty(Br)||(Fo[Br]=Pe[Br]);const k1=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function w1(n){let i,o,s,a,e=n.split(/-(?!$)/),t=e[e.length-1];"Space"==t&&(t=" ");for(let l=0;l<e.length-1;l++){let c=e[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))o=!0;else if(/^s(hift)?$/i.test(c))s=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);k1?a=!0:o=!0}}return i&&(t="Alt-"+t),o&&(t="Ctrl-"+t),a&&(t="Meta-"+t),s&&(t="Shift-"+t),t}function Vr(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),!1!==t&&e.shiftKey&&(n="Shift-"+n),n}function Zo(n){return new Kt({props:{handleKeyDown:T1(n)}})}function T1(n){let e=function M1(n){let e=Object.create(null);for(let t in n)e[w1(t)]=n[t];return e}(n);return function(t,i){let a,o=function C1(n){var t=!(y1&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||v1&&n.shiftKey&&n.key&&1==n.key.length||"Unidentified"==n.key)&&n.key||(n.shiftKey?Fo:Pe)[n.keyCode]||n.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(i),s=1==o.length&&" "!=o,l=e[Vr(o,i,!s)];if(l&&l(t.state,t.dispatch,t))return!0;if(s&&(i.shiftKey||i.altKey||i.metaKey||o.charCodeAt(0)>127)&&(a=Pe[i.keyCode])&&a!=o){let c=e[Vr(a,i,!0)];if(c&&c(t.state,t.dispatch,t))return!0}else if(s&&i.shiftKey){let c=e[Vr(o,i,!0)];if(c&&c(t.state,t.dispatch,t))return!0}return!1}}var ut=function(){};ut.prototype.append=function(e){return e.length?(e=ut.from(e),!this.length&&e||e.length<200&&this.leafAppend(e)||this.length<200&&e.leafPrepend(this)||this.appendInner(e)):this},ut.prototype.prepend=function(e){return e.length?ut.from(e).append(this):this},ut.prototype.appendInner=function(e){return new S1(this,e)},ut.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?ut.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},ut.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},ut.prototype.forEach=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=this.length),t<=i?this.forEachInner(e,t,i,0):this.forEachInvertedInner(e,t,i,0)},ut.prototype.map=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=this.length);var o=[];return this.forEach(function(s,a){return o.push(e(s,a))},t,i),o},ut.from=function(e){return e instanceof ut?e:e&&e.length?new Ld(e):ut.empty};var Ld=function(n){function e(i){n.call(this),this.values=i}n&&(e.__proto__=n),(e.prototype=Object.create(n&&n.prototype)).constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,s){return 0==o&&s==this.length?this:new e(this.values.slice(o,s))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,s,a,l){for(var c=s;c<a;c++)if(!1===o(this.values[c],l+c))return!1},e.prototype.forEachInvertedInner=function(o,s,a,l){for(var c=s-1;c>=a;c--)if(!1===o(this.values[c],l+c))return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=200)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=200)return new e(o.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(ut);ut.empty=new Ld([]);var S1=function(n){function e(t,i){n.call(this),this.left=t,this.right=i,this.length=t.length+i.length,this.depth=Math.max(t.depth,i.depth)+1}return n&&(e.__proto__=n),(e.prototype=Object.create(n&&n.prototype)).constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},e.prototype.forEachInner=function(i,o,s,a){var l=this.left.length;if(o<l&&!1===this.left.forEachInner(i,o,Math.min(s,l),a)||s>l&&!1===this.right.forEachInner(i,Math.max(o-l,0),Math.min(this.length,s)-l,a+l))return!1},e.prototype.forEachInvertedInner=function(i,o,s,a){var l=this.left.length;if(o>l&&!1===this.right.forEachInvertedInner(i,o-l,Math.max(s,l)-l,a+l)||s<l&&!1===this.left.forEachInvertedInner(i,Math.min(o,l),s,a))return!1},e.prototype.sliceInner=function(i,o){if(0==i&&o==this.length)return this;var s=this.left.length;return o<=s?this.left.slice(i,o):i>=s?this.right.slice(i-s,o-s):this.left.slice(i,s).append(this.right.slice(0,o-s))},e.prototype.leafAppend=function(i){var o=this.right.leafAppend(i);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(i){var o=this.left.leafPrepend(i);if(o)return new e(o,this.right)},e.prototype.appendInner=function(i){return this.left.depth>=Math.max(this.right.depth,i.depth)+1?new e(this.left,new e(this.right,i)):new e(this,i)},e}(ut);const qd=ut;class Ut{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(0==this.eventCount)return null;let o,s,i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}t&&(o=this.remapping(i,this.items.length),s=o.maps.length);let l,c,a=e.tr,d=[],u=[];return this.items.forEach((h,f)=>{if(!h.step)return o||(o=this.remapping(i,f+1),s=o.maps.length),s--,void u.push(h);if(o){u.push(new te(h.map));let m,p=h.step.map(o.slice(s));p&&a.maybeStep(p).doc&&(m=a.mapping.maps[a.mapping.maps.length-1],d.push(new te(m,void 0,void 0,d.length+u.length))),s--,m&&o.appendMap(m,s)}else a.maybeStep(h.step);return h.selection?(l=o?h.selection.map(o.slice(s)):h.selection,c=new Ut(this.items.slice(0,i).append(u.reverse().concat(d)),this.eventCount-1),!1):void 0},this.items.length,0),{remaining:c,transform:a,selection:l}}addTransform(e,t,i,o){let s=[],a=this.eventCount,l=this.items,c=!o&&l.length?l.get(l.length-1):null;for(let u=0;u<e.steps.length;u++){let p,h=e.steps[u].invert(e.docs[u]),f=new te(e.mapping.maps[u],h,t);(p=c&&c.merge(f))&&(f=p,u?s.pop():l=l.slice(0,l.length-1)),s.push(f),t&&(a++,t=void 0),o||(c=f)}let d=a-i.depth;return d>O1&&(l=function D1(n,e){let t;return n.forEach((i,o)=>{if(i.selection&&0==e--)return t=o,!1}),n.slice(t)}(l,d),a-=d),new Ut(l.append(s),a)}remapping(e,t){let i=new Mn;return this.items.forEach((o,s)=>{i.appendMap(o.map,null!=o.mirrorOffset&&s-o.mirrorOffset>=e?i.maps.length-o.mirrorOffset:void 0)},e,t),i}addMaps(e){return 0==this.eventCount?this:new Ut(this.items.append(e.map(t=>new te(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let i=[],o=Math.max(0,this.items.length-t),s=e.mapping,a=e.steps.length,l=this.eventCount;this.items.forEach(f=>{f.selection&&l--},o);let c=t;this.items.forEach(f=>{let p=s.getMirror(--c);if(null==p)return;a=Math.min(a,p);let m=s.maps[p];if(f.step){let g=e.steps[p].invert(e.docs[p]),_=f.selection&&f.selection.map(s.slice(c+1,p));_&&l++,i.push(new te(m,g,_))}else i.push(new te(m))},o);let d=[];for(let f=t;f<a;f++)d.push(new te(s.maps[f]));let u=this.items.slice(0,o).append(d).append(i),h=new Ut(u,l);return h.emptyItemCount()>500&&(h=h.compress(this.items.length-i.length)),h}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),i=t.maps.length,o=[],s=0;return this.items.forEach((a,l)=>{if(l>=e)o.push(a),a.selection&&s++;else if(a.step){let c=a.step.map(t.slice(i)),d=c&&c.getMap();if(i--,d&&t.appendMap(d,i),c){let u=a.selection&&a.selection.map(t.slice(i));u&&s++;let f,h=new te(d.invert(),c,u),p=o.length-1;(f=o.length&&o[p].merge(h))?o[p]=f:o.push(h)}}else a.map&&i--},this.items.length,0),new Ut(qd.from(o.reverse()),s)}}Ut.empty=new Ut(qd.empty,0);class te{constructor(e,t,i,o){this.map=e,this.step=t,this.selection=i,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new te(t.getMap().invert(),t,this.selection)}}}class Re{constructor(e,t,i,o){this.done=e,this.undone=t,this.prevRanges=i,this.prevTime=o}}const O1=20;function zd(n){let e=[];return n.forEach((t,i,o,s)=>e.push(o,s)),e}function Ur(n,e){if(!n)return null;let t=[];for(let i=0;i<n.length;i+=2){let o=e.map(n[i],1),s=e.map(n[i+1],-1);o<=s&&t.push(o,s)}return t}function Bd(n,e,t,i){let o=qo(e),s=ee.get(e).spec.config,a=(i?n.undone:n.done).popEvent(e,o);if(!a)return;let l=a.selection.resolve(a.transform.doc),c=(i?n.done:n.undone).addTransform(a.transform,e.selection.getBookmark(),s,o),d=new Re(i?c:a.remaining,i?a.remaining:c,null,0);t(a.transform.setSelection(l).setMeta(ee,{redo:i,historyState:d}).scrollIntoView())}let Hr=!1,Vd=null;function qo(n){let e=n.plugins;if(Vd!=e){Hr=!1,Vd=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Hr=!0;break}}return Hr}const ee=new re("history"),Ud=new re("closeHistory");const Hd=(n,e)=>{let t=ee.getState(n);return!(!t||0==t.done.eventCount||(e&&Bd(t,n,e,!1),0))},jr=(n,e)=>{let t=ee.getState(n);return!(!t||0==t.undone.eventCount||(e&&Bd(t,n,e,!0),0))},P1=["imgEl"];function R1(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"span",4)(1,"span",5),r.NdJ("mousedown",function(o){r.CHM(t);const s=r.oxw();return r.KtG(s.startResizing(o,"left"))}),r.qZA(),r.TgZ(2,"span",6),r.NdJ("mousedown",function(o){r.CHM(t);const s=r.oxw();return r.KtG(s.startResizing(o,"right"))}),r.qZA(),r.TgZ(3,"span",7),r.NdJ("mousedown",function(o){r.CHM(t);const s=r.oxw();return r.KtG(s.startResizing(o,"left"))}),r.qZA(),r.TgZ(4,"span",8),r.NdJ("mousedown",function(o){r.CHM(t);const s=r.oxw();return r.KtG(s.startResizing(o,"right"))}),r.qZA()()}}const F1=function(n){return{"NgxEditor__Resizer--Active":n}},Z1=["ngxEditor"],L1=["*"];function q1(n,e){if(1&n&&(r.TgZ(0,"div",12),r._uU(1),r.qZA()),2&n){const t=r.oxw(2);r.xp6(1),r.hij(" ",(null==t.href.errors?null:t.href.errors.pattern)&&"Please enter valid url."," ")}}function z1(n,e){if(1&n&&(r.TgZ(0,"div",12),r._uU(1),r.qZA()),2&n){const t=r.oxw(2);r.xp6(1),r.hij(" ",(null==t.text.errors?null:t.text.errors.required)&&"This is required"," ")}}function B1(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"div",2)(1,"form",3),r.NdJ("ngSubmit",function(o){r.CHM(t);const s=r.oxw();return r.KtG(s.insertLink(o))}),r.TgZ(2,"div",4)(3,"div",5)(4,"label",6),r._uU(5),r.qZA(),r._UZ(6,"input",7),r.YNc(7,q1,2,1,"div",8),r.qZA()(),r.TgZ(8,"div",4)(9,"div",5)(10,"label",6),r._uU(11),r.qZA(),r._UZ(12,"input",9),r.YNc(13,z1,2,1,"div",8),r.qZA()(),r.TgZ(14,"div",4)(15,"div",5)(16,"label"),r._UZ(17,"input",10),r._uU(18),r.qZA()()(),r.TgZ(19,"button",11),r._uU(20),r.qZA()()()}if(2&n){const t=r.oxw();r.xp6(1),r.Q6J("formGroup",t.form),r.xp6(4),r.Oqu(t.getLabel("url")),r.xp6(2),r.Q6J("ngIf",t.href.touched&&t.href.invalid),r.xp6(4),r.Oqu(t.getLabel("text")),r.xp6(2),r.Q6J("ngIf",t.text.touched&&t.text.invalid),r.xp6(5),r.hij(" ",t.getLabel("openInNewTab")," "),r.xp6(1),r.Q6J("disabled",!t.form.valid),r.xp6(1),r.Oqu(t.getLabel("insert"))}}const V1=function(n,e){return{"NgxEditor__Dropdown--Active":n,"NgxEditor--Disabled":e}};function U1(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"div",4),r.NdJ("mousedown",function(o){const a=r.CHM(t).$implicit,l=r.oxw(2);return r.KtG(l.onClick(o,a))}),r._uU(1),r.qZA()}if(2&n){const t=e.$implicit,i=r.oxw(2);r.Q6J("ngClass",r.WLB(2,V1,t===i.activeItem,i.disabledItems.includes(t))),r.xp6(1),r.hij(" ",i.getName(t)," ")}}function H1(n,e){if(1&n&&(r.TgZ(0,"div",2),r.YNc(1,U1,2,5,"div",3),r.qZA()),2&n){const t=r.oxw();r.xp6(1),r.Q6J("ngForOf",t.items)("ngForTrackBy",t.trackByIndex)}}function j1(n,e){if(1&n&&(r.TgZ(0,"div",12),r._uU(1),r.qZA()),2&n){const t=r.oxw(2);r.xp6(1),r.hij(" ",(null==t.src.errors?null:t.src.errors.pattern)&&"Please enter valid url."," ")}}function J1(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"div",2)(1,"form",3),r.NdJ("ngSubmit",function(o){r.CHM(t);const s=r.oxw();return r.KtG(s.insertLink(o))}),r.TgZ(2,"div",4)(3,"div",5)(4,"label",6),r._uU(5),r.qZA(),r._UZ(6,"input",7),r.YNc(7,j1,2,1,"div",8),r.qZA()(),r.TgZ(8,"div",4)(9,"div",5)(10,"label",6),r._uU(11),r.qZA(),r._UZ(12,"input",9),r.qZA()(),r.TgZ(13,"div",4)(14,"div",5)(15,"label",6),r._uU(16),r.qZA(),r._UZ(17,"input",10),r.qZA()(),r.TgZ(18,"button",11),r._uU(19),r.qZA()()()}if(2&n){const t=r.oxw();r.xp6(1),r.Q6J("formGroup",t.form),r.xp6(4),r.Oqu(t.getLabel("url")),r.xp6(2),r.Q6J("ngIf",t.src.touched&&t.src.invalid),r.xp6(4),r.Oqu(t.getLabel("altText")),r.xp6(5),r.Oqu(t.getLabel("title")),r.xp6(2),r.Q6J("disabled",!t.form.valid||!t.form.dirty),r.xp6(1),r.Oqu(t.getLabel("insert"))}}const Y1=function(n,e){return{backgroundColor:n,color:e}},W1=function(n){return{"NgxEditor__Color--Active":n}};function $1(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"button",7),r.NdJ("mousedown",function(o){const a=r.CHM(t).$implicit,l=r.oxw(3);return r.KtG(l.onColorSelect(o,a))}),r.qZA()}if(2&n){const t=e.$implicit,i=r.oxw(3);r.Q6J("ngStyle",r.WLB(3,Y1,t,i.getContrastYIQ(t)))("title",t)("ngClass",r.VKq(6,W1,i.activeColors.includes(t)))}}function Q1(n,e){if(1&n&&(r.TgZ(0,"div",5),r.YNc(1,$1,1,8,"button",6),r.qZA()),2&n){const t=e.$implicit,i=r.oxw(2);r.xp6(1),r.Q6J("ngForOf",t)("ngForTrackBy",i.trackByIndex)}}function K1(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"div",2),r.YNc(1,Q1,2,2,"div",3),r.TgZ(2,"button",4),r.NdJ("mousedown",function(o){r.CHM(t);const s=r.oxw();return r.KtG(s.remove(o))}),r._uU(3),r.qZA()()}if(2&n){const t=r.oxw();r.xp6(1),r.Q6J("ngForOf",t.presets)("ngForTrackBy",t.trackByIndex),r.xp6(1),r.Q6J("disabled",!t.isActive),r.xp6(1),r.hij(" ",t.getLabel("remove")," ")}}function G1(n,e){if(1&n&&r._UZ(0,"ngx-toggle-command",7),2&n){const t=r.oxw().$implicit,i=r.oxw(2);r.Tol(i.iconContainerClass),r.Q6J("toolbarItem",t)}}function X1(n,e){if(1&n&&r._UZ(0,"ngx-insert-command",7),2&n){const t=r.oxw().$implicit,i=r.oxw(2);r.Tol(i.iconContainerClass),r.Q6J("toolbarItem",t)}}function ty(n,e){if(1&n&&r._UZ(0,"ngx-link"),2&n){const t=r.oxw(3);r.Tol(t.iconContainerClass)}}function ey(n,e){if(1&n&&r._UZ(0,"ngx-image"),2&n){const t=r.oxw(3);r.Tol(t.iconContainerClass)}}function ny(n,e){if(1&n&&r._UZ(0,"ngx-dropdown",9),2&n){const t=e.$implicit,i=r.oxw(4);r.Tol(i.dropdownContainerClass),r.Q6J("group",t.key)("items",t.value)}}function iy(n,e){if(1&n&&(r.ynx(0),r.YNc(1,ny,1,4,"ngx-dropdown",8),r.ALo(2,"keyvalue"),r.BQk()),2&n){const t=r.oxw().$implicit,i=r.oxw(2);r.xp6(1),r.Q6J("ngForOf",r.lcZ(2,2,i.getDropdownItems(t)))("ngForTrackBy",i.trackByIndex)}}function oy(n,e){if(1&n&&r._UZ(0,"ngx-color-picker",10),2&n){const t=r.oxw(3);r.Tol(t.iconContainerClass),r.Q6J("presets",t.presets)}}function sy(n,e){if(1&n&&r._UZ(0,"ngx-color-picker",11),2&n){const t=r.oxw(3);r.Tol(t.iconContainerClass),r.Q6J("presets",t.presets)}}function ry(n,e){if(1&n&&r._UZ(0,"div"),2&n){const t=r.oxw(3);r.Tol(t.seperatorClass)}}function ay(n,e){if(1&n&&(r.ynx(0),r.YNc(1,G1,1,3,"ngx-toggle-command",3),r.YNc(2,X1,1,3,"ngx-insert-command",3),r.YNc(3,ty,1,2,"ngx-link",4),r.YNc(4,ey,1,2,"ngx-image",4),r.YNc(5,iy,3,4,"ng-container",2),r.YNc(6,oy,1,3,"ngx-color-picker",5),r.YNc(7,sy,1,3,"ngx-color-picker",6),r.YNc(8,ry,1,2,"div",4),r.BQk()),2&n){const t=e.$implicit,i=e.last,o=r.oxw().last,s=r.oxw();r.xp6(1),r.Q6J("ngIf",s.toggleCommands.includes(t)),r.xp6(1),r.Q6J("ngIf",s.insertCommands.includes(t)),r.xp6(1),r.Q6J("ngIf","link"===t),r.xp6(1),r.Q6J("ngIf","image"===t),r.xp6(1),r.Q6J("ngIf",s.isDropDown(t)),r.xp6(1),r.Q6J("ngIf","text_color"===t),r.xp6(1),r.Q6J("ngIf","background_color"===t),r.xp6(1),r.Q6J("ngIf",i&&!o)}}function ly(n,e){if(1&n&&(r.ynx(0),r.YNc(1,ay,9,8,"ng-container",1),r.BQk()),2&n){const t=e.$implicit,i=r.oxw();r.xp6(1),r.Q6J("ngForOf",t)("ngForTrackBy",i.trackByIndex)}}function cy(n,e){if(1&n&&(r.ynx(0),r.GkF(1,12),r.BQk()),2&n){const t=r.oxw();r.xp6(1),r.Q6J("ngTemplateOutlet",t.customMenuRef)}}const dy=function(n,e){return{"NgxEditor--Disabled":n,"NgxEditor__MenuBar--Reverse":e}},my=(n=!0)=>new Kt({key:new re("editable"),state:{init:()=>n,apply:(e,t)=>e.getMeta("UPDATE_EDITABLE")??t},props:{editable(e){return this.getState(e)},attributes(e){return this.getState(e)?null:{class:"NgxEditor__Content--Disabled"}}}}),_y=n=>new Kt({key:new re("placeholder"),state:{init:()=>n??"",apply:(e,t)=>e.getMeta("UPDATE_PLACEHOLDER")??t},props:{decorations(e){const{doc:t}=e,{textContent:i,childCount:o}=t,s=this.getState(e);if(!s||o>1)return ot.empty;const a=[];return t.descendants((c,d)=>{if(c.type.isBlock&&0===c.childCount&&0===i.length){const f=Zt.node(d,d+c.nodeSize,{class:"NgxEditor__Placeholder","data-placeholder":s,"data-align":c.attrs.align??null});a.push(f)}return!1}),ot.create(t,a)}}});let vy=(()=>{class n{constructor(){this.alt="",this.title="",this.outerWidth="",this.selected=!1,this.imageResize=new r.vpe}startResizing(t,i){t.preventDefault(),this.resizeImage(t,i)}resizeImage(t,i){const o=t.pageX,s=this.imgEl.nativeElement.clientWidth,a="left"===i,{width:l}=window.getComputedStyle(this.view.dom),c=parseInt(l,10),d=h=>{const p=h.pageX-o,m=a?s-p:s+p;m>c||m<20||(this.outerWidth=`${m}px`)},u=h=>{h.preventDefault(),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u),this.imageResize.emit()};document.addEventListener("mousemove",d),document.addEventListener("mouseup",u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=r.Xpm({type:n,selectors:[["ngx-image-view"]],viewQuery:function(t,i){if(1&t&&r.Gf(P1,7),2&t){let o;r.iGM(o=r.CRH())&&(i.imgEl=o.first)}},inputs:{src:"src",alt:"alt",title:"title",outerWidth:"outerWidth",selected:"selected",view:"view"},outputs:{imageResize:"imageResize"},decls:4,vars:9,consts:[[1,"NgxEditor__ImageWrapper",3,"ngClass"],["class","NgxEditor__ResizeHandle",4,"ngIf"],[3,"src","alt","title"],["imgEl",""],[1,"NgxEditor__ResizeHandle"],[1,"NgxEditor__ResizeHandle--TL",3,"mousedown"],[1,"NgxEditor__ResizeHandle--TR",3,"mousedown"],[1,"NgxEditor__ResizeHandle--BL",3,"mousedown"],[1,"NgxEditor__ResizeHandle--BR",3,"mousedown"]],template:function(t,i){1&t&&(r.TgZ(0,"span",0),r.YNc(1,R1,5,0,"span",1),r._UZ(2,"img",2,3),r.qZA()),2&t&&(r.Udp("width",i.outerWidth),r.Q6J("ngClass",r.VKq(7,F1,i.selected)),r.xp6(1),r.Q6J("ngIf",i.selected),r.xp6(1),r.Q6J("src",i.src,r.LSH)("alt",i.alt)("title",i.title))},dependencies:[O.mk,O.O5],styles:["*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}img[_ngcontent-%COMP%]{width:100%;height:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;line-height:0;padding:2px}.NgxEditor__ImageWrapper.NgxEditor__Resizer--Active[_ngcontent-%COMP%]{padding:1px;border:1px solid #1a73e8}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{position:absolute;width:7px;height:7px;background-color:#1a73e8;border:1px solid white}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{bottom:-5px;right:-5px;cursor:se-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%]{top:-5px;right:-5px;cursor:ne-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%]{top:-5px;left:-5px;cursor:nw-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%]{bottom:-5px;left:-5px;cursor:sw-resize}"]}),n})();class Cy{constructor(e,t,i,o){this.updating=!1,this.handleResize=()=>{if(this.updating)return;const{state:s,dispatch:a}=this.view,{tr:l}=s,c=l.setNodeMarkup(this.getPos(),void 0,{...this.node.attrs,width:this.imageComponentRef.instance.outerWidth}),d=c.doc.resolve(this.getPos()),u=new N(d);c.setSelection(u),a(c)},this.applicationRef=o.get(r.z2F),this.imageComponentRef=(0,r.LMc)(vy,{environmentInjector:this.applicationRef.injector}),this.applicationRef.attachView(this.imageComponentRef.hostView),this.setNodeAttributes(e.attrs),this.imageComponentRef.instance.view=t,this.dom=this.imageComponentRef.location.nativeElement,this.view=t,this.node=e,this.getPos=i,this.resizeSubscription=this.imageComponentRef.instance.imageResize.subscribe(()=>{this.handleResize()})}computeChanges(e,t){return JSON.stringify(e)===JSON.stringify(t)}setNodeAttributes(e){this.imageComponentRef.instance.src=e.src,this.imageComponentRef.instance.alt=e.alt,this.imageComponentRef.instance.title=e.title,this.imageComponentRef.instance.outerWidth=e.width}update(e){return e.type===this.node.type&&(this.node=e,this.computeChanges(this.node.attrs,e.attrs)&&(this.updating=!0,this.setNodeAttributes(e.attrs),this.updating=!1),!0)}ignoreMutation(){return!0}selectNode(){this.imageComponentRef.instance.selected=!0}deselectNode(){this.imageComponentRef.instance.selected=!1}destroy(){this.resizeSubscription.unsubscribe(),this.applicationRef.detachView(this.imageComponentRef.hostView)}}const wy=/(?:https?:\/\/)?[\w-]+(?:\.[\w-]+)+\.?(?:\d+)?(?:\/\S*)?$/,jd=n=>{const e=[];return n.forEach(t=>{if(t.isText){const i=t.text;let o=0;const s=wy.exec(i);if(s){const a=s.index,l=a+s[0].length,{link:c}=t.type.schema.marks;a>0&&e.push(t.cut(o,a));const d=i.slice(a,l);e.push(t.cut(a,l).mark(c.create({href:d}).addToSet(t.marks))),o=l}o<i.length&&e.push(t.cut(o))}else e.push(t.copy(jd(t.content)))}),M.fromArray(e)},Ty={type:"doc",content:[{type:"paragraph"}]},wi=(n,e)=>{if(!n)return e.nodeFromJSON(Ty);if("string"!=typeof n)return e.nodeFromJSON(n);const t=((n,e)=>{const t=e??Ro,i=document.createElement("div");return i.innerHTML=n,tn.fromSchema(t).parse(i).toJSON()})(n,e);return e.nodeFromJSON(t)};let Dy=(()=>{class n{constructor(t,i,o){this.renderer=t,this.injector=i,this.elementRef=o,this.placeholder="Type Here...",this.focusOut=new r.vpe,this.focusIn=new r.vpe,this.unsubscribe=new ho.x,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(t){!this.outputFormat&&"string"==typeof t&&(this.outputFormat="html"),this.editor.setContent(t??"")}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.setMeta("UPDATE_EDITABLE",!t),this.renderer.setProperty(this.elementRef.nativeElement,"disabled",t)}handleChange(t){if("html"!==this.outputFormat)this.onChange(t);else{const i=((n,e)=>{const t=this.editor.schema??Ro,i=t.nodeFromJSON(n),o=$t.fromSchema(t).serializeFragment(i.content),s=document.createElement("div");return s.appendChild(o),s.innerHTML})(t);this.onChange(i)}}setMeta(t,i){const{dispatch:o,state:{tr:s}}=this.editor.view;o(s.setMeta(t,i))}setPlaceholder(t){this.setMeta("UPDATE_PLACEHOLDER",t)}registerPlugins(){this.editor.registerPlugin(my()),this.editor.registerPlugin(_y(this.placeholder)),this.editor.registerPlugin(((n={})=>new Kt({key:new re("attributes"),props:{attributes:n}}))({class:"NgxEditor__Content"})),this.editor.registerPlugin((n=>new Kt({key:new re("focus"),props:{handleDOMEvents:{focus:()=>(n(),!1)}}}))(()=>{this.focusIn.emit()})),this.editor.registerPlugin((n=>new Kt({key:new re("blur"),props:{handleDOMEvents:{blur:()=>(n(),!1)}}}))(()=>{this.focusOut.emit(),this.onTouched()})),this.editor.features.resizeImage&&this.editor.registerPlugin((n=>new Kt({key:new re("image-resize"),props:{nodeViews:{image:(e,t,i)=>new Cy(e,t,i,n)}}}))(this.injector)),this.editor.features.linkOnPaste&&this.editor.registerPlugin(new Kt({key:new re("linkify"),props:{transformPasted:n=>new A(jd(n.content),n.openStart,n.openEnd)}}))}ngOnInit(){if(!this.editor)throw new Us("Required editor instance for initializing editor component");this.registerPlugins(),this.renderer.appendChild(this.ngxEditor.nativeElement,this.editor.view.dom),this.editor.valueChanges.pipe((0,K_.R)(this.unsubscribe)).subscribe(t=>{this.handleChange(t)})}ngOnChanges(t){t.placeholder&&!t.placeholder.isFirstChange()&&this.setPlaceholder(t.placeholder.currentValue)}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}}return n.\u0275fac=function(t){return new(t||n)(r.Y36(r.Qsj),r.Y36(r.zs3),r.Y36(r.SBq))},n.\u0275cmp=r.Xpm({type:n,selectors:[["ngx-editor"]],viewQuery:function(t,i){if(1&t&&r.Gf(Z1,7),2&t){let o;r.iGM(o=r.CRH())&&(i.ngxEditor=o.first)}},inputs:{editor:"editor",outputFormat:"outputFormat",placeholder:"placeholder"},outputs:{focusOut:"focusOut",focusIn:"focusIn"},features:[r._Bn([{provide:R.JU,useExisting:(0,r.Gpc)(()=>n),multi:!0}]),r.TTD],ngContentSelectors:L1,decls:3,vars:0,consts:[[1,"NgxEditor"],["ngxEditor",""]],template:function(t,i){1&t&&(r.F$t(),r.TgZ(0,"div",0,1),r.Hsn(2),r.qZA())},styles:['.NgxEditor{background:white;color:#000;background-clip:padding-box;border-radius:4px;border:1px solid rgba(0,0,0,.2);position:relative}.NgxEditor--Disabled{opacity:.5;pointer-events:none}.NgxEditor__Placeholder:before{color:#6c757d;opacity:1;-webkit-user-select:none;user-select:none;position:absolute;cursor:text;content:attr(data-placeholder)}.NgxEditor__Placeholder[data-align=right]:before{position:relative}.NgxEditor__Content{padding:8px;white-space:pre-wrap;outline:none;font-variant-ligatures:none;font-feature-settings:"liga" 0,none}.NgxEditor__Content p{margin:0 0 10px}.NgxEditor__Content blockquote{padding-left:16px;border-left:3px solid #ddd;margin-left:0;margin-right:0}.NgxEditor__Content--Disabled{-webkit-user-select:none;user-select:none;pointer-events:none}.NgxEditor__Wrapper{border:1px solid rgba(0,0,0,.4);border-radius:4px}.NgxEditor__Wrapper .NgxEditor__MenuBar{border-top-left-radius:4px;border-top-right-radius:4px;border-bottom:1px solid rgba(0,0,0,.2)}.NgxEditor__Wrapper .NgxEditor{border-top-left-radius:0;border-top-right-radius:0;border:none}.NgxEditor__MenuBar{display:flex;flex-wrap:wrap;padding:3px;cursor:default;background-color:#fff}.NgxEditor__MenuItem{border-radius:2px;display:flex;align-items:center;justify-content:center;position:relative;flex-shrink:0}.NgxEditor__MenuItem:hover{background-color:#f1f1f1}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon{height:30px;width:30px;transition:.3s ease-in-out}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon+.NgxEditor__MenuItem--Icon{margin-left:2px}.NgxEditor__MenuItem .NgxEditor__MenuItem--IconContainer{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.NgxEditor__MenuItem.NgxEditor__MenuItem--Text{padding:0 5px}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active,.NgxEditor__MenuItem .NgxEditor__MenuItem--Active{background-color:#e8f0fe;color:#1a73e8}.NgxEditor__Dropdown{min-width:64px;position:relative;display:flex;align-items:center;flex-shrink:0}.NgxEditor__Dropdown:hover{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text{display:flex;align-items:center;justify-content:center;padding:0 5px;height:100%;width:100%}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:after{display:inline-block;content:"";margin-left:24px;vertical-align:4px;border-top:4px solid;border-right:4px solid transparent;border-bottom:0;border-left:4px solid transparent}.NgxEditor__Dropdown .NgxEditor__Dropdown--DropdownMenu{position:absolute;left:0;box-shadow:#3c404326 0 2px 6px 2px;border-radius:4px;background-color:#fff;z-index:10;width:100%;top:32px}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item{padding:8px;white-space:nowrap;color:inherit}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:hover{background-color:#ececec}.NgxEditor__Dropdown .NgxEditor__Dropdown--Selected,.NgxEditor__Dropdown .NgxEditor__Dropdown--Open{color:#1a73e8;background-color:#e8f0fe}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active:hover{background-color:#e7e7e7}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--DropdownMenu{top:unset;bottom:32px}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--Text:after{transform:rotate(180deg)}.NgxEditor__MenuBar--Reverse .NgxEditor__Popup{top:unset;bottom:32px}.NgxEditor__Popup{position:absolute;top:32px;box-shadow:#3c404326 0 2px 6px 2px;border-radius:4px;background-color:#fff;z-index:10;min-width:192px;padding:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup{margin-bottom:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup label{margin-bottom:3px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=text],.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=url]{padding:2px 4px}.NgxEditor__Popup .NgxEditor__Popup--Col{display:flex;flex-direction:column;position:relative}.NgxEditor__Popup .NgxEditor__Popup--Label{font-size:85%}.NgxEditor__Seperator{border-left:1px solid #ccc;margin:0 5px}.NgxEditor__HelpText{font-size:80%}.NgxEditor__HelpText.NgxEditor__HelpText--Error{color:red}\n'],encapsulation:2}),n})(),Fe=(()=>{class n{constructor(){this.customMenuRefChange=new ho.x}setCustomMenuRef(t){this.customMenuRefChange.next(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class zn{constructor(e){this.name=e}apply(){return(e,t)=>{const{schema:i}=e,o=i.marks[this.name];return!!o&&Zd(o)(e,t)}}toggle(){return(e,t)=>{const{schema:i}=e,o=i.marks[this.name];return!!o&&qn(o)(e,t)}}isActive(e){const{schema:t}=e,i=t.marks[this.name];return!!i&&zr(e,i)}canExecute(e){return this.toggle()(e)}}class zo{constructor(e=!1){this.isBulletList=!1,this.isBulletList=e}getType(e){return this.isBulletList?e.nodes.bullet_list:e.nodes.ordered_list}toggle(){return(e,t)=>{const{schema:i}=e,o=this.getType(i);return!!o&&(this.isActive(e)?_d(i.nodes.list_item)(e,t):function Mb(n,e=null){return function(t,i){let{$from:o,$to:s}=t.selection,a=o.blockRange(s),l=!1,c=a;if(!a)return!1;if(a.depth>=2&&o.node(a.depth-1).type.compatibleContent(n)&&0==a.startIndex){if(0==o.index(a.depth-1))return!1;let u=t.doc.resolve(a.start-2);c=new _o(u,u,a.depth),a.endIndex<a.parent.childCount&&(a=new _o(o,t.doc.resolve(s.end(a.depth)),a.depth)),l=!0}let d=Xs(c,n,e,a);return!!d&&(i&&i(function Tb(n,e,t,i,o){let s=M.empty;for(let u=t.length-1;u>=0;u--)s=M.from(t[u].type.create(t[u].attrs,s));n.step(new ct(e.start-(i?2:0),e.end,e.start,e.end,new A(s,0,0),t.length,!0));let a=0;for(let u=0;u<t.length;u++)t[u].type==o&&(a=u+1);let l=t.length-a,c=e.start+t.length-(i?2:0),d=e.parent;for(let u=e.startIndex,h=e.endIndex,f=!0;u<h;u++,f=!1)!f&&Sn(n.doc,c,l)&&(n.split(c,l),c+=2*l),c+=d.child(u).nodeSize;return n}(t.tr,a,d,l,n).scrollIntoView()),!0)}}(o)(e,t))}}isActive(e){const{schema:t}=e,i=this.getType(t);return!!i&&Id(e,i)}canExecute(e){return this.toggle()(e)}}class dn{constructor(e){this.level=e}apply(){return(e,t)=>{const{schema:i}=e,o=i.nodes.heading;return!!o&&Zr(o)(e,t)}}toggle(){return(e,t)=>{const{schema:i,selection:o,doc:s}=e,a=i.nodes.heading;if(!a)return!1;const l=o.$from.before(1),d=s.nodeAt(l)?.attrs??{};return this.isActive(e)?Zr(i.nodes.paragraph,d)(e,t):Zr(a,{...d,level:this.level})(e,t)}}isActive(e){const{schema:t}=e,i=Pd(e),o=t.nodes.heading;if(!o)return!1;const s=[o,t.nodes.text,t.nodes.blockquote];return!!i.filter(c=>s.includes(c.type)).find(c=>c.attrs.level===this.level)}canExecute(e){return this.toggle()(e)}}class Mi{constructor(e){this.align=e}toggle(){return(e,t)=>{const{doc:i,selection:o,tr:s,schema:a}=e,{from:l,to:c}=o;let d=!1;return i.nodesBetween(l,c,(u,h)=>{const f=u.type;return[a.nodes.paragraph,a.nodes.heading].includes(f)&&(d=!0,s.setNodeMarkup(h,f,{...u.attrs,align:this.align})),!0}),!!d&&(s.docChanged&&t?.(s),!0)}}isActive(e){return!!Pd(e).find(o=>o.attrs.align===this.align)}canExecute(e){return this.toggle()(e)}}const Ny={strict:!0};class Jr{update(e){return(t,i)=>{const{schema:o,selection:s}=t,a=o.marks.link;return!(!a||s.empty)&&qn(a,e)(t,i)}}insert(e,t){return(i,o)=>{const{schema:s,tr:a}=i;if(!s.marks.link)return!1;const d=s.text(e,[s.marks.link.create({href:t.href,title:t.title??e,target:t.target??"_blank"})]);return a.replaceSelectionWith(d,!1).scrollIntoView(),!!a.docChanged&&(o?.(a),!0)}}isActive(e,t=Ny){if(t.strict)return!0;const{schema:i}=e,o=i.marks.link;return!!o&&zr(e,o)}remove(e,t){return((n,e)=>{const{doc:t,selection:i,tr:o}=n,{$head:{pos:s},from:a,to:l}=i;if(a===l){const c=t.resolve(s),d=s-c.textOffset,u=d+c.parent.child(c.index()).nodeSize;o.removeMark(d,u)}else o.removeMark(a,l);return!!o.docChanged&&(e?.(o),!0)})(e,t)}canExecute(e){const t={href:""};return this.insert("Exec",t)(e)||this.update(t)(e)}}class Jd{insert(e,t){return(i,o)=>{const{schema:s,tr:a,selection:l}=i,c=s.nodes.image;if(!c)return!1;const d={width:null,src:e,...t};!d.width&&l instanceof N&&l.node.type===c&&(d.width=l.node.attrs.width),a.replaceSelectionWith(c.createAndFill(d));const u=a.doc.resolve(a.selection.anchor-a.selection.$anchor.nodeBefore.nodeSize);return a.setSelection(new N(u)).scrollIntoView(),!!a.docChanged&&(o?.(a),!0)}}isActive(e){const{selection:t}=e;return t instanceof N&&"image"===t.node.type.name}}class Bn{constructor(e,t="color"){this.name=e,this.attrName=t}apply(e){return(t,i)=>{const{schema:o,selection:s,doc:a}=t,l=o.marks[this.name];if(!l)return!1;const{from:c,to:d,empty:u}=s;if(!u&&c+1===d){const h=a.nodeAt(c);if(h?.isAtom&&!h.isText&&h.isLeaf)return!1}return Zd(l,e)(t,i)}}isActive(e){const{schema:t}=e,i=t.marks[this.name];return!!i&&zr(e,i)}getActiveColors(e){if(!this.isActive(e))return[];const{schema:t}=e;return(n=>{let e=[];const{selection:t,storedMarks:i}=n,{from:o,to:s,empty:a,$from:l}=t;return a?e=i||l.marks():n.doc.nodesBetween(o,s,c=>{e=[...e,...c.marks]}),e})(e).filter(s=>s.type===t.marks[this.name]).map(s=>s.attrs[this.attrName]).filter(Boolean)}remove(){return(e,t)=>{const{schema:i}=e,o=i.marks[this.name];return!!o&&(n=>(e,t)=>{const{tr:i,selection:o,storedMarks:s,doc:a}=e,{empty:l,ranges:c}=o;if(l&&o instanceof U){const{$cursor:d}=o;if(!d||!Rd(e.doc,c,n))return!1;if(n.isInSet(s||d.marks()))return i.removeStoredMark(n),t?.(i),!0}else{for(const d of c){const{$from:u,$to:h}=d;a.rangeHasMark(u.pos,h.pos,n)&&i.removeMark(u.pos,h.pos,n)}if(!i.docChanged)return!1;t?.(i.scrollIntoView())}return!1})(o)(e,t)}}canExecute(e){return this.apply("text_color"===this.name?{color:""}:{backgroundColor:""})(e)}}const Iy=["link"],Ry=new zn("strong"),Fy=new zn("em"),Zy=new zn("code"),Ly=new zn("u"),qy=new zn("s"),zy=new class Oy{toggle(){return(e,t)=>{const{schema:i}=e,o=i.nodes.blockquote;return!!o&&(this.isActive(e)?((n,e)=>{let{$from:t,$to:i}=n.selection,o=t.blockRange(i),s=o&&hi(o);return null!=s&&(e&&e(n.tr.lift(o,s).scrollIntoView()),!0)})(e,t):function t1(n,e=null){return function(t,i){let{$from:o,$to:s}=t.selection,a=o.blockRange(s),l=a&&Xs(a,n,e);return!!l&&(i&&i(t.tr.wrap(a,l).scrollIntoView()),!0)}}(o)(e,t))}}isActive(e){const{schema:t}=e,i=t.nodes.blockquote;return!!i&&Id(e,i)}canExecute(e){return this.toggle()(e)}},By=new class Ey{insert(){return(e,t)=>{const{schema:i,tr:o}=e,s=i.nodes.horizontal_rule;return!!s&&(t(o.replaceSelectionWith(s.create()).scrollIntoView()),!0)}}canExecute(e){return((n,e)=>{const{$from:t}=n.selection;for(let i=t.depth;i>=0;i-=1){const o=t.index(i);if(t.node(i).canReplaceWith(o,o,e))return!0}return!1})(e,e.schema.nodes.horizontal_rule)}},Vy=new class Py{insert(){return(e,t)=>{const{tr:i}=e,{ranges:o,empty:s}=i.selection;return s||(Object.entries(e.schema.marks).forEach(([a,l])=>{Iy.includes(a)||o.forEach(c=>{i.removeMark(c.$from.pos,c.$to.pos,l)})}),t(i)),!0}}canExecute(){return!0}},Uy=new zo(!0),Hy=new zo(!1),jy=new dn(1),Jy=new dn(2),Yy=new dn(3),Wy=new dn(4),$y=new dn(5),Qy=new dn(6),Ky=new Mi("left"),Gy=new Mi("center"),Xy=new Mi("right"),t2=new Mi("justify"),e2=new Jr,n2=new Jd,i2=new Bn("text_color","color"),o2=new Bn("text_background_color","backgroundColor"),Bo={bold:Ry,italic:Fy,code:Zy,underline:Ly,strike:qy,blockquote:zy,bullet_list:Uy,ordered_list:Hy,h1:jy,h2:Jy,h3:Yy,h4:Wy,h5:$y,h6:Qy,align_left:Ky,align_center:Gy,align_right:Xy,align_justify:t2},Yd={horizontal_rule:By,format_clear:Vy},Ti=e2,Wd=n2,s2=i2,r2=o2,Yr={bold:"Bold",italic:"Italic",code:"Code",underline:"Underline",strike:"Strike",blockquote:"Blockquote",bullet_list:"Bullet List",ordered_list:"Ordered List",heading:"Heading",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",align_left:"Left Align",align_center:"Center Align",align_right:"Right Align",align_justify:"Justify",text_color:"Text Color",background_color:"Background Color",horizontal_rule:"Horizontal rule",format_clear:"Clear Formatting",insertLink:"Insert Link",removeLink:"Remove Link",insertImage:"Insert Image",url:"URL",text:"Text",openInNewTab:"Open in new tab",insert:"Insert",altText:"Alt Text",title:"Title",remove:"Remove"};class a2{constructor(e={}){this.locals=Yr,this.get=t=>this.locals[t]??"",this.locals={...Yr,...e}}}const $d={bold:'\n  <path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z" />\n',italic:'\n  <path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z" />\n',code:'\n<path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>\n',underline:'\n<path d="M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"/>\n',strike:'\n<path d="M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z"/>\n',ordered_list:'\n<path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"/>\n',bullet_list:'\n<path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"/>\n',blockquote:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"/>\n',link:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>\n',unlink:'\n<path d="M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z"/>\n',image:'\n<path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>\n',align_left:'\n<path d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"/>\n',align_center:'\n<path d="M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"/>\n',align_right:'\n<path d="M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"/>\n',align_justify:'\n<path d="M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z"/>\n',text_color:'\n<path d="M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z"/>\n',color_fill:'\n<path d="M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z"/>\n',horizontal_rule:'\n  <g>\n    <rect fill="none" fill-rule="evenodd" height="24" width="24"/>\n    <rect fill-rule="evenodd" height="2" width="16" x="4" y="11"/>\n  </g>\n',format_clear:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M3.27 5L2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21 18 19.73 3.55 5.27 3.27 5zM6 5v.18L8.82 8h2.4l-.72 1.68 2.1 2.1L14.21 8H20V5H6z"/>\n',path:"<path></path>"};class Qd{static get(e,t="currentColor"){const i=$d[e];return i&&(i.includes("<path")||i.includes("<g"))?`\n        <svg\n          xmlns="http://www.w3.org/2000/svg"\n          viewBox="0 0 24 24"\n          fill=${t}\n          height=20\n          width=20\n        >\n          ${i}\n        </svg>\n      `:i}}let Wr=(()=>{class n{constructor(){this.locals={},this.icons={}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),un=(()=>{class n{constructor(t){this.config=t}get locals(){return new a2(this.config.locals)}getIcon(t){return this.config.icons[t]?this.config.icons[t]:Qd.get(t)}}return n.\u0275fac=function(t){return new(t||n)(r.LFG(Wr,8))},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Kd=n=>({locals:n.locals??{},icons:n.icons??{}});let Vn=(()=>{class n{constructor(t){this.sanitizer=t}transform(t){return this.sanitizer.bypassSecurityTrustHtml(t)}}return n.\u0275fac=function(t){return new(t||n)(r.Y36(b1.H7,16))},n.\u0275pipe=r.Yjl({name:"sanitizeHtml",type:n,pure:!0}),n})(),O2=(()=>{class n{constructor(t,i){this.ngxeService=t,this.menuService=i,this.isActive=!1,this.disabled=!1,this.update=o=>{const{state:s}=o,a=Bo[this.name];this.isActive=a.isActive(s),this.disabled=!a.canExecute(s)}}get name(){return this.toolbarItem}toggle(t){if(t.preventDefault(),0!==t.button)return;const{state:i,dispatch:o}=this.editorView;Bo[this.name].toggle()(i,o)}getTitle(t){return this.ngxeService.locals.get(t)}ngOnInit(){this.html=this.ngxeService.getIcon(this.name),this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(t=>{this.update(t)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(r.Y36(un),r.Y36(Fe))},n.\u0275cmp=r.Xpm({type:n,selectors:[["ngx-toggle-command"]],inputs:{toolbarItem:"toolbarItem"},decls:2,vars:8,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"]],template:function(t,i){1&t&&(r.TgZ(0,"div",0),r.NdJ("mousedown",function(s){return i.toggle(s)}),r.ALo(1,"sanitizeHtml"),r.qZA()),2&t&&(r.ekj("NgxEditor__MenuItem--Active",i.isActive)("NgxEditor--Disabled",i.disabled),r.Q6J("innerHTML",r.lcZ(1,6,i.html),r.oJD)("title",i.getTitle(i.name)))},dependencies:[Vn]}),n})(),E2=(()=>{class n{constructor(t,i){this.ngxeService=t,this.menuService=i,this.disabled=!1,this.update=o=>{const{state:s}=o;this.disabled=!Yd[this.name].canExecute(s)}}get name(){return this.toolbarItem}insert(t){if(t.preventDefault(),0!==t.button)return;const{state:i,dispatch:o}=this.editorView;Yd[this.name].insert()(i,o)}getTitle(t){return this.ngxeService.locals.get(t)}ngOnInit(){this.html=Qd.get(this.name),this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(t=>{this.update(t)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(r.Y36(un),r.Y36(Fe))},n.\u0275cmp=r.Xpm({type:n,selectors:[["ngx-insert-command"]],inputs:{toolbarItem:"toolbarItem"},decls:2,vars:6,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"]],template:function(t,i){1&t&&(r.TgZ(0,"div",0),r.NdJ("mousedown",function(s){return i.insert(s)}),r.ALo(1,"sanitizeHtml"),r.qZA()),2&t&&(r.ekj("NgxEditor--Disabled",i.disabled),r.Q6J("innerHTML",r.lcZ(1,4,i.html),r.oJD)("title",i.getTitle(i.name)))},dependencies:[Vn]}),n})(),N2=(()=>{class n{constructor(t,i,o){this.el=t,this.ngxeService=i,this.menuService=o,this.showPopup=!1,this.isActive=!1,this.canExecute=!0,this.setText=()=>{const{state:{selection:s,doc:a}}=this.editorView,{empty:l,from:c,to:d}=s,u=l?"":a.textBetween(c,d);u&&(this.text.patchValue(u),this.text.disable())},this.update=s=>{const{state:a}=s;this.isActive=Ti.isActive(a,{strict:!1}),this.canExecute=Ti.canExecute(a)}}get icon(){return this.ngxeService.getIcon(this.isActive?"unlink":"link")}get title(){return this.ngxeService.locals.get(this.isActive?"removeLink":"insertLink")}get href(){return this.form.get("href")}get text(){return this.form.get("text")}onDocumentClick(t){!this.el.nativeElement.contains(t.target)&&this.showPopup&&this.hideForm()}getLabel(t){return this.ngxeService.locals.get(t)}hideForm(){this.showPopup=!1,this.form.reset({href:"",text:"",openInNewTab:!0}),this.text.enable()}onMouseDown(t){if(0!==t.button)return;const{state:i,dispatch:o}=this.editorView;this.isActive?Ti.remove(i,o):(this.showPopup=!this.showPopup,this.showPopup&&this.setText())}insertLink(t){t.preventDefault();const{text:i,href:o,openInNewTab:s}=this.form.getRawValue(),{dispatch:a,state:l}=this.editorView,{selection:c}=l,d={title:o,href:o,target:s?"_blank":"_self"};c.empty?(Ti.insert(i,d)(l,a),this.editorView.focus()):Ti.update(d)(l,a),this.hideForm()}ngOnInit(){this.editorView=this.menuService.editor.view,this.form=new R.cw({href:new R.NI("",[R.kI.required,R.kI.pattern(this.menuService.editor.linkValidationPattern)]),text:new R.NI("",[R.kI.required]),openInNewTab:new R.NI(!0)}),this.updateSubscription=this.menuService.editor.update.subscribe(t=>{this.update(t)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(r.Y36(r.SBq),r.Y36(un),r.Y36(Fe))},n.\u0275cmp=r.Xpm({type:n,selectors:[["ngx-link"]],hostBindings:function(t,i){1&t&&r.NdJ("mousedown",function(s){return i.onDocumentClick(s)},!1,r.evT)},decls:3,vars:9,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],[1,"NgxEditor__Popup--Form",3,"formGroup","ngSubmit"],[1,"NgxEditor__Popup--FormGroup"],[1,"NgxEditor__Popup--Col"],[1,"NgxEditor__Popup--Label"],["type","href","id","href","formControlName","href","autofocus","","autocomplete","off"],["class","NgxEditor__HelpText NgxEditor__HelpText--Error",4,"ngIf"],["type","text","formControlName","text","autocomplete","off"],["type","checkbox","formControlName","openInNewTab"],["type","submit",3,"disabled"],[1,"NgxEditor__HelpText","NgxEditor__HelpText--Error"]],template:function(t,i){1&t&&(r.TgZ(0,"div",0),r.NdJ("mousedown",function(s){return i.onMouseDown(s)}),r.ALo(1,"sanitizeHtml"),r.qZA(),r.YNc(2,B1,21,8,"div",1)),2&t&&(r.ekj("NgxEditor__MenuItem--Active",i.isActive||i.showPopup)("NgxEditor--Disabled",!i.canExecute),r.Q6J("innerHTML",r.lcZ(1,7,i.icon),r.oJD)("title",i.title),r.xp6(2),r.Q6J("ngIf",i.showPopup))},dependencies:[O.O5,R._Y,R.Fj,R.Wl,R.JJ,R.JL,R.sg,R.u,Vn]}),n})(),I2=(()=>{class n{constructor(t,i,o){this.ngxeService=t,this.menuService=i,this.el=o,this.isDropdownOpen=!1,this.disabledItems=[],this.update=s=>{const{state:a}=s;this.disabledItems=[];const l=[];this.items.forEach(c=>{const d=Bo[c];d.isActive(a)&&l.push(c),d.canExecute(a)||this.disabledItems.push(c)}),1===l.length?[this.activeItem]=l:this.activeItem=null}}get isSelected(){return!(!this.activeItem&&!this.isDropdownOpen)}get isDropdownDisabled(){return this.disabledItems.length===this.items.length}onDocumentClick(t){!this.el.nativeElement.contains(t)&&this.isDropdownOpen&&(this.isDropdownOpen=!1)}getName(t){return this.ngxeService.locals.get(t)}toggleDropdown(t){t.preventDefault(),this.isDropdownOpen=!this.isDropdownOpen}trackByIndex(t){return t}onClick(t,i){if(t.preventDefault(),0!==t.button)return;const o=Bo[i],{state:s,dispatch:a}=this.editorView;o.toggle()(s,a),this.isDropdownOpen=!1}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(t=>{this.update(t)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(r.Y36(un),r.Y36(Fe),r.Y36(r.SBq))},n.\u0275cmp=r.Xpm({type:n,selectors:[["ngx-dropdown"]],hostBindings:function(t,i){1&t&&r.NdJ("mousedown",function(s){return i.onDocumentClick(s.target)},!1,r.evT)},inputs:{group:"group",items:"items"},decls:3,vars:6,consts:[[1,"NgxEditor__Dropdown--Text",3,"mousedown"],["class","NgxEditor__Dropdown--DropdownMenu",4,"ngIf"],[1,"NgxEditor__Dropdown--DropdownMenu"],["class","NgxEditor__Dropdown--Item",3,"ngClass","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__Dropdown--Item",3,"ngClass","mousedown"]],template:function(t,i){1&t&&(r.TgZ(0,"div",0),r.NdJ("mousedown",function(s){return i.toggleDropdown(s)}),r._uU(1),r.qZA(),r.YNc(2,H1,2,2,"div",1)),2&t&&(r.ekj("NgxEditor__Dropdown--Selected",i.isSelected)("NgxEditor--Disabled",i.isDropdownDisabled),r.xp6(1),r.hij(" ",i.getName(i.activeItem||i.group),"\n"),r.xp6(1),r.Q6J("ngIf",i.isDropdownOpen))},dependencies:[O.mk,O.sg,O.O5]}),n})(),P2=(()=>{class n{constructor(t,i,o){this.el=t,this.ngxeService=i,this.menuService=o,this.showPopup=!1,this.isActive=!1,this.form=new R.cw({src:new R.NI("",[R.kI.required,R.kI.pattern("(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/??([^#\n\r]*)?#?([^\n\r]*)")]),alt:new R.NI(""),title:new R.NI("")}),this.update=s=>{const{state:a}=s;this.isActive=Wd.isActive(a)}}get icon(){return this.ngxeService.getIcon("image")}get src(){return this.form.get("src")}onDocumentClick(t){!this.el.nativeElement.contains(t.target)&&this.showPopup&&this.hideForm()}getLabel(t){return this.ngxeService.locals.get(t)}hideForm(){this.showPopup=!1,this.form.reset({src:"",alt:"",title:""})}onMouseDown(t){0===t.button&&(this.showPopup=!this.showPopup,this.showPopup&&this.fillForm())}fillForm(){const{state:t}=this.editorView,{selection:i}=t;if(i instanceof N&&this.isActive){const{src:o,alt:s="",title:a=""}=i.node.attrs;this.form.setValue({src:o,alt:s,title:a})}}insertLink(t){t.preventDefault();const{src:i,alt:o,title:s}=this.form.getRawValue(),{dispatch:a,state:l}=this.editorView;Wd.insert(i,{alt:o,title:s})(l,a),this.editorView.focus(),this.hideForm()}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(t=>{this.update(t)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(r.Y36(r.SBq),r.Y36(un),r.Y36(Fe))},n.\u0275cmp=r.Xpm({type:n,selectors:[["ngx-image"]],hostBindings:function(t,i){1&t&&r.NdJ("mousedown",function(s){return i.onDocumentClick(s)},!1,r.evT)},decls:3,vars:7,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],[1,"NgxEditor__Popup--Form",3,"formGroup","ngSubmit"],[1,"NgxEditor__Popup--FormGroup"],[1,"NgxEditor__Popup--Col"],[1,"NgxEditor__Popup--Label"],["type","href","id","href","formControlName","src","autofocus","","autocomplete","off"],["class","NgxEditor__HelpText NgxEditor__HelpText--Error",4,"ngIf"],["type","text","formControlName","alt","autocomplete","off"],["type","text","formControlName","title","autocomplete","off"],["type","submit",3,"disabled"],[1,"NgxEditor__HelpText","NgxEditor__HelpText--Error"]],template:function(t,i){1&t&&(r.TgZ(0,"div",0),r.NdJ("mousedown",function(s){return i.onMouseDown(s)}),r.ALo(1,"sanitizeHtml"),r.qZA(),r.YNc(2,J1,20,7,"div",1)),2&t&&(r.ekj("NgxEditor__MenuItem--Active",i.isActive||i.showPopup),r.Q6J("innerHTML",r.lcZ(1,5,i.icon),r.oJD)("title",i.getLabel("insertImage")),r.xp6(2),r.Q6J("ngIf",i.showPopup))},dependencies:[O.O5,R._Y,R.Fj,R.JJ,R.JL,R.sg,R.u,Vn]}),n})(),R2=(()=>{class n{constructor(t,i,o){this.el=t,this.menuService=i,this.ngxeService=o,this.showPopup=!1,this.isActive=!1,this.activeColors=[],this.canExecute=!0,this.update=s=>{const{state:a}=s;this.canExecute=this.command.canExecute(a),this.isActive=this.command.isActive(a),this.activeColors=[],this.isActive&&(this.activeColors=this.command.getActiveColors(a))}}get title(){return this.getLabel("text_color"===this.type?"text_color":"background_color")}get icon(){return this.ngxeService.getIcon("text_color"===this.type?"text_color":"color_fill")}get command(){return"text_color"===this.type?s2:r2}getContrastYIQ(t){const i=t.replace("#","");return(299*parseInt(i.substring(0,2),16)+587*parseInt(i.substring(2,4),16)+114*parseInt(i.substring(4,6),16))/1e3>=128?"black":"white"}onDocumentClick(t){!this.el.nativeElement.contains(t.target)&&this.showPopup&&this.hidePopup()}hidePopup(){this.showPopup=!1}togglePopup(t){t.preventDefault(),0===t.button&&(this.showPopup=!this.showPopup)}remove(t){t.preventDefault();const{state:i,dispatch:o}=this.editorView;this.command.remove()(i,o),this.hidePopup()}trackByIndex(t){return t}onColorSelect(t,i){if(t.preventDefault(),0!==t.button)return;const{state:o,dispatch:s}=this.editorView;"text_color"===this.type?this.command.apply({color:i})(o,s):this.command.apply({backgroundColor:i})(o,s),this.editorView.hasFocus()||this.editorView.focus(),this.hidePopup()}getLabel(t){return this.ngxeService.locals.get(t)}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(t=>{this.update(t)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(r.Y36(r.SBq),r.Y36(Fe),r.Y36(un))},n.\u0275cmp=r.Xpm({type:n,selectors:[["ngx-color-picker"]],hostBindings:function(t,i){1&t&&r.NdJ("mousedown",function(s){return i.onDocumentClick(s)},!1,r.evT)},inputs:{presets:"presets",type:"type"},decls:3,vars:9,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],["class","NgxEditor__ColorContainer",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__MenuItem--Button",3,"disabled","mousedown"],[1,"NgxEditor__ColorContainer"],["class","NgxEditor__Color",3,"ngStyle","title","ngClass","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__Color",3,"ngStyle","title","ngClass","mousedown"]],template:function(t,i){1&t&&(r.TgZ(0,"div",0),r.NdJ("mousedown",function(s){return i.togglePopup(s)}),r.ALo(1,"sanitizeHtml"),r.qZA(),r.YNc(2,K1,4,4,"div",1)),2&t&&(r.ekj("NgxEditor__MenuItem--Active",i.isActive||i.showPopup)("NgxEditor--Disabled",!i.canExecute),r.Q6J("innerHTML",r.lcZ(1,7,i.icon),r.oJD)("title",i.title),r.xp6(2),r.Q6J("ngIf",i.showPopup))},dependencies:[O.mk,O.sg,O.O5,O.PC,Vn],styles:['@charset "UTF-8";.NgxEditor__Popup[_ngcontent-%COMP%]{width:230px}.NgxEditor__ColorContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.NgxEditor__ColorContainer[_ngcontent-%COMP%] + .NgxEditor__ColorContainer[_ngcontent-%COMP%]{margin-top:5px}.NgxEditor__Color[_ngcontent-%COMP%]{border:none;outline:none;border-radius:6px;width:24px;height:24px;flex-shrink:0}.NgxEditor__Color--Active[_ngcontent-%COMP%]:after{content:"\\2714";font-size:90%}.NgxEditor__MenuItem--Button[_ngcontent-%COMP%]{margin-top:5px}']}),n})();const F2=[["bold","italic"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link","image"],["text_color","background_color"]],Z2=["#b60205","#d93f0b","#fbca04","#0e8a16","#006b75","#1d76db","#0052cc","#5319e7","#e99695","#f9d0c4","#fef2c0","#c2e0c6","#bfdadc","#c5def5","#bfd4f2","#d4c5f9"];let L2=(()=>{class n{constructor(t){this.menuService=t,this.toolbar=F2,this.colorPresets=Z2,this.disabled=!1,this.customMenuRef=null,this.dropdownPlacement="bottom",this.toggleCommands=["bold","italic","underline","strike","code","blockquote","ordered_list","bullet_list","align_left","align_center","align_right","align_justify"],this.insertCommands=["horizontal_rule","format_clear"],this.iconContainerClass=["NgxEditor__MenuItem","NgxEditor__MenuItem--Icon"],this.dropdownContainerClass=["NgxEditor__Dropdown"],this.seperatorClass=["NgxEditor__Seperator"]}get presets(){const i=[];return this.colorPresets.forEach((o,s)=>{const a=Math.floor(s/8);i[a]||i.push([]),i[a].push(o)}),i}trackByIndex(t){return t}isDropDown(t){return!!t?.heading}getDropdownItems(t){return t}ngOnInit(){if(!this.editor)throw new Us("Required editor instance to initialize menu component");this.menuService.editor=this.editor}}return n.\u0275fac=function(t){return new(t||n)(r.Y36(Fe))},n.\u0275cmp=r.Xpm({type:n,selectors:[["ngx-editor-menu"]],inputs:{toolbar:"toolbar",colorPresets:"colorPresets",disabled:"disabled",editor:"editor",customMenuRef:"customMenuRef",dropdownPlacement:"dropdownPlacement"},features:[r._Bn([Fe])],decls:3,vars:7,consts:[[1,"NgxEditor__MenuBar",3,"ngClass"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"toolbarItem","class",4,"ngIf"],[3,"class",4,"ngIf"],["type","text_color",3,"class","presets",4,"ngIf"],["type","background_color",3,"class","presets",4,"ngIf"],[3,"toolbarItem"],[3,"class","group","items",4,"ngFor","ngForOf","ngForTrackBy"],[3,"group","items"],["type","text_color",3,"presets"],["type","background_color",3,"presets"],[3,"ngTemplateOutlet"]],template:function(t,i){1&t&&(r.TgZ(0,"div",0),r.YNc(1,ly,2,2,"ng-container",1),r.YNc(2,cy,2,1,"ng-container",2),r.qZA()),2&t&&(r.Q6J("ngClass",r.WLB(4,dy,i.disabled,"top"===i.dropdownPlacement)),r.xp6(1),r.Q6J("ngForOf",i.toolbar)("ngForTrackBy",i.trackByIndex),r.xp6(1),r.Q6J("ngIf",i.customMenuRef))},dependencies:[O.mk,O.sg,O.O5,O.tP,O2,E2,N2,I2,P2,R2,O.Nd]}),n})(),q2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({providers:[Vn],imports:[O.ez,R.UX]}),n})();const Vo=new r.OlP("NgxEditorConfig"),Gd={locals:Yr,icons:$d};let z2=(()=>{class n{static forRoot(t=Gd){return{ngModule:n,providers:[{provide:Vo,useValue:t},{provide:Wr,useFactory:Kd,deps:[Vo]}]}}static forChild(t=Gd){return{ngModule:n,providers:[{provide:Vo,useValue:t},{provide:Wr,useFactory:Kd,deps:[Vo]},un]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({imports:[O.ez,q2]}),n})();const Lt=(n,e=!1)=>(t,i)=>{const o=new zn(n);return e?o.toggle()(t,i):o.apply()(t,i)};class U2{constructor(e){if(this.applyTrx=t=>{this.state=this.state.apply(t??this.tr),this.tr=this.state.tr,this.tr.setMeta("APPLIED_TRX",!0)},this.dispatch=t=>{this.applyTrx(t)},!e)throw new Us("Required view to initialize commands.");this.view=e,this.state=e.state,this.tr=this.view.state.tr}exec(){if(!this.tr.getMeta("APPLIED_TRX"))return!1;const e=!this.view.state.doc.eq(this.state.doc);this.view.updateState(this.state);const t=this.tr.setMeta("FORCE_EMIT",e);return this.view.dispatch(t),!0}focus(e="end"){const t="start"===e?z.atStart(this.state.doc):z.atEnd(this.state.doc);return this.tr.setSelection(t),this.applyTrx(),this.view.focus(),this}scrollIntoView(){return this.tr.scrollIntoView(),this.applyTrx(),this}insertText(e){return this.tr.insertText(e),this.applyTrx(),this}insertNewLine(){return ki(kd,Md,Td,Fr)(this.state,this.dispatch),this}applyMark(e){return Lt(e,!1)(this.state,this.dispatch),this}toggleMark(e){return Lt(e,!0)(this.state,this.dispatch),this}bold(){return Lt("strong")(this.state,this.dispatch),this}toggleBold(){return Lt("strong",!0)(this.state,this.dispatch),this}italics(){return Lt("em")(this.state,this.dispatch),this}toggleItalics(){return Lt("em",!0)(this.state,this.dispatch),this}underline(){return Lt("u")(this.state,this.dispatch),this}toggleUnderline(){return Lt("u",!0)(this.state,this.dispatch),this}strike(){return Lt("s")(this.state,this.dispatch),this}toggleStrike(){return Lt("s",!0)(this.state,this.dispatch),this}code(){return Lt("code")(this.state,this.dispatch),this}toggleCode(){return Lt("code",!0)(this.state,this.dispatch),this}toggleOrderedList(){return new zo(!1).toggle()(this.state,this.dispatch),this}toggleBulletList(){return new zo(!0).toggle()(this.state,this.dispatch),this}toggleHeading(e){return new dn(e).toggle()(this.state,this.dispatch),this}insertLink(e,t){return(new Jr).insert(e,t)(this.state,this.dispatch),this}updateLink(e){return(new Jr).update(e)(this.state,this.dispatch),this}insertImage(e,t={}){return(new Jd).insert(e,t)(this.state,this.dispatch),this}textColor(e){return new Bn("text_color").apply({color:e})(this.state,this.dispatch),this}backgroundColor(e){return new Bn("text_background_color").apply({backgroundColor:e})(this.state,this.dispatch),this}removeTextColor(){return new Bn("text_color").remove()(this.state,this.dispatch),this}removeBackgroundColor(){return new Bn("text_background_color").remove()(this.state,this.dispatch),this}align(e){return new Mi(e).toggle()(this.state,this.dispatch),this}insertHTML(e){const{selection:t,schema:i,tr:o}=this.state,{from:s,to:a}=t,l=document.createElement("div");l.innerHTML=e.trim();const c=tn.fromSchema(i).parseSlice(l),d=o.replaceRange(s,a,c);return this.applyTrx(d),this}}const H2=typeof navigator<"u"&&/Mac/.test(navigator.platform),G2=n=>{const e=f1.concat(l1,a1);return e.push((n=>Fd(/(?:^|\s)(?:(?:\*\*|__)(?:(?:[^*_]+))(?:\*\*|__))$/,n))(n.marks.strong)),e.push((n=>Fd(/(?:^|\s)(?:(?:\*|_)(?:(?:[^*_]+))(?:\*|_))$/,n))(n.marks.em)),e.push((n=>qr(/^\s*>\s$/,n))(n.nodes.blockquote)),e.push((n=>qr(/^(?:\d+)\.\s$/,n,e=>({order:Number(e[1])}),(e,t)=>t.childCount+t.attrs.order===Number(e[1])))(n.nodes.ordered_list)),e.push((n=>qr(/^\s*(?:[-+*])\s$/,n))(n.nodes.bullet_list)),e.push((n=>Nd(/^```$/,n))(n.nodes.code_block)),e.push(((n,e)=>Nd(new RegExp("^(#{1,6})\\s$"),n,t=>({level:t[1].length})))(n.nodes.heading)),function r1({rules:n}){let e=new Kt({state:{init:()=>null,apply(t,i){return t.getMeta(this)||(t.selectionSet||t.docChanged?null:i)}},props:{handleTextInput:(t,i,o,s)=>Ed(t,i,o,s,n,e),handleDOMEvents:{compositionend:t=>{setTimeout(()=>{let{$cursor:i}=t.state.selection;i&&Ed(t,i.pos,i.pos,"",n,e)})}}},isInputRules:!0});return e}({rules:e})},tv=(n,e)=>{const t=[];return e.keyboardShortcuts&&t.push(...((n,e)=>{const t={};t["Mod-z"]=Hd,H2?t["Shift-Mod-z"]=jr:t["Mod-y"]=jr;const i=[Zo({"Mod-b":qn(n.marks.strong),"Mod-i":qn(n.marks.em),"Mod-u":qn(n.marks.u),"Mod-`":qn(n.marks.code)}),Zo({Enter:Sb(n.nodes.list_item),"Shift-Enter":ki(wd,(o,s)=>{const{tr:a}=o;return s(a.replaceSelectionWith(n.nodes.hard_break.create()).scrollIntoView()),!0}),"Mod-[":_d(n.nodes.list_item),"Mod-]":xd(n.nodes.list_item),Tab:xd(n.nodes.list_item)}),Zo(i1)];return e.history&&i.push(Zo(t)),i})(n,{history:e.history})),e.history&&t.push(function I1(n={}){return new Kt({key:ee,state:{init:()=>new Re(Ut.empty,Ut.empty,null,0),apply:(e,t,i)=>function E1(n,e,t,i){let s,o=t.getMeta(ee);if(o)return o.historyState;t.getMeta(Ud)&&(n=new Re(n.done,n.undone,null,0));let a=t.getMeta("appendedTransaction");if(0==t.steps.length)return n;if(a&&a.getMeta(ee))return a.getMeta(ee).redo?new Re(n.done.addTransform(t,void 0,i,qo(e)),n.undone,zd(t.mapping.maps[t.steps.length-1]),n.prevTime):new Re(n.done,n.undone.addTransform(t,void 0,i,qo(e)),null,n.prevTime);if(!1===t.getMeta("addToHistory")||a&&!1===a.getMeta("addToHistory"))return(s=t.getMeta("rebased"))?new Re(n.done.rebased(t,s),n.undone.rebased(t,s),Ur(n.prevRanges,t.mapping),n.prevTime):new Re(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),Ur(n.prevRanges,t.mapping),n.prevTime);{let l=0==n.prevTime||!a&&(n.prevTime<(t.time||0)-i.newGroupDelay||!function N1(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((i,o)=>{for(let s=0;s<e.length;s+=2)i<=e[s+1]&&o>=e[s]&&(t=!0)}),t}(t,n.prevRanges)),c=a?Ur(n.prevRanges,t.mapping):zd(t.mapping.maps[t.steps.length-1]);return new Re(n.done.addTransform(t,l?e.selection.getBookmark():void 0,i,qo(e)),Ut.empty,c,t.time)}}(t,i,e,n)},config:n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},props:{handleDOMEvents:{beforeinput(e,t){let i=t.inputType,o="historyUndo"==i?Hd:"historyRedo"==i?jr:null;return!!o&&(t.preventDefault(),o(e.state,e.dispatch))}}}})}()),e.inputRules&&t.push(G2(n)),t},tu={linkOnPaste:!0,resizeImage:!0},eu={content:null,history:!0,keyboardShortcuts:!0,inputRules:!0,schema:Ro,plugins:[],nodeViews:{},attributes:{},features:tu,handleScrollToSelection:null,linkValidationPattern:"(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/??([^#\n\r]*)?#?([^\n\r]*)|(mailto:.*[@].*)"};class ev{constructor(e=eu){this.valueChangesSubject=new ho.x,this.updateSubject=new ho.x,this.options={...eu,...e},this.createEditor()}get valueChanges(){return this.valueChangesSubject.asObservable()}get update(){return this.updateSubject.asObservable()}get schema(){return this.options.schema||Ro}get linkValidationPattern(){return this.options.linkValidationPattern}get commands(){return new U2(this.view)}get features(){return{...tu,...this.options.features}}handleTransactions(e){const t=this.view.state.apply(e);if(this.view.updateState(t),this.updateSubject.next(this.view),!e.docChanged&&!e.getMeta("FORCE_EMIT"))return;const i=t.doc.toJSON();this.valueChangesSubject.next(i)}createEditor(){const{options:e,schema:t}=this,{content:i=null,nodeViews:o}=e,{history:s=!0,keyboardShortcuts:a=!0,inputRules:l=!0}=e,c=wi(i,t),d=e.plugins??[],u=e.attributes??{},h=tv(t,{history:s,keyboardShortcuts:a,inputRules:l});this.view=new bb(null,{state:En.create({doc:c,schema:t,plugins:[...h,...d]}),nodeViews:o,dispatchTransaction:this.handleTransactions.bind(this),attributes:u,handleScrollToSelection:e.handleScrollToSelection})}setContent(e){if((n=>typeof n>"u"||null===n)(e))return;const{state:t}=this.view,{tr:i,doc:o}=t,s=wi(e,this.schema);i.replaceWith(0,t.doc.content.size,s),!o.eq(i.doc)&&i.docChanged&&this.view.dispatch(i)}registerPlugin(e){const{state:t}=this.view,i=[...t.plugins,e],o=t.reconfigure({plugins:i});this.view.updateState(o)}destroy(){this.view.destroy()}}let nv=(()=>{class n{ngOnInit(){this.editor=new ev}ngOnDestroy(){this.editor.destroy()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=r.Xpm({type:n,selectors:[["app-wysiwyg-editor"]],inputs:{fiche:"fiche",question:"question"},decls:3,vars:5,consts:[[1,"NgxEditor__Wrapper"],[3,"editor"],[3,"editor","ngModel","disabled","placeholder","ngModelChange"]],template:function(t,i){1&t&&(r.TgZ(0,"div",0),r._UZ(1,"ngx-editor-menu",1),r.TgZ(2,"ngx-editor",2),r.NdJ("ngModelChange",function(s){return i.fiche[i.question.field]=s}),r.qZA()()),2&t&&(r.xp6(1),r.Q6J("editor",i.editor),r.xp6(1),r.Q6J("editor",i.editor)("ngModel",i.fiche[i.question.field])("disabled",!1)("placeholder","Type here..."))},dependencies:[Dy,L2,R.JJ,R.On]}),n})();function iv(n,e){if(1&n&&(r.TgZ(0,"div",11),r._uU(1),r.ALo(2,"initialName"),r.qZA()),2&n){const t=r.oxw(3);r.xp6(1),r.hij(" ",r.lcZ(2,1,t.respName)," ")}}function ov(n,e){1&n&&(r.ynx(0),r.TgZ(1,"h2",12),r._uU(2,"Appr\xe9ciation"),r.qZA(),r.TgZ(3,"mat-chip-listbox",13)(4,"mat-chip-option"),r._uU(5,"Risque mineur"),r.qZA(),r.TgZ(6,"mat-chip-option",14),r._uU(7,"Risque moyen"),r.qZA(),r.TgZ(8,"mat-chip-option",15),r._uU(9,"Risque majeur"),r.qZA()(),r.BQk())}function sv(n,e){if(1&n&&(r.TgZ(0,"mat-card",3)(1,"mat-card-content")(2,"div",4),r.YNc(3,iv,3,3,"div",5),r.qZA(),r.YNc(4,ov,10,0,"ng-container",6),r.TgZ(5,"h2",7),r._uU(6),r.qZA(),r._UZ(7,"app-wysiwyg-editor",8),r.TgZ(8,"div",9)(9,"button",10),r._uU(10,"R\xe9visions"),r.qZA(),r.TgZ(11,"button",10),r._uU(12,"Commentaires"),r.qZA(),r.TgZ(13,"button",10),r._uU(14,"Documents"),r.qZA()()()()),2&n){const t=e.$implicit,i=r.oxw(2);r.xp6(3),r.Q6J("ngIf",i.respName),r.xp6(1),r.Q6J("ngIf","recommandation"===t.field),r.xp6(2),r.hij(" ",t.name," "),r.xp6(1),r.Q6J("fiche",i.fiche)("question",t)}}function rv(n,e){if(1&n&&(r.TgZ(0,"div",1),r.YNc(1,sv,15,5,"mat-card",2),r.qZA()),2&n){const t=r.oxw();r.xp6(1),r.Q6J("ngForOf",t.questions)}}let av=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=r.Xpm({type:n,selectors:[["app-question-card"]],inputs:{questions:"questions",fiche:"fiche",respName:"respName"},decls:1,vars:1,consts:[["style","background-color: rgb(248, 249, 250)","class","d-flex p-2 flex-column ms-0 me-0 m-4",4,"ngIf"],[1,"d-flex","p-2","flex-column","ms-0","me-0","m-4",2,"background-color","rgb(248, 249, 250)"],["class","mb-4",4,"ngFor","ngForOf"],[1,"mb-4"],[1,"m-0","d-flex","justify-content-end"],["class","me-2 rounded-circle bg-secondary text-white d-flex align-items-center justify-content-center","style","width: 40px; height: 40px; font-size: 15px",4,"ngIf"],[4,"ngIf"],[1,"mb-2","mt-2"],[3,"fiche","question"],[1,"d-flex","flex-row","flex-nowrap"],["mat-button","","color","primary",1,"m-2"],[1,"me-2","rounded-circle","bg-secondary","text-white","d-flex","align-items-center","justify-content-center",2,"width","40px","height","40px","font-size","15px"],[1,"mb-1"],["aria-label","Fish selection"],["color","accent","selected",""],["color","warn"]],template:function(t,i){1&t&&r.YNc(0,rv,2,1,"div",0),2&t&&r.Q6J("ngIf",i.questions)},dependencies:[It.lW,J.a8,J.dn,se.z2,se.iO,O.sg,O.O5,nv,Vs],styles:[".link-to[_ngcontent-%COMP%]:hover{color:#3f51b5!important;cursor:pointer}"]}),n})();function lv(n,e){1&n&&(r.TgZ(0,"div",45),r._UZ(1,"i",46),r.TgZ(2,"span"),r._uU(3,"Non assign\xe9"),r.qZA()())}function cv(n,e){if(1&n&&(r.TgZ(0,"div",45),r._UZ(1,"i",47),r.TgZ(2,"span"),r._uU(3),r.qZA()()),2&n){const t=r.oxw();r.xp6(3),r.hij(" ",t.fiche.respControle," ")}}function dv(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"button",48),r.NdJ("click",function(){const s=r.CHM(t).$implicit,a=r.oxw();return r.KtG(a.selectResponsable(s))}),r._uU(1),r.qZA()}if(2&n){const t=e.$implicit;r.xp6(1),r.hij(" ",t," ")}}function uv(n,e){if(1&n&&(r.TgZ(0,"p"),r._uU(1),r.ALo(2,"date"),r.qZA()),2&n){const t=r.oxw();r.xp6(1),r.hij(" Date de finalisation : ",r.xi3(2,1,t.fiche.dateFinalisation,"dd/MM/YYYY")," ")}}const nu=function(n){return{"background-color":n}};function hv(n,e){if(1&n&&(r.TgZ(0,"div",49)(1,"div",50)(2,"div",51),r._uU(3),r.ALo(4,"initialName"),r.qZA(),r.TgZ(5,"div")(6,"div",52)(7,"div",53),r._uU(8),r.qZA()()()()()),2&n){const t=r.oxw();r.xp6(2),r.Q6J("ngStyle",r.VKq(7,nu,t.ficheService.genetateColorByRole(t.fiche.respControle))),r.xp6(1),r.hij(" ",r.lcZ(4,5,t.fiche.respControle)," "),r.xp6(4),r.Q6J("ngStyle",r.VKq(9,nu,t.ficheService.genetateColorByRole(t.fiche.respControle))),r.uIk("aria-valuenow",t.fiche.answeredQuestions),r.xp6(1),r.hij(" ",t.fiche.answeredQuestions," % ")}}function fv(n,e){if(1&n&&(r.TgZ(0,"p",54),r._UZ(1,"i",55),r.TgZ(2,"span",56),r._uU(3),r.ALo(4,"date"),r.qZA()()),2&n){const t=r.oxw();r.xp6(3),r.hij(" ",r.xi3(4,1,t.fiche.dateControle,"dd/MM/YYYY")," ")}}function pv(n,e){if(1&n&&(r.TgZ(0,"p",57),r._UZ(1,"i",58),r.TgZ(2,"span",56),r._uU(3),r.ALo(4,"date"),r.qZA()()),2&n){const t=r.oxw();r.xp6(3),r.hij(" ",r.xi3(4,1,t.fiche.dateDiffusion,"dd/MM/YYYY")," ")}}function mv(n,e){if(1&n&&(r.TgZ(0,"p",59),r._UZ(1,"i",60),r.TgZ(2,"span",56),r._uU(3),r.ALo(4,"date"),r.qZA()()),2&n){const t=r.oxw();r.xp6(3),r.hij(" ",r.xi3(4,1,t.fiche.dateRelecture,"dd/MM/YYYY")," ")}}function gv(n,e){if(1&n&&(r.TgZ(0,"p",61),r._UZ(1,"i",62),r.TgZ(2,"span",56),r._uU(3),r.qZA()()),2&n){const t=r.oxw();r.xp6(3),r.hij(" ",t.fiche.dureeControle," ")}}function _v(n,e){if(1&n&&(r.TgZ(0,"p",63),r._UZ(1,"i",64),r.TgZ(2,"span",56),r._uU(3),r.qZA()()),2&n){const t=r.oxw();r.xp6(3),r.hij(" ",t.fiche.respRelecture," ")}}function xv(n,e){if(1&n&&(r.TgZ(0,"p",65),r._UZ(1,"i",66),r.TgZ(2,"span",56),r._uU(3),r.qZA()()),2&n){const t=r.oxw();r.xp6(3),r.hij(" ",t.fiche.refRecueilProcedures," ")}}function bv(n,e){if(1&n&&(r.TgZ(0,"p",65),r._UZ(1,"i",66),r.TgZ(2,"span",56),r._uU(3),r.qZA()()),2&n){const t=r.oxw();r.xp6(3),r.hij(" ",t.fiche.refRecueilProcedures," ")}}function yv(n,e){if(1&n&&(r.TgZ(0,"span",69),r._uU(1),r.qZA()),2&n){const t=e.$implicit;r.xp6(1),r.Oqu(t)}}function vv(n,e){if(1&n&&(r.TgZ(0,"div",67),r.YNc(1,yv,2,1,"span",68),r.qZA()),2&n){const t=r.oxw();r.xp6(1),r.Q6J("ngForOf",t.fiche.methodControle)}}function Cv(n,e){if(1&n&&(r.TgZ(0,"mat-chip",70),r._uU(1),r.qZA()),2&n){const t=e.$implicit;r.xp6(1),r.hij(" ",t," ")}}function kv(n,e){if(1&n&&(r.TgZ(0,"div",71)(1,"div",72),r._uU(2),r.qZA()()),2&n){const t=r.oxw();r.xp6(1),r.uIk("aria-valuenow",t.fiche.answeredQuestions),r.xp6(1),r.hij(" ",t.fiche.answeredQuestions,"% ")}}function wv(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"button",73),r.NdJ("click",function(){r.CHM(t);const o=r.oxw();return r.KtG(o.validate())}),r._UZ(1,"i",74),r._uU(2," Valider "),r.qZA()}if(2&n){const t=r.oxw();r.Q6J("disabled","broadcast"!==t.fiche.status)}}function Mv(n,e){1&n&&(r.TgZ(0,"button",75),r._UZ(1,"i",74),r._uU(2," Restituer "),r.qZA())}function Tv(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"div",76)(1,"div",77)(2,"h2",44),r._uU(3),r.qZA()(),r.TgZ(4,"div",78)(5,"div",79)(6,"p",80),r._uU(7,"Libell\xe9 de la recco"),r.qZA(),r.TgZ(8,"div")(9,"mat-form-field",81)(10,"mat-label"),r._uU(11,"Libell\xe9 de la recco"),r.qZA(),r.TgZ(12,"textarea",82,83),r.NdJ("ngModelChange",function(o){const a=r.CHM(t).$implicit;return r.KtG(a.libelleReco=o)}),r.qZA()()()(),r.TgZ(14,"div",79)(15,"p",80),r._uU(16," Service en charge de la mise en oeuvre "),r.qZA(),r.TgZ(17,"div")(18,"mat-form-field",81)(19,"mat-label"),r._uU(20,"Service en charge de la mise en oeuvre"),r.qZA(),r.TgZ(21,"textarea",84,83),r.NdJ("ngModelChange",function(o){const a=r.CHM(t).$implicit;return r.KtG(a.serviceMiseEnOeuvre=o)}),r.qZA()()()(),r.TgZ(23,"div",79)(24,"p",80),r._uU(25,"D\xe9lai de mise en oeuvre"),r.qZA(),r.TgZ(26,"div")(27,"mat-form-field",81)(28,"mat-label"),r._uU(29,"D\xe9lai de mise en oeuvre"),r.qZA(),r.TgZ(30,"textarea",85,83),r.NdJ("ngModelChange",function(o){const a=r.CHM(t).$implicit;return r.KtG(a.delaiMiseEnOeuvre=o)}),r.qZA()()()(),r.TgZ(32,"p")(33,"button",86),r.NdJ("click",function(){const s=r.CHM(t).$implicit,a=r.oxw();return r.KtG(a.removeRecommandation(s))}),r._UZ(34,"i",87),r._uU(35," Supprimer "),r.qZA()()()()}if(2&n){const t=e.$implicit,i=e.index;r.xp6(3),r.hij("Recommendation ",i+1,""),r.xp6(9),r.Q6J("ngModel",t.libelleReco),r.xp6(9),r.Q6J("ngModel",t.serviceMiseEnOeuvre),r.xp6(9),r.Q6J("ngModel",t.delaiMiseEnOeuvre)}}const Sv=function(){return{name:"Conclusion",field:"conclusions"}},Av=function(){return{name:"Constats",field:"constats"}},Dv=function(){return{name:"Recommandations",field:"recommandation"}},Ov=function(n,e,t){return[n,e,t]};let Ev=(()=>{class n{constructor(t,i){this.activatedRoute=t,this.ficheService=i,this.roles=Ha,this.fiche=oi.find(o=>o.ref===this.activatedRoute.snapshot.params.ref),this.fiche.status=this.activatedRoute.snapshot.queryParams.statut,dl(this.fiche.recommandations)&&(this.fiche.recommandations=[{id:ml()}])}ngAfterViewInit(){$(".mat-mdc-tab-body-content").css("overflow","hidden")}selectResponsable(t){"notStarted"===this.fiche.status&&(this.fiche.status="inProgress"),this.fiche.respControle=t}validate(){this.fiche.status="fixed",this.fiche.dateDiffusion=(new Date).toISOString()}markAsRead(){this.fiche.status="broadcast",this.fiche.dateRelecture=(new Date).toISOString()}addRecommandation(){const t={id:ml()};this.fiche.recommandations?this.fiche.recommandations.push(t):this.fiche.recommandations=[t]}removeRecommandation(t){this.fiche.recommandations=this.fiche.recommandations?.filter(i=>String(i.id)!==String(t.id))}}return n.\u0275fac=function(t){return new(t||n)(r.Y36(be.gz),r.Y36(Bs))},n.\u0275cmp=r.Xpm({type:n,selectors:[["app-fiche-details"]],decls:58,vars:32,consts:[[2,"min-width","419px"],[2,"background-color","#f2f2f2"],[1,"d-flex","flex-row","flex-nowrap","justify-content-between","mb-4"],[1,"d-flex","flex-column","h-100"],["mat-button","",2,"width","fit-content",3,"matMenuTriggerFor"],["class","text-muted d-flex mb-2 align-items-center",4,"ngIf"],["responsableMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],["class","d-flex flex-column",4,"ngIf"],[1,"d-flex","flex-row","flex-wrap","elem-info"],["class","me-4 text-muted","matTooltip","Date de contr\xf4le",4,"ngIf"],["class","me-4 text-muted","matTooltip","Date de diffusion",4,"ngIf"],["class","me-4 text-muted","matTooltip","Date de relecture",4,"ngIf"],["class","me-4 text-muted","matTooltip","Dur\xe9e de controle",4,"ngIf"],["class","me-4 text-muted","matTooltip","R\xe9sponsable de relecture",4,"ngIf"],["class","me-4 text-muted","matTooltip","R\xe9f\xe9rence recueil de proc\xe9dures",4,"ngIf"],["class","me-4 d-flex flex-row flex-wrap",4,"ngIf"],[1,"me-4","text-muted"],[1,"bi","bi-hourglass-bottom","me-1"],[1,"text-warning","fw-bold"],[1,"d-flex","flex-row","align-items-center"],[1,"bi","bi-tags","me-4",2,"font-size","20px"],["aria-label","Dog selection",1,"me-4"],["matTooltip","R\xe9f\xe9rences r\xe9glementaires",4,"ngFor","ngForOf"],["class","progress","style","width: 350px; height: 30px",4,"ngIf"],[1,"m-3","ms-0"],["color","primary"],[1,"d-flex","flex-row","flex-wrap"],["mat-flat-button","","color","primary",1,"m-2"],[1,"bi","bi-save","me-2"],["mat-stroked-button","","color","primary","class","m-2",3,"disabled","click",4,"ngIf"],["mat-stroked-button","","color","primary","class","m-2",4,"ngIf"],["mat-button","","color","primary",1,"m-2",3,"disabled","click"],[1,"bi","bi-book","me-2"],[1,"m-4","ms-0","me-0"],["label","Conclusion / Recommendation"],[3,"fiche","respName","questions"],["label","Tableau de recommandations"],[1,"d-flex","flex-column","w-100","h-100","align-items-center"],["class","d-flex m-4 p-0 shadow-sm flex-column",4,"ngFor","ngForOf"],["mat-button","","color","primary",1,"mt-4",3,"click"],[1,"d-flex","flex-row","flex-nowrap","align-items-center"],[1,"bi","m-0","bi-plus-circle-fill","me-4",2,"font-size","20px"],[1,"m-0"],[1,"text-muted","d-flex","mb-2","align-items-center"],[1,"bi","bi-person-fill-slash","me-2",2,"font-size","20px"],[1,"bi","bi-person-fill","me-2",2,"font-size","20px"],["mat-menu-item","",3,"click"],[1,"d-flex","flex-column"],[1,"d-flex","m-1","flex-row","align-items-center"],[1,"me-2","rounded-circle","text-white","d-flex","align-items-center","justify-content-center",2,"width","40px","height","40px","font-size","15px",3,"ngStyle"],[1,"progress",2,"width","200px","height","15px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar",2,"width","25%",3,"ngStyle"],["matTooltip","Date de contr\xf4le",1,"me-4","text-muted"],[1,"bi","bi-calendar-check","me-1"],[1,"fw-light"],["matTooltip","Date de diffusion",1,"me-4","text-muted"],[1,"bi","bi-calendar","me-1"],["matTooltip","Date de relecture",1,"me-4","text-muted"],[1,"bi","bi-calendar2","me-1"],["matTooltip","Dur\xe9e de controle",1,"me-4","text-muted"],[1,"bi","bi-clock","me-1"],["matTooltip","R\xe9sponsable de relecture",1,"me-4","text-muted"],[1,"bi","bi-person","me-1"],["matTooltip","R\xe9f\xe9rence recueil de proc\xe9dures",1,"me-4","text-muted"],[1,"bi","bi-info-circle","me-1"],[1,"me-4","d-flex","flex-row","flex-wrap"],["matTooltip","M\xe9thodologie de contr\xf4le","class","rounded-pill d-flex align-items-center text-white bg-success mb-2 ps-2 pe-2 me-2",4,"ngFor","ngForOf"],["matTooltip","M\xe9thodologie de contr\xf4le",1,"rounded-pill","d-flex","align-items-center","text-white","bg-success","mb-2","ps-2","pe-2","me-2"],["matTooltip","R\xe9f\xe9rences r\xe9glementaires"],[1,"progress",2,"width","350px","height","30px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-success",2,"width","25%"],["mat-stroked-button","","color","primary",1,"m-2",3,"disabled","click"],[1,"bi","bi-check-circle","me-2"],["mat-stroked-button","","color","primary",1,"m-2"],[1,"d-flex","m-4","p-0","shadow-sm","flex-column"],[1,"mb-3","ps-3","w-100","bg-bleu","text-white"],[1,"d-flex","flex-column","p-4"],[1,"d-flex","flex-row","align-items-center","justify-content-between"],[2,"font-size","15px"],[1,"ms-4",2,"min-width","350px"],["name","libelerecco","matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5",3,"ngModel","ngModelChange"],["autosize","cdkTextareaAutosize"],["name","sercharge","matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5",3,"ngModel","ngModelChange"],["name","delaiMiseEnOeuvre","matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5",3,"ngModel","ngModelChange"],["mat-button","",1,"mt-2",3,"click"],[1,"bi","bi-trash","me-2"]],template:function(t,i){if(1&t&&(r.TgZ(0,"div",0)(1,"mat-card",1)(2,"mat-card-content")(3,"div",2)(4,"div",3)(5,"button",4),r.YNc(6,lv,4,0,"div",5),r.YNc(7,cv,4,1,"div",5),r.qZA(),r.TgZ(8,"mat-menu",null,6),r.YNc(10,dv,2,1,"button",7),r.qZA(),r.TgZ(11,"div")(12,"h2"),r._uU(13),r.qZA(),r.YNc(14,uv,3,4,"p",8),r.qZA()(),r.YNc(15,hv,9,11,"div",9),r.qZA(),r.TgZ(16,"div",10),r.YNc(17,fv,5,4,"p",11),r.YNc(18,pv,5,4,"p",12),r.YNc(19,mv,5,4,"p",13),r.YNc(20,gv,4,1,"p",14),r.YNc(21,_v,4,1,"p",15),r.YNc(22,xv,4,1,"p",16),r.YNc(23,bv,4,1,"p",16),r.YNc(24,vv,2,1,"div",17),r.TgZ(25,"p",18),r._UZ(26,"i",19),r.TgZ(27,"span",20),r._uU(28),r.qZA()()(),r.TgZ(29,"div",21),r._UZ(30,"i",22),r.TgZ(31,"mat-chip-listbox",23),r.YNc(32,Cv,2,1,"mat-chip",24),r.qZA(),r.YNc(33,kv,3,2,"div",25),r.qZA(),r.TgZ(34,"div",26)(35,"mat-checkbox",27),r._uU(36,"Afficher uniquement les questions non r\xe9pondues"),r.qZA()(),r.TgZ(37,"div",28)(38,"button",29),r._UZ(39,"i",30),r._uU(40," Enregistrer mes r\xe9ponses "),r.qZA(),r.YNc(41,wv,3,1,"button",31),r.YNc(42,Mv,3,0,"button",32),r.TgZ(43,"button",33),r.NdJ("click",function(){return i.markAsRead()}),r._UZ(44,"i",34),r._uU(45," Marquer comme relue "),r.qZA()()()(),r.TgZ(46,"div",35)(47,"mat-tab-group")(48,"mat-tab",36),r._UZ(49,"app-question-card",37),r.qZA(),r.TgZ(50,"mat-tab",38)(51,"div",39),r.YNc(52,Tv,36,4,"div",40),r.TgZ(53,"button",41),r.NdJ("click",function(){return i.addRecommandation()}),r.TgZ(54,"div",42),r._UZ(55,"i",43),r.TgZ(56,"p",44),r._uU(57,"Ajouter une recommandations"),r.qZA()()()()()()()()),2&t){const o=r.MAs(9);r.xp6(5),r.Q6J("matMenuTriggerFor",o),r.xp6(1),r.Q6J("ngIf",!i.fiche.respControle),r.xp6(1),r.Q6J("ngIf",i.fiche.respControle),r.xp6(3),r.Q6J("ngForOf",i.roles),r.xp6(3),r.hij(" ",i.fiche.name," "),r.xp6(1),r.Q6J("ngIf",i.fiche.dateFinalisation),r.xp6(1),r.Q6J("ngIf",i.fiche.respControle),r.xp6(2),r.Q6J("ngIf",i.fiche.dateControle),r.xp6(1),r.Q6J("ngIf",i.fiche.dateDiffusion),r.xp6(1),r.Q6J("ngIf",i.fiche.dateRelecture),r.xp6(1),r.Q6J("ngIf",i.fiche.dureeControle),r.xp6(1),r.Q6J("ngIf",i.fiche.respRelecture),r.xp6(1),r.Q6J("ngIf",i.fiche.refRecueilProcedures),r.xp6(1),r.Q6J("ngIf",i.fiche.refRecueilProcedures),r.xp6(1),r.Q6J("ngIf",i.fiche.methodControle),r.xp6(4),r.hij("",i.fiche.answeredQuestions,"/150 Questions r\xe9pondues"),r.xp6(4),r.Q6J("ngForOf",i.fiche.refReglementaire),r.xp6(1),r.Q6J("ngIf",i.fiche.respControle),r.xp6(8),r.Q6J("ngIf","fixed"!==i.fiche.status),r.xp6(1),r.Q6J("ngIf","fixed"===i.fiche.status),r.xp6(1),r.Q6J("disabled","onHold"!==i.fiche.status),r.xp6(6),r.Q6J("fiche",i.fiche)("respName",i.fiche.respControle)("questions",r.kEZ(28,Ov,r.DdM(25,Sv),r.DdM(26,Av),r.DdM(27,Dv))),r.xp6(3),r.Q6J("ngForOf",i.fiche.recommandations)}},dependencies:[It.lW,J.a8,J.dn,$_.oG,se.HS,se.z2,Es.Nt,ye.KE,ye.hX,Q_.IC,kn.VK,kn.OP,kn.p6,gl.uX,gl.SP,Je.gM,R.Fj,R.JJ,R.On,O.sg,O.O5,O.PC,av,Vs,O.uU],styles:[".elem-info[_ngcontent-%COMP%]{cursor:pointer!important}.mat-mdc-tab-body-content[_ngcontent-%COMP%]{overflow:hidden!important}"]}),n})();function Nv(n,e){1&n&&(r.TgZ(0,"th",20),r._uU(1,"R\xe9f\xe9rence"),r.qZA())}function Iv(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"td",21),r.NdJ("click",function(){const s=r.CHM(t).$implicit,a=r.oxw();return r.KtG(a.displayElements(s))}),r.TgZ(1,"div"),r._uU(2),r.qZA()()}if(2&n){const t=e.$implicit;r.xp6(2),r.Oqu(t.ref)}}function Pv(n,e){1&n&&(r.TgZ(0,"th",20),r._uU(1,"Responsable"),r.qZA())}function Rv(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"td",21),r.NdJ("click",function(){const s=r.CHM(t).$implicit,a=r.oxw();return r.KtG(a.displayElements(s))}),r.TgZ(1,"div"),r._uU(2),r.qZA()()}if(2&n){const t=e.$implicit;r.xp6(2),r.Oqu(t.responsable)}}function Fv(n,e){1&n&&(r.TgZ(0,"th",20),r._uU(1,"Fr\xe9quence"),r.qZA())}function Zv(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"td",21),r.NdJ("click",function(){const s=r.CHM(t).$implicit,a=r.oxw();return r.KtG(a.displayElements(s))}),r.TgZ(1,"div"),r._uU(2),r.qZA()()}if(2&n){const t=e.$implicit;r.xp6(2),r.Oqu(t.frequence)}}function Lv(n,e){1&n&&(r.TgZ(0,"th",20),r._uU(1,"Th\xe8me"),r.qZA())}function qv(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"td",21),r.NdJ("click",function(){const s=r.CHM(t).$implicit,a=r.oxw();return r.KtG(a.displayElements(s))}),r.TgZ(1,"div"),r._uU(2),r.qZA()()}if(2&n){const t=e.$implicit;r.xp6(2),r.Oqu(t.theme)}}function zv(n,e){1&n&&(r.TgZ(0,"th",20),r._uU(1,"Risques"),r.qZA())}function Bv(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"td",21),r.NdJ("click",function(){const s=r.CHM(t).$implicit,a=r.oxw();return r.KtG(a.displayElements(s))}),r.TgZ(1,"div"),r._uU(2),r.qZA()()}if(2&n){const t=e.$implicit;r.xp6(2),r.Oqu(t.risque)}}function Vv(n,e){1&n&&r._UZ(0,"tr",22)}function Uv(n,e){1&n&&r._UZ(0,"tr",23)}function Hv(n,e){if(1&n&&(r.TgZ(0,"tr",24)(1,"td",25),r._uU(2),r.qZA()()),2&n){r.oxw();const t=r.MAs(7);r.xp6(2),r.hij(' Pas de donn\xe9es \xe0 correspondant \xe0 la recherche "',t.value,'" ')}}function jv(n,e){if(1&n&&(r.TgZ(0,"div"),r._uU(1),r.qZA()),2&n){const t=e.$implicit;r.xp6(1),r.hij("- ",t,"")}}function Jv(n,e){if(1&n&&(r.TgZ(0,"div",39),r._UZ(1,"span",40),r._uU(2),r.qZA()),2&n){const t=e.$implicit;r.xp6(2),r.hij(" ",t," ")}}function Yv(n,e){1&n&&(r.TgZ(0,"div",41),r._UZ(1,"span",42),r._uU(2," Aucun fichier pour le moment "),r.qZA())}function Wv(n,e){if(1&n&&(r.TgZ(0,"span",43)(1,"mat-chip",44),r._uU(2),r.qZA()()),2&n){const t=e.$implicit;r.xp6(2),r.hij("",t," ")}}function $v(n,e){if(1&n&&(r.TgZ(0,"div",26)(1,"mat-card",27)(2,"mat-card-header",28)(3,"h2"),r._uU(4),r.qZA()(),r.TgZ(5,"mat-card-content")(6,"div",29)(7,"span",30),r._UZ(8,"span",31),r._uU(9,"Constats :"),r.qZA(),r.YNc(10,jv,2,1,"div",32),r.qZA(),r.TgZ(11,"div",29)(12,"span",33),r._UZ(13,"span",34),r._uU(14,"Fichiers :"),r.qZA(),r.TgZ(15,"div"),r.YNc(16,Jv,3,1,"div",35),r._UZ(17,"br"),r.YNc(18,Yv,3,0,"div",36),r.qZA()(),r.TgZ(19,"div")(20,"span",33),r._UZ(21,"span",37),r._uU(22,"Intervenants :"),r.qZA(),r._UZ(23,"br"),r.YNc(24,Wv,3,1,"span",38),r.qZA()()(),r._UZ(25,"div"),r.qZA()),2&n){const t=r.oxw();r.xp6(4),r.AsE("",t.reference," - ",t.theme,""),r.xp6(6),r.Q6J("ngForOf",t.constats),r.xp6(6),r.Q6J("ngForOf",t.fichiers),r.xp6(2),r.Q6J("ngIf",!t.fichiers),r.xp6(6),r.Q6J("ngForOf",t.intervenants)}}const Qv=function(){return[5,10,20]};let Kv=(()=>{class n{ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}constructor(t){this.data=io,this.displayedColumns=["ref","frequence","responsable","theme","risque"],this.dataSource=new E.by(io),this.reference="",this.theme="",this.isDisplayed=!1}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}displayElements(t){this.isDisplayed=!0,this.reference=t.ref,this.theme=t.theme,this.constats=t.constats,this.fichiers=t.fichiers,this.intervenants=t.intervenants}}return n.\u0275fac=function(t){return new(t||n)(r.Y36(Ds.uw))},n.\u0275cmp=r.Xpm({type:n,selectors:[["app-recommandations"]],viewQuery:function(t,i){if(1&t&&(r.Gf(ve.NW,5),r.Gf(Pt.YE,5)),2&t){let o;r.iGM(o=r.CRH())&&(i.paginator=o.first),r.iGM(o=r.CRH())&&(i.sort=o.first)}},decls:31,vars:6,consts:[[1,"d-flex"],[1,"d-flex","w-100","justify-content-center"],["id","search-link",1,"w-50"],["type","text","id","formGroupExampleInput2","placeholder","Rechercher...",1,"form-control",3,"keyup"],["input",""],[1,"animate__animated","animate__slideInLeft","container-fluid","mt-5"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","ref"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","matTooltip","Cliquez pour afficher les d\xe9tails",3,"click",4,"matCellDef"],["matColumnDef","responsable"],["matColumnDef","frequence"],["matColumnDef","theme"],["matColumnDef","risque"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","id","display-details-link",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["class","w-50 ms-5",4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell","","matTooltip","Cliquez pour afficher les d\xe9tails",3,"click"],["mat-header-row",""],["mat-row","","id","display-details-link"],[1,"mat-row"],["colspan","4",1,"mat-cell","p-4"],[1,"w-50","ms-5"],[2,"min-height","80vh"],[1,"justify-content-center","mb-2"],[1,"mb-4"],[1,"fw-bold","me-5"],[1,"me-2","bi","bi-file-earmark-text-fill",2,"color","green"],[4,"ngFor","ngForOf"],[1,"fw-bold"],[1,"me-2","bi","bi-folder-fill",2,"color","green"],["class","p-2 mt-2 text-secondary","style","border-radius: 3px; border: 1px solid rgb(125, 125, 240);",4,"ngFor","ngForOf"],["class","p-2 mt-2 text-secondary fw-bold","style","border-radius: 3px; border: 1px solid rgb(241, 74, 59);",4,"ngIf"],[1,"me-2","bi","bi-person-fill",2,"color","green"],["class","text-secondary",4,"ngFor","ngForOf"],[1,"p-2","mt-2","text-secondary",2,"border-radius","3px","border","1px solid rgb(125, 125, 240)"],[1,"bi","bi-file-earmark-text-fill","text-primary","me-2"],[1,"p-2","mt-2","text-secondary","fw-bold",2,"border-radius","3px","border","1px solid rgb(241, 74, 59)"],[1,"bi","bi-file-earmark-excel-fill","me-2","text-danger"],[1,"text-secondary"],[1,"m-2","p-2","text-muted","bg-warning",2,"background-color","blue"]],template:function(t,i){1&t&&(r.TgZ(0,"h3"),r._uU(1,"Recommandations"),r.qZA(),r.TgZ(2,"div",0)(3,"div")(4,"div",1)(5,"div",2)(6,"input",3,4),r.NdJ("keyup",function(s){return i.applyFilter(s)}),r.qZA()()(),r.TgZ(8,"div",5)(9,"div",6)(10,"table",7),r.ynx(11,8),r.YNc(12,Nv,2,0,"th",9),r.YNc(13,Iv,3,1,"td",10),r.BQk(),r.ynx(14,11),r.YNc(15,Pv,2,0,"th",9),r.YNc(16,Rv,3,1,"td",10),r.BQk(),r.ynx(17,12),r.YNc(18,Fv,2,0,"th",9),r.YNc(19,Zv,3,1,"td",10),r.BQk(),r.ynx(20,13),r.YNc(21,Lv,2,0,"th",9),r.YNc(22,qv,3,1,"td",10),r.BQk(),r.ynx(23,14),r.YNc(24,zv,2,0,"th",9),r.YNc(25,Bv,3,1,"td",10),r.BQk(),r.YNc(26,Vv,1,0,"tr",15),r.YNc(27,Uv,1,0,"tr",16),r.YNc(28,Hv,3,1,"tr",17),r.qZA(),r._UZ(29,"mat-paginator",18),r.qZA()()(),r.YNc(30,$v,26,6,"div",19),r.qZA()),2&t&&(r.xp6(10),r.Q6J("dataSource",i.dataSource),r.xp6(16),r.Q6J("matHeaderRowDef",i.displayedColumns),r.xp6(1),r.Q6J("matRowDefColumns",i.displayedColumns),r.xp6(2),r.Q6J("pageSizeOptions",r.DdM(5,Qv)),r.xp6(1),r.Q6J("ngIf",i.isDisplayed))},dependencies:[J.a8,J.dn,J.dk,se.HS,ve.NW,Pt.YE,Pt.nU,E.BZ,E.fO,E.as,E.w1,E.Dz,E.nj,E.ge,E.ev,E.XQ,E.Gk,E.Ee,Je.gM,O.sg,O.O5]}),n})();const iu=[{firstname:"Ga\xeblle",lastname:"Petrovich",email:"petrovich@yopmail.com",role:"Admin"},{firstname:"Pierre",lastname:"Xiaomi",email:"xiaomi@yopmail.com",role:"RCCI"},{firstname:"Fran\xe7ois",lastname:"Morgan",email:"morg@yopmail.com",role:"Manager"},{firstname:"Linah",lastname:"Vienne",email:"livienne@yopmail.com",role:"Junior"},{firstname:"Abdallah",lastname:"Akim",email:"akim@yopmail.com",role:"Chef de mission"},{firstname:"Christiano",lastname:"Ronaldo",email:"ronaldo@yopmail.com",role:"Contributeur"}];function Gv(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"mat-card",29)(1,"mat-card-header")(2,"mat-card-title")(3,"mat-chip"),r._uU(4),r.qZA()()(),r.TgZ(5,"mat-card-content",30)(6,"p")(7,"span",31),r._uU(8,"Nom"),r.qZA(),r._uU(9),r.qZA(),r.TgZ(10,"p")(11,"span",31),r._uU(12,"Pr\xe9nom"),r.qZA(),r._uU(13),r.qZA(),r.TgZ(14,"p")(15,"span",31),r._uU(16,"Email"),r.qZA(),r._uU(17),r.qZA()(),r.TgZ(18,"mat-card-actions",32)(19,"div",33)(20,"button",34)(21,"div",35),r._UZ(22,"i",36),r.qZA()(),r.TgZ(23,"button",37),r.NdJ("click",function(){const s=r.CHM(t).$implicit,a=r.oxw(2);return r.KtG(a.desactive(s))}),r.TgZ(24,"div",35),r._UZ(25,"i",38),r.qZA()()()()()}if(2&n){const t=e.$implicit;r.xp6(4),r.Oqu(t.role),r.xp6(5),r.hij(" : ",t.firstname,""),r.xp6(4),r.hij(" : ",t.lastname,""),r.xp6(4),r.hij(" : ",t.email,"")}}function Xv(n,e){if(1&n&&(r.TgZ(0,"div",26)(1,"div",27),r.YNc(2,Gv,26,4,"mat-card",28),r.qZA()()),2&n){const t=r.oxw();r.xp6(2),r.Q6J("ngForOf",t.dataSource.filteredData)}}function tC(n,e){1&n&&(r.TgZ(0,"th",39),r._uU(1,"Nom"),r.qZA())}function eC(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"td",40),r.NdJ("click",function(){const s=r.CHM(t).$implicit,a=r.oxw();return r.KtG(a.openRef=s.firstname)}),r.TgZ(1,"div"),r._uU(2),r.qZA()()}if(2&n){const t=e.$implicit;r.xp6(2),r.Oqu(t.firstname)}}function nC(n,e){1&n&&(r.TgZ(0,"th",39),r._uU(1,"Pr\xe9nom"),r.qZA())}function iC(n,e){if(1&n&&(r.TgZ(0,"div"),r._uU(1),r.qZA()),2&n){const t=r.oxw().$implicit;r.xp6(1),r.Oqu(t.lastname)}}function oC(n,e){1&n&&(r.TgZ(0,"div")(1,"div",42),r._UZ(2,"i",43),r.TgZ(3,"span"),r._uU(4,"Modifier"),r.qZA()()())}function sC(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"td",40),r.NdJ("click",function(){const s=r.CHM(t).$implicit,a=r.oxw();return r.KtG(a.openRef=s.firstname)}),r.YNc(1,iC,2,1,"div",41),r.YNc(2,oC,5,0,"div",41),r.qZA()}if(2&n){const t=e.$implicit,i=r.oxw();r.xp6(1),r.Q6J("ngIf",i.openRef!==t.firstname),r.xp6(1),r.Q6J("ngIf",i.openRef===t.firstname)}}function rC(n,e){1&n&&(r.TgZ(0,"th",39),r._uU(1,"Email"),r.qZA())}function aC(n,e){if(1&n&&(r.TgZ(0,"div"),r._uU(1),r.qZA()),2&n){const t=r.oxw().$implicit;r.xp6(1),r.Oqu(t.email)}}function lC(n,e){1&n&&r._UZ(0,"div")}function cC(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"td",40),r.NdJ("click",function(){const s=r.CHM(t).$implicit,a=r.oxw();return r.KtG(a.openRef=s.firstname)}),r.YNc(1,aC,2,1,"div",41),r.YNc(2,lC,1,0,"div",41),r.qZA()}if(2&n){const t=e.$implicit,i=r.oxw();r.xp6(1),r.Q6J("ngIf",i.openRef!==t.firstname),r.xp6(1),r.Q6J("ngIf",i.openRef===t.firstname)}}function dC(n,e){1&n&&(r.TgZ(0,"th",39),r._uU(1,"Role"),r.qZA())}function uC(n,e){if(1&n&&(r.TgZ(0,"div"),r._uU(1),r.qZA()),2&n){const t=r.oxw().$implicit;r.xp6(1),r.Oqu(t.role)}}function hC(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"div")(1,"div",44),r.NdJ("click",function(){r.CHM(t);const o=r.oxw().$implicit,s=r.oxw();return r.KtG(s.desactive(o))}),r._UZ(2,"i",38),r.TgZ(3,"span"),r._uU(4,"D\xe9sactiver"),r.qZA()()()}}function fC(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"td",40),r.NdJ("click",function(){const s=r.CHM(t).$implicit,a=r.oxw();return r.KtG(a.openRef=s.firstname)}),r.YNc(1,uC,2,1,"div",41),r.YNc(2,hC,5,0,"div",41),r.qZA()}if(2&n){const t=e.$implicit,i=r.oxw();r.xp6(1),r.Q6J("ngIf",i.openRef!==t.firstname),r.xp6(1),r.Q6J("ngIf",i.openRef===t.firstname)}}function pC(n,e){1&n&&r._UZ(0,"tr",45)}function mC(n,e){1&n&&r._UZ(0,"tr",46)}function gC(n,e){if(1&n&&(r.TgZ(0,"tr",47)(1,"td",48),r._uU(2),r.qZA()()),2&n){r.oxw();const t=r.MAs(11);r.xp6(2),r.hij(' Pas de donn\xe9es \xe0 correspondant \xe0 la recherche "',t.value,'" ')}}const _C=function(n){return{display:n}},xC=function(){return[5,10,20]};let bC=(()=>{class n{ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}constructor(t){this.dialog=t,this.data=iu,this.isList=!0,this.displayedColumns=["firstname","lastname","email","role"],this.dataSource=new E.by(iu)}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}desactive(t){return(0,no.Z)(function*(){yield ii().fire({text:`Voullez vous vraiment d\xe9sactiver ${t.firstname} ${t.lastname} ?`,icon:"question",showConfirmButton:!0,showDenyButton:!0})})()}sendInvitation(){return(0,no.Z)(function*(){yield ii().fire({title:"Envoyer une invitation",input:"text",inputLabel:"Email",inputValue:"",inputPlaceholder:"Email ...",confirmButtonText:"Envoyer",showLoaderOnConfirm:!0}),yield ii().fire({icon:"success",text:"Invitation envoy\xe9 avec succes"})})()}}return n.\u0275fac=function(t){return new(t||n)(r.Y36(Ds.uw))},n.\u0275cmp=r.Xpm({type:n,selectors:[["app-liste-membres"]],viewQuery:function(t,i){if(1&t&&(r.Gf(ve.NW,5),r.Gf(Pt.YE,5)),2&t){let o;r.iGM(o=r.CRH())&&(i.paginator=o.first),r.iGM(o=r.CRH())&&(i.sort=o.first)}},decls:40,vars:11,consts:[[1,"d-flex","m-4","justify-content-center"],["role","link","mat-stroked-button","","color","primary","id","send-link",3,"click"],[1,"d-flex","align-items-center"],[1,"bi","bi-send","ms-2"],[1,"d-flex","w-100","justify-content-center"],["id","search-link",1,"w-50"],["type","text","id","formGroupExampleInput2","placeholder","Rechercher...",1,"form-control",3,"keyup"],["input",""],[1,"d-flex","justify-content-center","m-4"],["id","display-change",1,"d-flex","justify-content-center"],["mat-icon-button","","matTooltip","Listes","id","mode-list-link",3,"color","click"],["mat-icon-button","","matTooltip","Vignette","id","mode-vignette-link",3,"color","click"],["class","animate__animated animate__slideInLeft container-fluid",4,"ngIf"],[1,"animate__animated","animate__slideInLeft","container-fluid",3,"ngStyle"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","firstname"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","lastname"],["matColumnDef","email"],["matColumnDef","role"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","id","menu-link",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],[1,"animate__animated","animate__slideInLeft","container-fluid"],[1,"d-flex","flex-row","flex-wrap","justify-content-center"],["class","m-3 justify-content-between","style","max-width: 250px; min-width: 300px",4,"ngFor","ngForOf"],[1,"m-3","justify-content-between",2,"max-width","250px","min-width","300px"],[1,"mt-2"],[1,"fw-bold"],[1,"justify-content-center"],[1,"d-flex","flex-row","align-items-center","flex-nowrap","border-top"],["mat-button","","matTooltip","Modifier",1,"mt-2","mb-2"],[1,"d-flex","flex-column","justify-content-center",2,"font-size","20px"],[1,"bi","text-primary","bi-pen","m-1"],["mat-button","","matTooltip","D\xe9sactiver",1,"mt-2","mb-2",3,"click"],[1,"bi","bi-lock","m-1"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",3,"click"],[4,"ngIf"],["role","button",1,"menu-btn"],[1,"bi","bi-pen","m-1"],["role","button",1,"menu-btn",3,"click"],["mat-header-row",""],["mat-row","","id","menu-link"],[1,"mat-row"],["colspan","4",1,"mat-cell","p-4"]],template:function(t,i){1&t&&(r.TgZ(0,"h3"),r._uU(1,"Liste des membres"),r.qZA(),r.TgZ(2,"div",0)(3,"button",1),r.NdJ("click",function(){return i.sendInvitation()}),r.TgZ(4,"span",2)(5,"span"),r._uU(6,"Envoyer une invitation \xe0 un nouveau membre"),r.qZA(),r._UZ(7,"i",3),r.qZA()()(),r.TgZ(8,"div",4)(9,"div",5)(10,"input",6,7),r.NdJ("keyup",function(s){return i.applyFilter(s)}),r.qZA()()(),r.TgZ(12,"div",8)(13,"div",9)(14,"button",10),r.NdJ("click",function(){return i.isList=!0}),r.TgZ(15,"mat-icon"),r._uU(16,"list"),r.qZA()(),r.TgZ(17,"button",11),r.NdJ("click",function(){return i.isList=!1}),r.TgZ(18,"mat-icon"),r._uU(19,"grid_on"),r.qZA()()()(),r.YNc(20,Xv,3,1,"div",12),r.TgZ(21,"div",13)(22,"div",14)(23,"table",15),r.ynx(24,16),r.YNc(25,tC,2,0,"th",17),r.YNc(26,eC,3,1,"td",18),r.BQk(),r.ynx(27,19),r.YNc(28,nC,2,0,"th",17),r.YNc(29,sC,3,2,"td",18),r.BQk(),r.ynx(30,20),r.YNc(31,rC,2,0,"th",17),r.YNc(32,cC,3,2,"td",18),r.BQk(),r.ynx(33,21),r.YNc(34,dC,2,0,"th",17),r.YNc(35,fC,3,2,"td",18),r.BQk(),r.YNc(36,pC,1,0,"tr",22),r.YNc(37,mC,1,0,"tr",23),r.YNc(38,gC,3,1,"tr",24),r.qZA(),r._UZ(39,"mat-paginator",25),r.qZA()()),2&t&&(r.xp6(14),r.Q6J("color",i.isList?"primary":""),r.xp6(3),r.Q6J("color",i.isList?"":"primary"),r.xp6(3),r.Q6J("ngIf",!i.isList),r.xp6(1),r.Q6J("ngStyle",r.VKq(8,_C,i.isList?"block":"none")),r.xp6(2),r.Q6J("dataSource",i.dataSource),r.xp6(13),r.Q6J("matHeaderRowDef",i.displayedColumns),r.xp6(1),r.Q6J("matRowDefColumns",i.displayedColumns),r.xp6(2),r.Q6J("pageSizeOptions",r.DdM(10,xC)))},dependencies:[It.lW,It.RK,J.a8,J.hq,J.dn,J.dk,J.n5,se.HS,Os.Hw,ve.NW,Pt.YE,Pt.nU,E.BZ,E.fO,E.as,E.w1,E.Dz,E.nj,E.ge,E.ev,E.XQ,E.Gk,E.Ee,Je.gM,O.sg,O.O5,O.PC]}),n})();const yC=[{path:"",component:Vf.C,children:[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:Kf},{path:"fiches-vierges",component:Np},{path:"planning-de-controle",component:j_},{path:"fiche/:ref/details",component:Ev},{path:"fiches",component:mm},{path:"documents/add",component:Zp},{path:"rapport",component:Lp},{path:"recommandation",component:Kv},{path:"membres",component:bC}]}];let vC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({imports:[be.Bz.forChild(yC),be.Bz]}),n})();function Si(n){return(Si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function T(n,e,t){return(e=function kC(n){var e=function CC(n,e){if("object"!==Si(n)||null===n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var i=t.call(n,e||"default");if("object"!==Si(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"===Si(e)?e:String(e)}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Un(n){return n+.5|0}const ue=(n,e,t)=>Math.max(Math.min(n,t),e);function Ai(n){return ue(Un(2.55*n),0,255)}function Ze(n){return ue(Un(255*n),0,255)}function he(n){return ue(Un(n/2.55)/100,0,1)}function ou(n){return ue(Un(100*n),0,100)}const qt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},$r=[..."0123456789ABCDEF"],wC=n=>$r[15&n],MC=n=>$r[(240&n)>>4]+$r[15&n],Uo=n=>(240&n)>>4==(15&n);const OC=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function su(n,e,t){const i=e*Math.min(t,1-t),o=(s,a=(s+n/30)%12)=>t-i*Math.max(Math.min(a-3,9-a,1),-1);return[o(0),o(8),o(4)]}function EC(n,e,t){const i=(o,s=(o+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function NC(n,e,t){const i=su(n,1,.5);let o;for(e+t>1&&(o=1/(e+t),e*=o,t*=o),o=0;o<3;o++)i[o]*=1-e-t,i[o]+=e;return i}function Qr(n){const t=n.r/255,i=n.g/255,o=n.b/255,s=Math.max(t,i,o),a=Math.min(t,i,o),l=(s+a)/2;let c,d,u;return s!==a&&(u=s-a,d=l>.5?u/(2-s-a):u/(s+a),c=function IC(n,e,t,i,o){return n===o?(e-t)/i+(e<t?6:0):e===o?(t-n)/i+2:(n-e)/i+4}(t,i,o,u,s),c=60*c+.5),[0|c,d||0,l]}function Kr(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(Ze)}function Gr(n,e,t){return Kr(su,n,e,t)}function ru(n){return(n%360+360)%360}const au={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},lu={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Ho;const BC=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,Xr=n=>n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055,Hn=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function jo(n,e,t){if(n){let i=Qr(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,0===e?360:1)),i=Gr(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function cu(n,e){return n&&Object.assign(e||{},n)}function du(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Ze(n[3]))):(e=cu(n,{r:0,g:0,b:0,a:1})).a=Ze(e.a),e}function jC(n){return"r"===n.charAt(0)?function VC(n){const e=BC.exec(n);let i,o,s,t=255;if(e){if(e[7]!==i){const a=+e[7];t=e[8]?Ai(a):ue(255*a,0,255)}return i=+e[1],o=+e[3],s=+e[5],i=255&(e[2]?Ai(i):ue(i,0,255)),o=255&(e[4]?Ai(o):ue(o,0,255)),s=255&(e[6]?Ai(s):ue(s,0,255)),{r:i,g:o,b:s,a:t}}}(n):function FC(n){const e=OC.exec(n);let i,t=255;if(!e)return;e[5]!==i&&(t=e[6]?Ai(+e[5]):Ze(+e[5]));const o=ru(+e[2]),s=+e[3]/100,a=+e[4]/100;return i="hwb"===e[1]?function PC(n,e,t){return Kr(NC,n,e,t)}(o,s,a):"hsv"===e[1]?function RC(n,e,t){return Kr(EC,n,e,t)}(o,s,a):Gr(o,s,a),{r:i[0],g:i[1],b:i[2],a:t}}(n)}class jn{constructor(e){if(e instanceof jn)return e;const t=typeof e;let i;"object"===t?i=du(e):"string"===t&&(i=function SC(n){var t,e=n.length;return"#"===n[0]&&(4===e||5===e?t={r:255&17*qt[n[1]],g:255&17*qt[n[2]],b:255&17*qt[n[3]],a:5===e?17*qt[n[4]]:255}:(7===e||9===e)&&(t={r:qt[n[1]]<<4|qt[n[2]],g:qt[n[3]]<<4|qt[n[4]],b:qt[n[5]]<<4|qt[n[6]],a:9===e?qt[n[7]]<<4|qt[n[8]]:255})),t}(e)||function zC(n){Ho||(Ho=function qC(){const n={},e=Object.keys(lu),t=Object.keys(au);let i,o,s,a,l;for(i=0;i<e.length;i++){for(a=l=e[i],o=0;o<t.length;o++)s=t[o],l=l.replace(s,au[s]);s=parseInt(lu[a],16),n[l]=[s>>16&255,s>>8&255,255&s]}return n}(),Ho.transparent=[0,0,0,0]);const e=Ho[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}(e)||jC(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=cu(this._rgb);return e&&(e.a=he(e.a)),e}set rgb(e){this._rgb=du(e)}rgbString(){return this._valid?function UC(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${he(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}(this._rgb):void 0}hexString(){return this._valid?function DC(n){var e=(n=>Uo(n.r)&&Uo(n.g)&&Uo(n.b)&&Uo(n.a))(n)?wC:MC;return n?"#"+e(n.r)+e(n.g)+e(n.b)+((n,e)=>n<255?e(n):"")(n.a,e):void 0}(this._rgb):void 0}hslString(){return this._valid?function LC(n){if(!n)return;const e=Qr(n),t=e[0],i=ou(e[1]),o=ou(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${o}%, ${he(n.a)})`:`hsl(${t}, ${i}%, ${o}%)`}(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,o=e.rgb;let s;const a=t===s?.5:t,l=2*a-1,c=i.a-o.a,d=((l*c==-1?l:(l+c)/(1+l*c))+1)/2;s=1-d,i.r=255&d*i.r+s*o.r+.5,i.g=255&d*i.g+s*o.g+.5,i.b=255&d*i.b+s*o.b+.5,i.a=a*i.a+(1-a)*o.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=function HC(n,e,t){const i=Hn(he(n.r)),o=Hn(he(n.g)),s=Hn(he(n.b));return{r:Ze(Xr(i+t*(Hn(he(e.r))-i))),g:Ze(Xr(o+t*(Hn(he(e.g))-o))),b:Ze(Xr(s+t*(Hn(he(e.b))-s))),a:n.a+t*(e.a-n.a)}}(this._rgb,e._rgb,t)),this}clone(){return new jn(this.rgb)}alpha(e){return this._rgb.a=Ze(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=Un(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return jo(this._rgb,2,e),this}darken(e){return jo(this._rgb,2,-e),this}saturate(e){return jo(this._rgb,1,e),this}desaturate(e){return jo(this._rgb,1,-e),this}rotate(e){return function ZC(n,e){var t=Qr(n);t[0]=ru(t[0]+e),t=Gr(t),n.r=t[0],n.g=t[1],n.b=t[2]}(this._rgb,e),this}}function fe(){}const JC=(()=>{let n=0;return()=>n++})();function B(n){return null===n||typeof n>"u"}function Q(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function L(n){return null!==n&&"[object Object]"===Object.prototype.toString.call(n)}function et(n){return("number"==typeof n||n instanceof Number)&&isFinite(+n)}function Ot(n,e){return et(n)?n:e}function F(n,e){return typeof n>"u"?e:n}const uu=(n,e)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100*e:+n;function Y(n,e,t){if(n&&"function"==typeof n.call)return n.apply(t,e)}function V(n,e,t,i){let o,s,a;if(Q(n))if(s=n.length,i)for(o=s-1;o>=0;o--)e.call(t,n[o],o);else for(o=0;o<s;o++)e.call(t,n[o],o);else if(L(n))for(a=Object.keys(n),s=a.length,o=0;o<s;o++)e.call(t,n[a[o]],a[o])}function Jo(n,e){let t,i,o,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(o=n[t],s=e[t],o.datasetIndex!==s.datasetIndex||o.index!==s.index)return!1;return!0}function Yo(n){if(Q(n))return n.map(Yo);if(L(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let o=0;for(;o<i;++o)e[t[o]]=Yo(n[t[o]]);return e}return n}function hu(n){return-1===["__proto__","prototype","constructor"].indexOf(n)}function WC(n,e,t,i){if(!hu(n))return;const o=e[n],s=t[n];L(o)&&L(s)?Di(o,s,i):e[n]=Yo(s)}function Di(n,e,t){const i=Q(e)?e:[e],o=i.length;if(!L(n))return n;const s=(t=t||{}).merger||WC;let a;for(let l=0;l<o;++l){if(a=i[l],!L(a))continue;const c=Object.keys(a);for(let d=0,u=c.length;d<u;++d)s(c[d],n,a,t)}return n}function Oi(n,e){return Di(n,e,{merger:$C})}function $C(n,e,t){if(!hu(n))return;const i=e[n],o=t[n];L(i)&&L(o)?Oi(i,o):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Yo(o))}const fu={"":n=>n,x:n=>n.x,y:n=>n.y};function Le(n,e){return(fu[e]||(fu[e]=function KC(n){const e=function QC(n){const e=n.split("."),t=[];let i="";for(const o of e)i+=o,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}(n);return t=>{for(const i of e){if(""===i)break;t=t&&t[i]}return t}}(e)))(n)}function ta(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Ei=n=>typeof n<"u",qe=n=>"function"==typeof n,pu=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0},G=Math.PI,K=2*G,XC=K+G,Wo=Number.POSITIVE_INFINITY,tk=G/180,nt=G/2,hn=G/4,mu=2*G/3,ze=Math.log10,ne=Math.sign;function Ni(n,e,t){return Math.abs(n-e)<t}function gu(n){const e=Math.round(n);n=Ni(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(ze(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function Jn(n){return!isNaN(parseFloat(n))&&isFinite(n)}function _u(n,e,t){let i,o,s;for(i=0,o=n.length;i<o;i++)s=n[i][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Ht(n){return n*(G/180)}function ea(n){return n*(180/G)}function xu(n){if(!et(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function bu(n,e){const t=e.x-n.x,i=e.y-n.y,o=Math.sqrt(t*t+i*i);let s=Math.atan2(i,t);return s<-.5*G&&(s+=K),{angle:s,distance:o}}function na(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function ik(n,e){return(n-e+XC)%K-G}function Et(n){return(n%K+K)%K}function Ii(n,e,t,i){const o=Et(n),s=Et(e),a=Et(t),l=Et(s-o),c=Et(a-o),d=Et(o-s),u=Et(o-a);return o===s||o===a||i&&s===a||l>c&&d<u}function at(n,e,t){return Math.max(e,Math.min(t,n))}function pe(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function ia(n,e,t){t=t||(a=>n[a]<e);let s,i=n.length-1,o=0;for(;i-o>1;)s=o+i>>1,t(s)?o=s:i=s;return{lo:o,hi:i}}const me=(n,e,t,i)=>ia(n,t,i?o=>{const s=n[o][e];return s<t||s===t&&n[o+1][e]===t}:o=>n[o][e]<t),sk=(n,e,t)=>ia(n,t,i=>n[i][e]>=t),yu=["push","pop","shift","splice","unshift"];function vu(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,o=i.indexOf(e);-1!==o&&i.splice(o,1),!(i.length>0)&&(yu.forEach(s=>{delete n[s]}),delete n._chartjs)}function Cu(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const ku=typeof window>"u"?function(n){return n()}:window.requestAnimationFrame;function wu(n,e){let t=[],i=!1;return function(...o){t=o,i||(i=!0,ku.call(window,()=>{i=!1,n.apply(e,t)}))}}const oa=n=>"start"===n?"left":"end"===n?"right":"center",mt=(n,e,t)=>"start"===n?e:"end"===n?t:(e+t)/2;function Mu(n,e,t){const i=e.length;let o=0,s=i;if(n._sorted){const{iScale:a,_parsed:l}=n,c=a.axis,{min:d,max:u,minDefined:h,maxDefined:f}=a.getUserBounds();h&&(o=at(Math.min(me(l,a.axis,d).lo,t?i:me(e,c,a.getPixelForValue(d)).lo),0,i-1)),s=f?at(Math.max(me(l,a.axis,u,!0).hi+1,t?0:me(e,c,a.getPixelForValue(u),!0).hi+1),o,i)-o:i-o}return{start:o,count:s}}function Tu(n){const{xScale:e,yScale:t,_scaleRanges:i}=n,o={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=o,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,o),s}const $o=n=>0===n||1===n,Su=(n,e,t)=>-Math.pow(2,10*(n-=1))*Math.sin((n-e)*K/t),Au=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*K/t)+1,Pi={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>1-Math.cos(n*nt),easeOutSine:n=>Math.sin(n*nt),easeInOutSine:n=>-.5*(Math.cos(G*n)-1),easeInExpo:n=>0===n?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>1===n?1:1-Math.pow(2,-10*n),easeInOutExpo:n=>$o(n)?n:n<.5?.5*Math.pow(2,10*(2*n-1)):.5*(2-Math.pow(2,-10*(2*n-1))),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>$o(n)?n:Su(n,.075,.3),easeOutElastic:n=>$o(n)?n:Au(n,.075,.3),easeInOutElastic:n=>$o(n)?n:n<.5?.5*Su(2*n,.1125,.45):.5+.5*Au(2*n-1,.1125,.45),easeInBack:n=>n*n*(2.70158*n-1.70158),easeOutBack:n=>(n-=1)*n*(2.70158*n+1.70158)+1,easeInOutBack(n){let e=1.70158;return(n/=.5)<1?n*n*((1+(e*=1.525))*n-e)*.5:.5*((n-=2)*n*((1+(e*=1.525))*n+e)+2)},easeInBounce:n=>1-Pi.easeOutBounce(1-n),easeOutBounce:n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,easeInOutBounce:n=>n<.5?.5*Pi.easeInBounce(2*n):.5*Pi.easeOutBounce(2*n-1)+.5};function sa(n){if(n&&"object"==typeof n){const e=n.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function Du(n){return sa(n)?n:new jn(n)}function ra(n){return sa(n)?n:new jn(n).saturate(.5).darken(.1).hexString()}const dk=["x","y","borderWidth","radius","tension"],uk=["color","borderColor","backgroundColor"],Ou=new Map;function Ri(n,e,t){return function pk(n,e){e=e||{};const t=n+JSON.stringify(e);let i=Ou.get(t);return i||(i=new Intl.NumberFormat(n,e),Ou.set(t,i)),i}(e,t).format(n)}const Eu={values:n=>Q(n)?n:""+n,numeric(n,e,t){if(0===n)return"0";const i=this.chart.options.locale;let o,s=n;if(t.length>1){const d=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(d<1e-4||d>1e15)&&(o="scientific"),s=function mk(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}(n,t)}const a=ze(Math.abs(s)),l=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),c={notation:o,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),Ri(n,i,c)},logarithmic(n,e,t){if(0===n)return"0";const i=t[e].significand||n/Math.pow(10,Math.floor(ze(n)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?Eu.numeric.call(this,n,e,t):""}};var Qo={formatters:Eu};const fn=Object.create(null),aa=Object.create(null);function Fi(n,e){if(!e)return n;const t=e.split(".");for(let i=0,o=t.length;i<o;++i){const s=t[i];n=n[s]||(n[s]=Object.create(null))}return n}function la(n,e,t){return"string"==typeof e?Di(Fi(n,e),t):Di(Fi(n,""),e)}class _k{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,o)=>ra(o.backgroundColor),this.hoverBorderColor=(i,o)=>ra(o.borderColor),this.hoverColor=(i,o)=>ra(o.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return la(this,e,t)}get(e){return Fi(this,e)}describe(e,t){return la(aa,e,t)}override(e,t){return la(fn,e,t)}route(e,t,i,o){const s=Fi(this,e),a=Fi(this,i),l="_"+t;Object.defineProperties(s,{[l]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const c=this[l],d=a[o];return L(c)?Object.assign({},d,c):F(c,d)},set(c){this[l]=c}}})}apply(e){e.forEach(t=>t(this))}}var tt=new _k({_scriptable:n=>!n.startsWith("on"),_indexable:n=>"events"!==n,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function hk(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),n.set("animations",{colors:{type:"color",properties:uk},numbers:{type:"number",properties:dk}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function fk(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function gk(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Qo.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function Ko(n,e,t,i,o){let s=e[o];return s||(s=e[o]=n.measureText(o).width,t.push(o)),s>i&&(i=s),i}function bk(n,e,t,i){let o=(i=i||{}).data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(o=i.data={},s=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let a=0;const l=t.length;let c,d,u,h,f;for(c=0;c<l;c++)if(h=t[c],null==h||Q(h)){if(Q(h))for(d=0,u=h.length;d<u;d++)f=h[d],null!=f&&!Q(f)&&(a=Ko(n,o,s,a,f))}else a=Ko(n,o,s,a,h);n.restore();const p=s.length/2;if(p>t.length){for(c=0;c<p;c++)delete o[s[c]];s.splice(0,p)}return a}function pn(n,e,t){const i=n.currentDevicePixelRatio,o=0!==t?Math.max(t/2,.5):0;return Math.round((e-o)*i)/i+o}function Nu(n,e){(e=e||n.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore()}function ca(n,e,t,i){Iu(n,e,t,i,null)}function Iu(n,e,t,i,o){let s,a,l,c,d,u,h,f;const p=e.pointStyle,m=e.rotation,g=e.radius;let _=(m||0)*tk;if(p&&"object"==typeof p&&(s=p.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return n.save(),n.translate(t,i),n.rotate(_),n.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),void n.restore();if(!(isNaN(g)||g<=0)){switch(n.beginPath(),p){default:o?n.ellipse(t,i,o/2,g,0,0,K):n.arc(t,i,g,0,K),n.closePath();break;case"triangle":u=o?o/2:g,n.moveTo(t+Math.sin(_)*u,i-Math.cos(_)*g),_+=mu,n.lineTo(t+Math.sin(_)*u,i-Math.cos(_)*g),_+=mu,n.lineTo(t+Math.sin(_)*u,i-Math.cos(_)*g),n.closePath();break;case"rectRounded":d=.516*g,c=g-d,a=Math.cos(_+hn)*c,h=Math.cos(_+hn)*(o?o/2-d:c),l=Math.sin(_+hn)*c,f=Math.sin(_+hn)*(o?o/2-d:c),n.arc(t-h,i-l,d,_-G,_-nt),n.arc(t+f,i-a,d,_-nt,_),n.arc(t+h,i+l,d,_,_+nt),n.arc(t-f,i+a,d,_+nt,_+G),n.closePath();break;case"rect":if(!m){c=Math.SQRT1_2*g,u=o?o/2:c,n.rect(t-u,i-c,2*u,2*c);break}_+=hn;case"rectRot":h=Math.cos(_)*(o?o/2:g),a=Math.cos(_)*g,l=Math.sin(_)*g,f=Math.sin(_)*(o?o/2:g),n.moveTo(t-h,i-l),n.lineTo(t+f,i-a),n.lineTo(t+h,i+l),n.lineTo(t-f,i+a),n.closePath();break;case"crossRot":_+=hn;case"cross":h=Math.cos(_)*(o?o/2:g),a=Math.cos(_)*g,l=Math.sin(_)*g,f=Math.sin(_)*(o?o/2:g),n.moveTo(t-h,i-l),n.lineTo(t+h,i+l),n.moveTo(t+f,i-a),n.lineTo(t-f,i+a);break;case"star":h=Math.cos(_)*(o?o/2:g),a=Math.cos(_)*g,l=Math.sin(_)*g,f=Math.sin(_)*(o?o/2:g),n.moveTo(t-h,i-l),n.lineTo(t+h,i+l),n.moveTo(t+f,i-a),n.lineTo(t-f,i+a),_+=hn,h=Math.cos(_)*(o?o/2:g),a=Math.cos(_)*g,l=Math.sin(_)*g,f=Math.sin(_)*(o?o/2:g),n.moveTo(t-h,i-l),n.lineTo(t+h,i+l),n.moveTo(t+f,i-a),n.lineTo(t-f,i+a);break;case"line":a=o?o/2:Math.cos(_)*g,l=Math.sin(_)*g,n.moveTo(t-a,i-l),n.lineTo(t+a,i+l);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(_)*(o?o/2:g),i+Math.sin(_)*g);break;case!1:n.closePath()}n.fill(),e.borderWidth>0&&n.stroke()}}function ge(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Go(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Xo(n){n.restore()}function yk(n,e,t,i,o){if(!e)return n.lineTo(t.x,t.y);if("middle"===o){const s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else"after"===o!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function vk(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function kk(n,e,t,i,o){if(o.strikethrough||o.underline){const s=n.measureText(i),a=e-s.actualBoundingBoxLeft,l=e+s.actualBoundingBoxRight,d=t+s.actualBoundingBoxDescent,u=o.strikethrough?(t-s.actualBoundingBoxAscent+d)/2:d;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=o.decorationWidth||2,n.moveTo(a,u),n.lineTo(l,u),n.stroke()}}function wk(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function mn(n,e,t,i,o,s={}){const a=Q(e)?e:[e],l=s.strokeWidth>0&&""!==s.strokeColor;let c,d;for(n.save(),n.font=o.string,function Ck(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),B(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}(n,s),c=0;c<a.length;++c)d=a[c],s.backdrop&&wk(n,s.backdrop),l&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),B(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(d,t,i,s.maxWidth)),n.fillText(d,t,i,s.maxWidth),kk(n,t,i,d,s),i+=Number(o.lineHeight);n.restore()}function Zi(n,e){const{x:t,y:i,w:o,h:s,radius:a}=e;n.arc(t+a.topLeft,i+a.topLeft,a.topLeft,-nt,G,!0),n.lineTo(t,i+s-a.bottomLeft),n.arc(t+a.bottomLeft,i+s-a.bottomLeft,a.bottomLeft,G,nt,!0),n.lineTo(t+o-a.bottomRight,i+s),n.arc(t+o-a.bottomRight,i+s-a.bottomRight,a.bottomRight,nt,0,!0),n.lineTo(t+o,i+a.topRight),n.arc(t+o-a.topRight,i+a.topRight,a.topRight,0,-nt,!0),n.lineTo(t+a.topLeft,i)}const Mk=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Tk=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Sk(n,e){const t=(""+n).match(Mk);if(!t||"normal"===t[1])return 1.2*e;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100}return e*n}const Ak=n=>+n||0;function da(n,e){const t={},i=L(e),o=i?Object.keys(e):e,s=L(n)?i?a=>F(n[a],n[e[a]]):a=>n[a]:()=>n;for(const a of o)t[a]=Ak(s(a));return t}function Pu(n){return da(n,{top:"y",right:"x",bottom:"y",left:"x"})}function gn(n){return da(n,["topLeft","topRight","bottomLeft","bottomRight"])}function gt(n){const e=Pu(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function rt(n,e){let t=F((n=n||{}).size,(e=e||tt.font).size);"string"==typeof t&&(t=parseInt(t,10));let i=F(n.style,e.style);i&&!(""+i).match(Tk)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const o={family:F(n.family,e.family),lineHeight:Sk(F(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:F(n.weight,e.weight),string:""};return o.string=function xk(n){return!n||B(n.size)||B(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}(o),o}function Li(n,e,t,i){let s,a,l,o=!0;for(s=0,a=n.length;s<a;++s)if(l=n[s],void 0!==l&&(void 0!==e&&"function"==typeof l&&(l=l(e),o=!1),void 0!==t&&Q(l)&&(l=l[t%l.length],o=!1),void 0!==l))return i&&!o&&(i.cacheable=!1),l}function Be(n,e){return Object.assign(Object.create(n),e)}function ua(n,e=[""],t,i,o=(()=>n[0])){const s=t||n;typeof i>"u"&&(i=qu("_fallback",n));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:o,override:l=>ua([l,...n],e,s,i)};return new Proxy(a,{deleteProperty:(l,c)=>(delete l[c],delete l._keys,delete n[0][c],!0),get:(l,c)=>Fu(l,c,()=>function Zk(n,e,t,i){let o;for(const s of e)if(o=qu(Ok(s,n),t),typeof o<"u")return ha(n,o)?fa(t,i,n,o):o}(c,e,n,l)),getOwnPropertyDescriptor:(l,c)=>Reflect.getOwnPropertyDescriptor(l._scopes[0],c),getPrototypeOf:()=>Reflect.getPrototypeOf(n[0]),has:(l,c)=>zu(l).includes(c),ownKeys:l=>zu(l),set(l,c,d){const u=l._storage||(l._storage=o());return l[c]=u[c]=d,delete l._keys,!0}})}function Yn(n,e,t,i){const o={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:Ru(n,i),setContext:s=>Yn(n,s,t,i),override:s=>Yn(n.override(s),e,t,i)};return new Proxy(o,{deleteProperty:(s,a)=>(delete s[a],delete n[a],!0),get:(s,a,l)=>Fu(s,a,()=>function Ek(n,e,t){const{_proxy:i,_context:o,_subProxy:s,_descriptors:a}=n;let l=i[e];return qe(l)&&a.isScriptable(e)&&(l=function Nk(n,e,t,i){const{_proxy:o,_context:s,_subProxy:a,_stack:l}=t;if(l.has(n))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+n);l.add(n);let c=e(s,a||i);return l.delete(n),ha(n,c)&&(c=fa(o._scopes,o,n,c)),c}(e,l,n,t)),Q(l)&&l.length&&(l=function Ik(n,e,t,i){const{_proxy:o,_context:s,_subProxy:a,_descriptors:l}=t;if(typeof s.index<"u"&&i(n))return e[s.index%e.length];if(L(e[0])){const c=e,d=o._scopes.filter(u=>u!==c);e=[];for(const u of c){const h=fa(d,o,n,u);e.push(Yn(h,s,a&&a[n],l))}}return e}(e,l,n,a.isIndexable)),ha(e,l)&&(l=Yn(l,o,s&&s[e],a)),l}(s,a,l)),getOwnPropertyDescriptor:(s,a)=>s._descriptors.allKeys?Reflect.has(n,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,a),getPrototypeOf:()=>Reflect.getPrototypeOf(n),has:(s,a)=>Reflect.has(n,a),ownKeys:()=>Reflect.ownKeys(n),set:(s,a,l)=>(n[a]=l,delete s[a],!0)})}function Ru(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:o=e.allKeys}=n;return{allKeys:o,scriptable:t,indexable:i,isScriptable:qe(t)?t:()=>t,isIndexable:qe(i)?i:()=>i}}const Ok=(n,e)=>n?n+ta(e):e,ha=(n,e)=>L(e)&&"adapters"!==n&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function Fu(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e))return n[e];const i=t();return n[e]=i,i}function Zu(n,e,t){return qe(n)?n(e,t):n}const Pk=(n,e)=>!0===n?e:"string"==typeof n?Le(e,n):void 0;function Rk(n,e,t,i,o){for(const s of e){const a=Pk(t,s);if(a){n.add(a);const l=Zu(a._fallback,t,o);if(typeof l<"u"&&l!==t&&l!==i)return l}else if(!1===a&&typeof i<"u"&&t!==i)return null}return!1}function fa(n,e,t,i){const o=e._rootScopes,s=Zu(e._fallback,t,i),a=[...n,...o],l=new Set;l.add(i);let c=Lu(l,a,t,s||t,i);return!(null===c||typeof s<"u"&&s!==t&&(c=Lu(l,a,s,c,i),null===c))&&ua(Array.from(l),[""],o,s,()=>function Fk(n,e,t){const i=n._getTarget();e in i||(i[e]={});const o=i[e];return Q(o)&&L(t)?t:o||{}}(e,t,i))}function Lu(n,e,t,i,o){for(;t;)t=Rk(n,e,t,i,o);return t}function qu(n,e){for(const t of e){if(!t)continue;const i=t[n];if(typeof i<"u")return i}}function zu(n){let e=n._keys;return e||(e=n._keys=function Lk(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(o=>!o.startsWith("_")))e.add(i);return Array.from(e)}(n._scopes)),e}function Bu(n,e,t,i){const{iScale:o}=n,{key:s="r"}=this._parsing,a=new Array(i);let l,c,d,u;for(l=0,c=i;l<c;++l)d=l+t,u=e[d],a[l]={r:o.parse(Le(u,s),d)};return a}const qk=Number.EPSILON||1e-14,Wn=(n,e)=>e<n.length&&!n[e].skip&&n[e],Vu=n=>"x"===n?"y":"x";function zk(n,e,t,i){const o=n.skip?e:n,s=e,a=t.skip?e:t,l=na(s,o),c=na(a,s);let d=l/(l+c),u=c/(l+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const h=i*d,f=i*u;return{previous:{x:s.x-h*(a.x-o.x),y:s.y-h*(a.y-o.y)},next:{x:s.x+f*(a.x-o.x),y:s.y+f*(a.y-o.y)}}}function ts(n,e,t){return Math.max(Math.min(n,t),e)}function jk(n,e,t,i,o){let s,a,l,c;if(e.spanGaps&&(n=n.filter(d=>!d.skip)),"monotone"===e.cubicInterpolationMode)!function Uk(n,e="x"){const t=Vu(e),i=n.length,o=Array(i).fill(0),s=Array(i);let a,l,c,d=Wn(n,0);for(a=0;a<i;++a)if(l=c,c=d,d=Wn(n,a+1),c){if(d){const u=d[e]-c[e];o[a]=0!==u?(d[t]-c[t])/u:0}s[a]=l?d?ne(o[a-1])!==ne(o[a])?0:(o[a-1]+o[a])/2:o[a-1]:o[a]}(function Bk(n,e,t){const i=n.length;let o,s,a,l,c,d=Wn(n,0);for(let u=0;u<i-1;++u)if(c=d,d=Wn(n,u+1),c&&d){if(Ni(e[u],0,qk)){t[u]=t[u+1]=0;continue}o=t[u]/e[u],s=t[u+1]/e[u],l=Math.pow(o,2)+Math.pow(s,2),!(l<=9)&&(a=3/Math.sqrt(l),t[u]=o*a*e[u],t[u+1]=s*a*e[u])}})(n,o,s),function Vk(n,e,t="x"){const i=Vu(t),o=n.length;let s,a,l,c=Wn(n,0);for(let d=0;d<o;++d){if(a=l,l=c,c=Wn(n,d+1),!l)continue;const u=l[t],h=l[i];a&&(s=(u-a[t])/3,l[`cp1${t}`]=u-s,l[`cp1${i}`]=h-s*e[d]),c&&(s=(c[t]-u)/3,l[`cp2${t}`]=u+s,l[`cp2${i}`]=h+s*e[d])}}(n,s,e)}(n,o);else{let d=i?n[n.length-1]:n[0];for(s=0,a=n.length;s<a;++s)l=n[s],c=zk(d,l,n[Math.min(s+1,a-(i?0:1))%a],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,d=l}e.capBezierPoints&&function Hk(n,e){let t,i,o,s,a,l=ge(n[0],e);for(t=0,i=n.length;t<i;++t)a=s,s=l,l=t<i-1&&ge(n[t+1],e),s&&(o=n[t],a&&(o.cp1x=ts(o.cp1x,e.left,e.right),o.cp1y=ts(o.cp1y,e.top,e.bottom)),l&&(o.cp2x=ts(o.cp2x,e.left,e.right),o.cp2y=ts(o.cp2y,e.top,e.bottom)))}(n,t)}function Uu(){return typeof window<"u"&&typeof document<"u"}function pa(n){let e=n.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function es(n,e,t){let i;return"string"==typeof n?(i=parseInt(n,10),-1!==n.indexOf("%")&&(i=i/100*e.parentNode[t])):i=n,i}const ns=n=>n.ownerDocument.defaultView.getComputedStyle(n,null),Yk=["top","right","bottom","left"];function _n(n,e,t){const i={};t=t?"-"+t:"";for(let o=0;o<4;o++){const s=Yk[o];i[s]=parseFloat(n[e+"-"+s+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Wk=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function xn(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,o=ns(t),s="border-box"===o.boxSizing,a=_n(o,"padding"),l=_n(o,"border","width"),{x:c,y:d,box:u}=function $k(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:o,offsetY:s}=i;let l,c,a=!1;if(Wk(o,s,n.target))l=o,c=s;else{const d=e.getBoundingClientRect();l=i.clientX-d.left,c=i.clientY-d.top,a=!0}return{x:l,y:c,box:a}}(n,t),h=a.left+(u&&l.left),f=a.top+(u&&l.top);let{width:p,height:m}=e;return s&&(p-=a.width+l.width,m-=a.height+l.height),{x:Math.round((c-h)/p*t.width/i),y:Math.round((d-f)/m*t.height/i)}}const is=n=>Math.round(10*n)/10;function Hu(n,e,t){const i=e||1,o=Math.floor(n.height*i),s=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const a=n.canvas;return a.style&&(t||!a.style.height&&!a.style.width)&&(a.style.height=`${n.height}px`,a.style.width=`${n.width}px`),(n.currentDevicePixelRatio!==i||a.height!==o||a.width!==s)&&(n.currentDevicePixelRatio=i,a.height=o,a.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0)}const Gk=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return n}();function ju(n,e){const t=function Jk(n,e){return ns(n).getPropertyValue(e)}(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function bn(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function Xk(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:"middle"===i?t<.5?n.y:e.y:"after"===i?t<1?n.y:e.y:t>0?e.y:n.y}}function tw(n,e,t,i){const o={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},a=bn(n,o,t),l=bn(o,s,t),c=bn(s,e,t),d=bn(a,l,t),u=bn(l,c,t);return bn(d,u,t)}function $n(n,e,t){return n?function(n,e){return{x:t=>n+n+e-t,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,i)=>t-i,leftForLtr:(t,i)=>t-i}}(e,t):{x:n=>n,setWidth(n){},textAlign:n=>n,xPlus:(n,e)=>n+e,leftForLtr:(n,e)=>n}}function Ju(n,e){let t,i;("ltr"===e||"rtl"===e)&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function Yu(n,e){void 0!==e&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function Wu(n){return"angle"===n?{between:Ii,compare:ik,normalize:Et}:{between:pe,compare:(e,t)=>e-t,normalize:e=>e}}function $u({start:n,end:e,count:t,loop:i,style:o}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t==0,style:o}}function Qu(n,e,t){if(!t)return[n];const{property:i,start:o,end:s}=t,a=e.length,{compare:l,between:c,normalize:d}=Wu(i),{start:u,end:h,loop:f,style:p}=function iw(n,e,t){const{property:i,start:o,end:s}=t,{between:a,normalize:l}=Wu(i),c=e.length;let f,p,{start:d,end:u,loop:h}=n;if(h){for(d+=c,u+=c,f=0,p=c;f<p&&a(l(e[d%c][i]),o,s);++f)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:h,style:n.style}}(n,e,t),m=[];let x,b,C,g=!1,_=null;for(let v=u,D=u;v<=h;++v)b=e[v%a],!b.skip&&(x=d(b[i]),x!==C&&(g=c(x,o,s),null===_&&(g||c(o,C,x)&&0!==l(o,C))&&(_=0===l(x,o)?v:D),null!==_&&(!g||0===l(s,x)||c(s,C,x))&&(m.push($u({start:_,end:v,loop:f,count:a,style:p})),_=null),D=v,C=x));return null!==_&&m.push($u({start:_,end:h,loop:f,count:a,style:p})),m}function Ku(n,e){const t=[],i=n.segments;for(let o=0;o<i.length;o++){const s=Qu(i[o],n.points,e);s.length&&t.push(...s)}return t}function Xu(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function lw(n,e){if(!e)return!1;const t=[],i=function(o,s){return sa(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(e,i)}class cw{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,o){const a=t.duration;t.listeners[o].forEach(l=>l({chart:e,initial:t.initial,numSteps:a,currentStep:Math.min(i-t.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=ku.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,o)=>{if(!i.running||!i.items.length)return;const s=i.items;let c,a=s.length-1,l=!1;for(;a>=0;--a)c=s[a],c._active?(c._total>i.duration&&(i.duration=c._total),c.tick(e),l=!0):(s[a]=s[s.length-1],s.pop());l&&(o.draw(),this._notify(o,i,e,"progress")),s.length||(i.running=!1,this._notify(o,i,e,"complete"),i.initial=!1),t+=s.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,o)=>Math.max(i,o._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let o=i.length-1;for(;o>=0;--o)i[o].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var _e=new cw;const th="transparent",dw={boolean:(n,e,t)=>t>.5?e:n,color(n,e,t){const i=Du(n||th),o=i.valid&&Du(e||th);return o&&o.valid?o.mix(i,t).hexString():e},number:(n,e,t)=>n+(e-n)*t};class uw{constructor(e,t,i,o){const s=t[i];o=Li([e.to,o,s,e.from]);const a=Li([e.from,s,o]);this._active=!0,this._fn=e.fn||dw[e.type||typeof a],this._easing=Pi[e.easing]||Pi.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=a,this._to=o,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const o=this._target[this._prop],s=i-this._start,a=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Li([e.to,t,o,e.from]),this._from=Li([e.from,o,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,o=this._prop,s=this._from,a=this._loop,l=this._to;let c;if(this._active=s!==l&&(a||t<i),!this._active)return this._target[o]=l,void this._notify(!0);t<0?this._target[o]=s:(c=t/i%2,c=a&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[o]=this._fn(s,l,c))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let o=0;o<i.length;o++)i[o][t]()}}class eh{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!L(e))return;const t=Object.keys(tt.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(o=>{const s=e[o];if(!L(s))return;const a={};for(const l of t)a[l]=s[l];(Q(s.properties)&&s.properties||[o]).forEach(l=>{(l===o||!i.has(l))&&i.set(l,a)})})}_animateOptions(e,t){const i=t.options,o=function fw(n,e){if(!e)return;let t=n.options;if(t)return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t;n.options=e}(e,i);if(!o)return[];const s=this._createAnimations(o,i);return i.$shared&&function hw(n,e){const t=[],i=Object.keys(e);for(let o=0;o<i.length;o++){const s=n[i[o]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,t){const i=this._properties,o=[],s=e.$animations||(e.$animations={}),a=Object.keys(t),l=Date.now();let c;for(c=a.length-1;c>=0;--c){const d=a[c];if("$"===d.charAt(0))continue;if("options"===d){o.push(...this._animateOptions(e,t));continue}const u=t[d];let h=s[d];const f=i.get(d);if(h){if(f&&h.active()){h.update(f,u,l);continue}h.cancel()}f&&f.duration?(s[d]=h=new uw(f,e,d,u),o.push(h)):e[d]=u}return o}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const i=this._createAnimations(e,t);return i.length?(_e.add(this._chart,i),!0):void 0}}function nh(n,e){const t=n&&n.options||{},i=t.reverse,o=void 0===t.min?e:0,s=void 0===t.max?e:0;return{start:i?s:o,end:i?o:s}}function ih(n,e){const t=[],i=n._getSortedDatasetMetas(e);let o,s;for(o=0,s=i.length;o<s;++o)t.push(i[o].index);return t}function oh(n,e,t,i={}){const o=n.keys,s="single"===i.mode;let a,l,c,d;if(null!==e){for(a=0,l=o.length;a<l;++a){if(c=+o[a],c===t){if(i.all)continue;break}d=n.values[c],et(d)&&(s||0===e||ne(e)===ne(d))&&(e+=d)}return e}}function sh(n,e){const t=n&&n.options.stacked;return t||void 0===t&&void 0!==e.stack}function bw(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function rh(n,e,t,i){for(const o of e.getMatchingVisibleMetas(i).reverse()){const s=n[o.index];if(t&&s>0||!t&&s<0)return o.index}return null}function ah(n,e){const{chart:t,_cachedMeta:i}=n,o=t._stacks||(t._stacks={}),{iScale:s,vScale:a,index:l}=i,c=s.axis,d=a.axis,u=function _w(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}(s,a,i),h=e.length;let f;for(let p=0;p<h;++p){const m=e[p],{[c]:g,[d]:_}=m;f=(m._stacks||(m._stacks={}))[d]=bw(o,u,g),f[l]=_,f._top=rh(f,a,!0,i.type),f._bottom=rh(f,a,!1,i.type),(f._visualValues||(f._visualValues={}))[l]=_}}function ma(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function qi(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const o of e){const s=o._stacks;if(!s||void 0===s[i]||void 0===s[i][t])return;delete s[i][t],void 0!==s[i]._visualValues&&void 0!==s[i]._visualValues[t]&&delete s[i]._visualValues[t]}}}const ga=n=>"reset"===n||"none"===n,lh=(n,e)=>e?n:Object.assign({},n);let Ve=(()=>{class n{constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=sh(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&qi(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,i=this._cachedMeta,o=this.getDataset(),s=(f,p,m,g)=>"x"===f?p:"r"===f?g:m,a=i.xAxisID=F(o.xAxisID,ma(t,"x")),l=i.yAxisID=F(o.yAxisID,ma(t,"y")),c=i.rAxisID=F(o.rAxisID,ma(t,"r")),d=i.indexAxis,u=i.iAxisID=s(d,a,l,c),h=i.vAxisID=s(d,l,a,c);i.xScale=this.getScaleForId(a),i.yScale=this.getScaleForId(l),i.rScale=this.getScaleForId(c),i.iScale=this.getScaleForId(u),i.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&vu(this._data,this),t._stacked&&qi(t)}_dataCheck(){const t=this.getDataset(),i=t.data||(t.data=[]),o=this._data;if(L(i))this._data=function gw(n){const e=Object.keys(n),t=new Array(e.length);let i,o,s;for(i=0,o=e.length;i<o;++i)s=e[i],t[i]={x:s,y:n[s]};return t}(i);else if(o!==i){if(o){vu(o,this);const s=this._cachedMeta;qi(s),s._parsed=[]}i&&Object.isExtensible(i)&&function ak(n,e){n._chartjs?n._chartjs.listeners.push(e):(Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),yu.forEach(t=>{const i="_onData"+ta(t),o=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){const a=o.apply(this,s);return n._chartjs.listeners.forEach(l=>{"function"==typeof l[i]&&l[i](...s)}),a}})}))}(i,this),this._syncList=[],this._data=i}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const i=this._cachedMeta,o=this.getDataset();let s=!1;this._dataCheck();const a=i._stacked;i._stacked=sh(i.vScale,i),i.stack!==o.stack&&(s=!0,qi(i),i.stack=o.stack),this._resyncElements(t),(s||a!==i._stacked)&&ah(this,i._parsed)}configure(){const t=this.chart.config,i=t.datasetScopeKeys(this._type),o=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(o,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){const{_cachedMeta:o,_data:s}=this,{iScale:a,_stacked:l}=o,c=a.axis;let h,f,p,d=0===t&&i===s.length||o._sorted,u=t>0&&o._parsed[t-1];if(!1===this._parsing)o._parsed=s,o._sorted=!0,p=s;else{p=Q(s[t])?this.parseArrayData(o,s,t,i):L(s[t])?this.parseObjectData(o,s,t,i):this.parsePrimitiveData(o,s,t,i);const m=()=>null===f[c]||u&&f[c]<u[c];for(h=0;h<i;++h)o._parsed[h+t]=f=p[h],d&&(m()&&(d=!1),u=f);o._sorted=d}l&&ah(this,p)}parsePrimitiveData(t,i,o,s){const{iScale:a,vScale:l}=t,c=a.axis,d=l.axis,u=a.getLabels(),h=a===l,f=new Array(s);let p,m,g;for(p=0,m=s;p<m;++p)g=p+o,f[p]={[c]:h||a.parse(u[g],g),[d]:l.parse(i[g],g)};return f}parseArrayData(t,i,o,s){const{xScale:a,yScale:l}=t,c=new Array(s);let d,u,h,f;for(d=0,u=s;d<u;++d)h=d+o,f=i[h],c[d]={x:a.parse(f[0],h),y:l.parse(f[1],h)};return c}parseObjectData(t,i,o,s){const{xScale:a,yScale:l}=t,{xAxisKey:c="x",yAxisKey:d="y"}=this._parsing,u=new Array(s);let h,f,p,m;for(h=0,f=s;h<f;++h)p=h+o,m=i[p],u[h]={x:a.parse(Le(m,c),p),y:l.parse(Le(m,d),p)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,o){const a=this._cachedMeta,l=i[t.axis];return oh({keys:ih(this.chart,!0),values:i._stacks[t.axis]._visualValues},l,a.index,{mode:o})}updateRangeFromParsed(t,i,o,s){const a=o[i.axis];let l=null===a?NaN:a;const c=s&&o._stacks[i.axis];s&&c&&(s.values=c,l=oh(s,a,this._cachedMeta.index)),t.min=Math.min(t.min,l),t.max=Math.max(t.max,l)}getMinMax(t,i){const o=this._cachedMeta,s=o._parsed,a=o._sorted&&t===o.iScale,l=s.length,c=this._getOtherScale(t),d=((n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:ih(this.chart,!0),values:null})(i,o),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:f}=function xw(n){const{min:e,max:t,minDefined:i,maxDefined:o}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:o?t:Number.POSITIVE_INFINITY}}(c);let p,m;function g(){m=s[p];const _=m[c.axis];return!et(m[t.axis])||h>_||f<_}for(p=0;p<l&&(g()||(this.updateRangeFromParsed(u,t,m,d),!a));++p);if(a)for(p=l-1;p>=0;--p)if(!g()){this.updateRangeFromParsed(u,t,m,d);break}return u}getAllParsedValues(t){const i=this._cachedMeta._parsed,o=[];let s,a,l;for(s=0,a=i.length;s<a;++s)l=i[s][t.axis],et(l)&&o.push(l);return o}getMaxOverflow(){return!1}getLabelAndValue(t){const i=this._cachedMeta,o=i.iScale,s=i.vScale,a=this.getParsed(t);return{label:o?""+o.getLabelForValue(a[o.axis]):"",value:s?""+s.getLabelForValue(a[s.axis]):""}}_update(t){const i=this._cachedMeta;this.update(t||"default"),i._clip=function mw(n){let e,t,i,o;return L(n)?(e=n.top,t=n.right,i=n.bottom,o=n.left):e=t=i=o=n,{top:e,right:t,bottom:i,left:o,disabled:!1===n}}(F(this.options.clip,function pw(n,e,t){if(!1===t)return!1;const i=nh(n,t),o=nh(e,t);return{top:o.end,right:i.end,bottom:o.start,left:i.start}}(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,o=this._cachedMeta,s=o.data||[],a=this.chart.chartArea,l=[],c=this._drawStart||0,d=this._drawCount||s.length-c,u=this.options.drawActiveElementsOnTop;let h;for(o.dataset&&o.dataset.draw(t,a,c,d),h=c;h<c+d;++h){const f=s[h];f.hidden||(f.active&&u?l.push(f):f.draw(t,a))}for(h=0;h<l.length;++h)l[h].draw(t,a)}getStyle(t,i){const o=i?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(o):this.resolveDataElementOptions(t||0,o)}getContext(t,i,o){const s=this.getDataset();let a;if(t>=0&&t<this._cachedMeta.data.length){const l=this._cachedMeta.data[t];a=l.$context||(l.$context=function vw(n,e,t){return Be(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}(this.getContext(),t,l)),a.parsed=this.getParsed(t),a.raw=s.data[t],a.index=a.dataIndex=t}else a=this.$context||(this.$context=function yw(n,e){return Be(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),a.dataset=s,a.index=a.datasetIndex=this.index;return a.active=!!i,a.mode=o,a}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",o){const s="active"===i,a=this._cachedDataOpts,l=t+"-"+i,c=a[l],d=this.enableOptionSharing&&Ei(o);if(c)return lh(c,d);const u=this.chart.config,h=u.datasetElementScopeKeys(this._type,t),f=s?[`${t}Hover`,"hover",t,""]:[t,""],p=u.getOptionScopes(this.getDataset(),h),m=Object.keys(tt.elements[t]),_=u.resolveNamedOptions(p,m,()=>this.getContext(o,s,i),f);return _.$shared&&(_.$shared=d,a[l]=Object.freeze(lh(_,d))),_}_resolveAnimations(t,i,o){const s=this.chart,a=this._cachedDataOpts,l=`animation-${i}`,c=a[l];if(c)return c;let d;if(!1!==s.options.animation){const h=this.chart.config,f=h.datasetAnimationScopeKeys(this._type,i),p=h.getOptionScopes(this.getDataset(),f);d=h.createResolver(p,this.getContext(t,o,i))}const u=new eh(s,d&&d.animations);return d&&d._cacheable&&(a[l]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||ga(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){const o=this.resolveDataElementOptions(t,i),s=this._sharedOptions,a=this.getSharedOptions(o),l=this.includeOptions(i,a)||a!==s;return this.updateSharedOptions(a,i,o),{sharedOptions:a,includeOptions:l}}updateElement(t,i,o,s){ga(s)?Object.assign(t,o):this._resolveAnimations(i,s).update(t,o)}updateSharedOptions(t,i,o){t&&!ga(i)&&this._resolveAnimations(void 0,i).update(t,o)}_setStyle(t,i,o,s){t.active=s;const a=this.getStyle(i,s);this._resolveAnimations(i,o,s).update(t,{options:!s&&this.getSharedOptions(a)||a})}removeHoverStyle(t,i,o){this._setStyle(t,o,"active",!1)}setHoverStyle(t,i,o){this._setStyle(t,o,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const i=this._data,o=this._cachedMeta.data;for(const[c,d,u]of this._syncList)this[c](d,u);this._syncList=[];const s=o.length,a=i.length,l=Math.min(a,s);l&&this.parse(0,l),a>s?this._insertElements(s,a-s,t):a<s&&this._removeElements(a,s-a)}_insertElements(t,i,o=!0){const s=this._cachedMeta,a=s.data,l=t+i;let c;const d=u=>{for(u.length+=i,c=u.length-1;c>=l;c--)u[c]=u[c-i]};for(d(a),c=t;c<l;++c)a[c]=new this.dataElementType;this._parsing&&d(s._parsed),this.parse(t,i),o&&this.updateElements(a,t,i,"reset")}updateElements(t,i,o,s){}_removeElements(t,i){const o=this._cachedMeta;if(this._parsing){const s=o._parsed.splice(t,i);o._stacked&&qi(o,s)}o.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[i,o,s]=t;this[i](o,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);const o=arguments.length-2;o&&this._sync(["_insertElements",t,o])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return T(n,"defaults",{}),T(n,"datasetElementType",null),T(n,"dataElementType",null),n})();function ww(n){const e=n.iScale,t=function kw(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let i=[];for(let o=0,s=t.length;o<s;o++)i=i.concat(t[o].controller.getAllParsedValues(n));n._cache.$bar=Cu(i.sort((o,s)=>o-s))}return n._cache.$bar}(e,n.type);let o,s,a,l,i=e._length;const c=()=>{32767===a||-32768===a||(Ei(l)&&(i=Math.min(i,Math.abs(a-l)||i)),l=a)};for(o=0,s=t.length;o<s;++o)a=e.getPixelForValue(t[o]),c();for(l=void 0,o=0,s=e.ticks.length;o<s;++o)a=e.getPixelForTick(o),c();return i}function ch(n,e,t,i){return Q(n)?function Sw(n,e,t,i){const o=t.parse(n[0],i),s=t.parse(n[1],i),a=Math.min(o,s),l=Math.max(o,s);let c=a,d=l;Math.abs(a)>Math.abs(l)&&(c=l,d=a),e[t.axis]=d,e._custom={barStart:c,barEnd:d,start:o,end:s,min:a,max:l}}(n,e,t,i):e[t.axis]=t.parse(n,i),e}function dh(n,e,t,i){const o=n.iScale,s=n.vScale,a=o.getLabels(),l=o===s,c=[];let d,u,h,f;for(d=t,u=t+i;d<u;++d)f=e[d],h={},h[o.axis]=l||o.parse(a[d],d),c.push(ch(f,h,s,d));return c}function _a(n){return n&&void 0!==n.barStart&&void 0!==n.barEnd}function Ow(n,e,t,i){let o=e.borderSkipped;const s={};if(!o)return void(n.borderSkipped=s);if(!0===o)return void(n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:l,reverse:c,top:d,bottom:u}=function Dw(n){let e,t,i,o,s;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(o="end",s="start"):(o="start",s="end"),{start:t,end:i,reverse:e,top:o,bottom:s}}(n);"middle"===o&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?o=d:(t._bottom||0)===i?o=u:(s[uh(u,a,l,c)]=!0,o=d)),s[uh(o,a,l,c)]=!0,n.borderSkipped=s}function uh(n,e,t,i){return i?(n=function Ew(n,e,t){return n===e?t:n===t?e:n}(n,e,t),n=hh(n,t,e)):n=hh(n,e,t),n}function hh(n,e,t){return"start"===n?e:"end"===n?t:n}function Nw(n,{inflateAmount:e},t){n.inflateAmount="auto"===e?1===t?.33:0:e}let Iw=(()=>{class n extends Ve{parsePrimitiveData(t,i,o,s){return dh(t,i,o,s)}parseArrayData(t,i,o,s){return dh(t,i,o,s)}parseObjectData(t,i,o,s){const{iScale:a,vScale:l}=t,{xAxisKey:c="x",yAxisKey:d="y"}=this._parsing,u="x"===a.axis?c:d,h="x"===l.axis?c:d,f=[];let p,m,g,_;for(p=o,m=o+s;p<m;++p)_=i[p],g={},g[a.axis]=a.parse(Le(_,u),p),f.push(ch(Le(_,h),g,l,p));return f}updateRangeFromParsed(t,i,o,s){super.updateRangeFromParsed(t,i,o,s);const a=o._custom;a&&i===this._cachedMeta.vScale&&(t.min=Math.min(t.min,a.min),t.max=Math.max(t.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const i=this._cachedMeta,{iScale:o,vScale:s}=i,a=this.getParsed(t),l=a._custom,c=_a(l)?"["+l.start+", "+l.end+"]":""+s.getLabelForValue(a[s.axis]);return{label:""+o.getLabelForValue(a[o.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(t){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,t)}updateElements(t,i,o,s){const a="reset"===s,{index:l,_cachedMeta:{vScale:c}}=this,d=c.getBasePixel(),u=c.isHorizontal(),h=this._getRuler(),{sharedOptions:f,includeOptions:p}=this._getSharedOptions(i,s);for(let m=i;m<i+o;m++){const g=this.getParsed(m),_=a||B(g[c.axis])?{base:d,head:d}:this._calculateBarValuePixels(m),x=this._calculateBarIndexPixels(m,h),b=(g._stacks||{})[c.axis],C={horizontal:u,base:_.base,enableBorderRadius:!b||_a(g._custom)||l===b._top||l===b._bottom,x:u?_.head:x.center,y:u?x.center:_.head,height:u?x.size:Math.abs(_.size),width:u?Math.abs(_.size):x.size};p&&(C.options=f||this.resolveDataElementOptions(m,t[m].active?"active":s));const k=C.options||t[m].options;Ow(C,k,b,l),Nw(C,k,h.ratio),this.updateElement(t[m],m,C,s)}}_getStacks(t,i){const{iScale:o}=this._cachedMeta,s=o.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),a=o.options.stacked,l=[],c=d=>{const u=d.controller.getParsed(i),h=u&&u[d.vScale.axis];if(B(h)||isNaN(h))return!0};for(const d of s)if((void 0===i||!c(d))&&((!1===a||-1===l.indexOf(d.stack)||void 0===a&&void 0===d.stack)&&l.push(d.stack),d.index===t))break;return l.length||l.push(void 0),l}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,i,o){const s=this._getStacks(t,o),a=void 0!==i?s.indexOf(i):-1;return-1===a?s.length-1:a}_getRuler(){const t=this.options,i=this._cachedMeta,o=i.iScale,s=[];let a,l;for(a=0,l=i.data.length;a<l;++a)s.push(o.getPixelForValue(this.getParsed(a)[o.axis],a));const c=t.barThickness;return{min:c||ww(i),pixels:s,start:o._startPixel,end:o._endPixel,stackCount:this._getStackCount(),scale:o,grouped:t.grouped,ratio:c?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:i,_stacked:o,index:s},options:{base:a,minBarLength:l}}=this,c=a||0,d=this.getParsed(t),u=d._custom,h=_a(u);let g,_,f=d[i.axis],p=0,m=o?this.applyStack(i,d,o):f;m!==f&&(p=m-f,m=f),h&&(f=u.barStart,m=u.barEnd-u.barStart,0!==f&&ne(f)!==ne(u.barEnd)&&(p=0),p+=f);const x=B(a)||h?p:a;let b=i.getPixelForValue(x);if(g=this.chart.getDataVisibility(t)?i.getPixelForValue(p+m):b,_=g-b,Math.abs(_)<l){_=function Aw(n,e,t){return 0!==n?ne(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}(_,i,c)*l,f===c&&(b-=_/2);const C=i.getPixelForDecimal(0),k=i.getPixelForDecimal(1),y=Math.min(C,k),w=Math.max(C,k);b=Math.max(Math.min(b,w),y),g=b+_,o&&!h&&(d._stacks[i.axis]._visualValues[s]=i.getValueForPixel(g)-i.getValueForPixel(b))}if(b===i.getPixelForValue(c)){const C=ne(_)*i.getLineWidthForValue(c)/2;b+=C,_-=C}return{size:_,base:b,head:g,center:g+_/2}}_calculateBarIndexPixels(t,i){const o=i.scale,s=this.options,a=s.skipNull,l=F(s.maxBarThickness,1/0);let c,d;if(i.grouped){const u=a?this._getStackCount(t):i.stackCount,h="flex"===s.barThickness?function Tw(n,e,t,i){const o=e.pixels,s=o[n];let a=n>0?o[n-1]:null,l=n<o.length-1?o[n+1]:null;const c=t.categoryPercentage;null===a&&(a=s-(null===l?e.end-e.start:l-s)),null===l&&(l=s+s-a);const d=s-(s-Math.min(a,l))/2*c;return{chunk:Math.abs(l-a)/2*c/i,ratio:t.barPercentage,start:d}}(t,i,s,u):function Mw(n,e,t,i){const o=t.barThickness;let s,a;return B(o)?(s=e.min*t.categoryPercentage,a=t.barPercentage):(s=o*i,a=1),{chunk:s/i,ratio:a,start:e.pixels[n]-s/2}}(t,i,s,u),f=this._getStackIndex(this.index,this._cachedMeta.stack,a?t:void 0);c=h.start+h.chunk*f+h.chunk/2,d=Math.min(l,h.chunk*h.ratio)}else c=o.getPixelForValue(this.getParsed(t)[o.axis],t),d=Math.min(l,i.min*i.ratio);return{base:c-d/2,head:c+d/2,center:c,size:d}}draw(){const t=this._cachedMeta,i=t.vScale,o=t.data,s=o.length;let a=0;for(;a<s;++a)null!==this.getParsed(a)[i.axis]&&o[a].draw(this._ctx)}}return T(n,"id","bar"),T(n,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),T(n,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}}),n})(),Pw=(()=>{class n extends Ve{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,i,o,s){const a=super.parsePrimitiveData(t,i,o,s);for(let l=0;l<a.length;l++)a[l]._custom=this.resolveDataElementOptions(l+o).radius;return a}parseArrayData(t,i,o,s){const a=super.parseArrayData(t,i,o,s);for(let l=0;l<a.length;l++)a[l]._custom=F(i[o+l][2],this.resolveDataElementOptions(l+o).radius);return a}parseObjectData(t,i,o,s){const a=super.parseObjectData(t,i,o,s);for(let l=0;l<a.length;l++){const c=i[o+l];a[l]._custom=F(c&&c.r&&+c.r,this.resolveDataElementOptions(l+o).radius)}return a}getMaxOverflow(){const t=this._cachedMeta.data;let i=0;for(let o=t.length-1;o>=0;--o)i=Math.max(i,t[o].size(this.resolveDataElementOptions(o))/2);return i>0&&i}getLabelAndValue(t){const i=this._cachedMeta,o=this.chart.data.labels||[],{xScale:s,yScale:a}=i,l=this.getParsed(t),c=s.getLabelForValue(l.x),d=a.getLabelForValue(l.y),u=l._custom;return{label:o[t]||"",value:"("+c+", "+d+(u?", "+u:"")+")"}}update(t){const i=this._cachedMeta.data;this.updateElements(i,0,i.length,t)}updateElements(t,i,o,s){const a="reset"===s,{iScale:l,vScale:c}=this._cachedMeta,{sharedOptions:d,includeOptions:u}=this._getSharedOptions(i,s),h=l.axis,f=c.axis;for(let p=i;p<i+o;p++){const m=t[p],g=!a&&this.getParsed(p),_={},x=_[h]=a?l.getPixelForDecimal(.5):l.getPixelForValue(g[h]),b=_[f]=a?c.getBasePixel():c.getPixelForValue(g[f]);_.skip=isNaN(x)||isNaN(b),u&&(_.options=d||this.resolveDataElementOptions(p,m.active?"active":s),a&&(_.options.radius=0)),this.updateElement(m,p,_,s)}}resolveDataElementOptions(t,i){const o=this.getParsed(t);let s=super.resolveDataElementOptions(t,i);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const a=s.radius;return"active"!==i&&(s.radius=0),s.radius+=F(o&&o._custom,a),s}}return T(n,"id","bubble"),T(n,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),T(n,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}}),n})(),xa=(()=>{class n extends Ve{constructor(t,i){super(t,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,i){const o=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=o;else{let l,c,a=d=>+o[d];if(L(o[t])){const{key:d="value"}=this._parsing;a=u=>+Le(o[u],d)}for(l=t,c=t+i;l<c;++l)s._parsed[l]=a(l)}}_getRotation(){return Ht(this.options.rotation-90)}_getCircumference(){return Ht(this.options.circumference)}_getRotationExtents(){let t=K,i=-K;for(let o=0;o<this.chart.data.datasets.length;++o)if(this.chart.isDatasetVisible(o)&&this.chart.getDatasetMeta(o).type===this._type){const s=this.chart.getDatasetMeta(o).controller,a=s._getRotation(),l=s._getCircumference();t=Math.min(t,a),i=Math.max(i,a+l)}return{rotation:t,circumference:i-t}}update(t){const i=this.chart,{chartArea:o}=i,s=this._cachedMeta,a=s.data,l=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,c=Math.max((Math.min(o.width,o.height)-l)/2,0),d=Math.min(((n,e)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100:+n/e)(this.options.cutout,c),1),u=this._getRingWeight(this.index),{circumference:h,rotation:f}=this._getRotationExtents(),{ratioX:p,ratioY:m,offsetX:g,offsetY:_}=function Rw(n,e,t){let i=1,o=1,s=0,a=0;if(e<K){const l=n,c=l+e,d=Math.cos(l),u=Math.sin(l),h=Math.cos(c),f=Math.sin(c),p=(C,k,y)=>Ii(C,l,c,!0)?1:Math.max(k,k*t,y,y*t),m=(C,k,y)=>Ii(C,l,c,!0)?-1:Math.min(k,k*t,y,y*t),g=p(0,d,h),_=p(nt,u,f),x=m(G,d,h),b=m(G+nt,u,f);i=(g-x)/2,o=(_-b)/2,s=-(g+x)/2,a=-(_+b)/2}return{ratioX:i,ratioY:o,offsetX:s,offsetY:a}}(f,h,d),C=Math.max(Math.min((o.width-l)/p,(o.height-l)/m)/2,0),k=uu(this.options.radius,C),w=(k-Math.max(k*d,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*k,this.offsetY=_*k,s.total=this.calculateTotal(),this.outerRadius=k-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*u,0),this.updateElements(a,0,a.length,t)}_circumference(t,i){const o=this.options,s=this._cachedMeta,a=this._getCircumference();return i&&o.animation.animateRotate||!this.chart.getDataVisibility(t)||null===s._parsed[t]||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*a/K)}updateElements(t,i,o,s){const a="reset"===s,l=this.chart,c=l.chartArea,h=(c.left+c.right)/2,f=(c.top+c.bottom)/2,p=a&&l.options.animation.animateScale,m=p?0:this.innerRadius,g=p?0:this.outerRadius,{sharedOptions:_,includeOptions:x}=this._getSharedOptions(i,s);let C,b=this._getRotation();for(C=0;C<i;++C)b+=this._circumference(C,a);for(C=i;C<i+o;++C){const k=this._circumference(C,a),y=t[C],w={x:h+this.offsetX,y:f+this.offsetY,startAngle:b,endAngle:b+k,circumference:k,outerRadius:g,innerRadius:m};x&&(w.options=_||this.resolveDataElementOptions(C,y.active?"active":s)),b+=k,this.updateElement(y,C,w,s)}}calculateTotal(){const t=this._cachedMeta,i=t.data;let s,o=0;for(s=0;s<i.length;s++){const a=t._parsed[s];null!==a&&!isNaN(a)&&this.chart.getDataVisibility(s)&&!i[s].hidden&&(o+=Math.abs(a))}return o}calculateCircumference(t){const i=this._cachedMeta.total;return i>0&&!isNaN(t)?K*(Math.abs(t)/i):0}getLabelAndValue(t){const o=this.chart,s=o.data.labels||[],a=Ri(this._cachedMeta._parsed[t],o.options.locale);return{label:s[t]||"",value:a}}getMaxBorderWidth(t){let i=0;const o=this.chart;let s,a,l,c,d;if(!t)for(s=0,a=o.data.datasets.length;s<a;++s)if(o.isDatasetVisible(s)){l=o.getDatasetMeta(s),t=l.data,c=l.controller;break}if(!t)return 0;for(s=0,a=t.length;s<a;++s)d=c.resolveDataElementOptions(s),"inner"!==d.borderAlign&&(i=Math.max(i,d.borderWidth||0,d.hoverBorderWidth||0));return i}getMaxOffset(t){let i=0;for(let o=0,s=t.length;o<s;++o){const a=this.resolveDataElementOptions(o);i=Math.max(i,a.offset||0,a.hoverOffset||0)}return i}_getRingWeightOffset(t){let i=0;for(let o=0;o<t;++o)this.chart.isDatasetVisible(o)&&(i+=this._getRingWeight(o));return i}_getRingWeight(t){return Math.max(F(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return T(n,"id","doughnut"),T(n,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),T(n,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),T(n,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:o}}=e.legend.options;return t.labels.map((s,a)=>{const c=e.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:o,lineWidth:c.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}}),n})(),Fw=(()=>{class n extends Ve{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const i=this._cachedMeta,{dataset:o,data:s=[],_dataset:a}=i,l=this.chart._animationsDisabled;let{start:c,count:d}=Mu(i,s,l);this._drawStart=c,this._drawCount=d,Tu(i)&&(c=0,d=s.length),o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!a._decimated,o.points=s;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(o,void 0,{animated:!l,options:u},t),this.updateElements(s,c,d,t)}updateElements(t,i,o,s){const a="reset"===s,{iScale:l,vScale:c,_stacked:d,_dataset:u}=this._cachedMeta,{sharedOptions:h,includeOptions:f}=this._getSharedOptions(i,s),p=l.axis,m=c.axis,{spanGaps:g,segment:_}=this.options,x=Jn(g)?g:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||a||"none"===s,C=i+o,k=t.length;let y=i>0&&this.getParsed(i-1);for(let w=0;w<k;++w){const S=t[w],v=b?S:{};if(w<i||w>=C){v.skip=!0;continue}const D=this.getParsed(w),I=B(D[m]),P=v[p]=l.getPixelForValue(D[p],w),q=v[m]=a||I?c.getBasePixel():c.getPixelForValue(d?this.applyStack(c,D,d):D[m],w);v.skip=isNaN(P)||isNaN(q)||I,v.stop=w>0&&Math.abs(D[p]-y[p])>x,_&&(v.parsed=D,v.raw=u.data[w]),f&&(v.options=h||this.resolveDataElementOptions(w,S.active?"active":s)),b||this.updateElement(S,w,v,s),y=D}}getMaxOverflow(){const t=this._cachedMeta,i=t.dataset,o=i.options&&i.options.borderWidth||0,s=t.data||[];if(!s.length)return o;const a=s[0].size(this.resolveDataElementOptions(0)),l=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(o,a,l)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return T(n,"id","line"),T(n,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),T(n,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}}),n})(),fh=(()=>{class n extends Ve{constructor(t,i){super(t,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const o=this.chart,s=o.data.labels||[],a=Ri(this._cachedMeta._parsed[t].r,o.options.locale);return{label:s[t]||"",value:a}}parseObjectData(t,i,o,s){return Bu.bind(this)(t,i,o,s)}update(t){const i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,t)}getMinMax(){const i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((o,s)=>{const a=this.getParsed(s).r;!isNaN(a)&&this.chart.getDataVisibility(s)&&(a<i.min&&(i.min=a),a>i.max&&(i.max=a))}),i}_updateRadius(){const t=this.chart,i=t.chartArea,o=t.options,s=Math.min(i.right-i.left,i.bottom-i.top),a=Math.max(s/2,0),c=(a-Math.max(o.cutoutPercentage?a/100*o.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=a-c*this.index,this.innerRadius=this.outerRadius-c}updateElements(t,i,o,s){const a="reset"===s,l=this.chart,d=l.options.animation,u=this._cachedMeta.rScale,h=u.xCenter,f=u.yCenter,p=u.getIndexAngle(0)-.5*G;let g,m=p;const _=360/this.countVisibleElements();for(g=0;g<i;++g)m+=this._computeAngle(g,s,_);for(g=i;g<i+o;g++){const x=t[g];let b=m,C=m+this._computeAngle(g,s,_),k=l.getDataVisibility(g)?u.getDistanceFromCenterForValue(this.getParsed(g).r):0;m=C,a&&(d.animateScale&&(k=0),d.animateRotate&&(b=C=p));const y={x:h,y:f,innerRadius:0,outerRadius:k,startAngle:b,endAngle:C,options:this.resolveDataElementOptions(g,x.active?"active":s)};this.updateElement(x,g,y,s)}}countVisibleElements(){let i=0;return this._cachedMeta.data.forEach((o,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&i++}),i}_computeAngle(t,i,o){return this.chart.getDataVisibility(t)?Ht(this.resolveDataElementOptions(t,i).angle||o):0}}return T(n,"id","polarArea"),T(n,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),T(n,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:o}}=e.legend.options;return t.labels.map((s,a)=>{const c=e.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:o,lineWidth:c.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}}),n})();var Zw=Object.freeze({__proto__:null,BarController:Iw,BubbleController:Pw,DoughnutController:xa,LineController:Fw,PieController:(()=>{class n extends xa{}return T(n,"id","pie"),T(n,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"}),n})(),PolarAreaController:fh,RadarController:(()=>{class n extends Ve{getLabelAndValue(t){const i=this._cachedMeta.vScale,o=this.getParsed(t);return{label:i.getLabels()[t],value:""+i.getLabelForValue(o[i.axis])}}parseObjectData(t,i,o,s){return Bu.bind(this)(t,i,o,s)}update(t){const i=this._cachedMeta,o=i.dataset,s=i.data||[],a=i.iScale.getLabels();if(o.points=s,"resize"!==t){const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),this.updateElement(o,void 0,{_loop:!0,_fullLoop:a.length===s.length,options:l},t)}this.updateElements(s,0,s.length,t)}updateElements(t,i,o,s){const a=this._cachedMeta.rScale,l="reset"===s;for(let c=i;c<i+o;c++){const d=t[c],u=this.resolveDataElementOptions(c,d.active?"active":s),h=a.getPointPositionForValue(c,this.getParsed(c).r),f=l?a.xCenter:h.x,p=l?a.yCenter:h.y,m={x:f,y:p,angle:h.angle,skip:isNaN(f)||isNaN(p),options:u};this.updateElement(d,c,m,s)}}}return T(n,"id","radar"),T(n,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),T(n,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}}),n})(),ScatterController:(()=>{class n extends Ve{getLabelAndValue(t){const i=this._cachedMeta,o=this.chart.data.labels||[],{xScale:s,yScale:a}=i,l=this.getParsed(t),c=s.getLabelForValue(l.x),d=a.getLabelForValue(l.y);return{label:o[t]||"",value:"("+c+", "+d+")"}}update(t){const i=this._cachedMeta,{data:o=[]}=i,s=this.chart._animationsDisabled;let{start:a,count:l}=Mu(i,o,s);if(this._drawStart=a,this._drawCount=l,Tu(i)&&(a=0,l=o.length),this.options.showLine){const{dataset:c,_dataset:d}=i;c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!d._decimated,c.points=o;const u=this.resolveDatasetElementOptions(t);u.segment=this.options.segment,this.updateElement(c,void 0,{animated:!s,options:u},t)}this.updateElements(o,a,l,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,i,o,s){const a="reset"===s,{iScale:l,vScale:c,_stacked:d,_dataset:u}=this._cachedMeta,h=this.resolveDataElementOptions(i,s),f=this.getSharedOptions(h),p=this.includeOptions(s,f),m=l.axis,g=c.axis,{spanGaps:_,segment:x}=this.options,b=Jn(_)?_:Number.POSITIVE_INFINITY,C=this.chart._animationsDisabled||a||"none"===s;let k=i>0&&this.getParsed(i-1);for(let y=i;y<i+o;++y){const w=t[y],S=this.getParsed(y),v=C?w:{},D=B(S[g]),I=v[m]=l.getPixelForValue(S[m],y),P=v[g]=a||D?c.getBasePixel():c.getPixelForValue(d?this.applyStack(c,S,d):S[g],y);v.skip=isNaN(I)||isNaN(P)||D,v.stop=y>0&&Math.abs(S[m]-k[m])>b,x&&(v.parsed=S,v.raw=u.data[y]),p&&(v.options=f||this.resolveDataElementOptions(y,w.active?"active":s)),C||this.updateElement(w,y,v,s),k=S}this.updateSharedOptions(f,s,h)}getMaxOverflow(){const t=this._cachedMeta,i=t.data||[];if(!this.options.showLine){let c=0;for(let d=i.length-1;d>=0;--d)c=Math.max(c,i[d].size(this.resolveDataElementOptions(d))/2);return c>0&&c}const o=t.dataset,s=o.options&&o.options.borderWidth||0;if(!i.length)return s;const a=i[0].size(this.resolveDataElementOptions(0)),l=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,a,l)/2}}return T(n,"id","scatter"),T(n,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),T(n,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}}),n})()});function yn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class ba{static override(e){Object.assign(ba.prototype,e)}constructor(e){T(this,"options",void 0),this.options=e||{}}init(){}formats(){return yn()}parse(){return yn()}format(){return yn()}add(){return yn()}diff(){return yn()}startOf(){return yn()}endOf(){return yn()}}var Lw__date=ba;function qw(n,e,t,i){const{controller:o,data:s,_sorted:a}=n,l=o._cachedMeta.iScale;if(l&&e===l.axis&&"r"!==e&&a&&s.length){const c=l._reversePixels?sk:me;if(!i)return c(s,e,t);if(o._sharedOptions){const d=s[0],u="function"==typeof d.getRange&&d.getRange(e);if(u){const h=c(s,e,t-u),f=c(s,e,t+u);return{lo:h.lo,hi:f.hi}}}}return{lo:0,hi:s.length-1}}function zi(n,e,t,i,o){const s=n.getSortedVisibleDatasetMetas(),a=t[e];for(let l=0,c=s.length;l<c;++l){const{index:d,data:u}=s[l],{lo:h,hi:f}=qw(s[l],e,a,o);for(let p=h;p<=f;++p){const m=u[p];m.skip||i(m,d,p)}}}function ya(n,e,t,i,o){const s=[];return!o&&!n.isPointInArea(e)||zi(n,t,e,function(l,c,d){!o&&!ge(l,n.chartArea,0)||l.inRange(e.x,e.y,i)&&s.push({element:l,datasetIndex:c,index:d})},!0),s}function va(n,e,t,i,o,s){return s||n.isPointInArea(e)?"r"!==t||i?function Vw(n,e,t,i,o,s){let a=[];const l=function zw(n){const e=-1!==n.indexOf("x"),t=-1!==n.indexOf("y");return function(i,o){const s=e?Math.abs(i.x-o.x):0,a=t?Math.abs(i.y-o.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}(t);let c=Number.POSITIVE_INFINITY;return zi(n,t,e,function d(u,h,f){const p=u.inRange(e.x,e.y,o);if(i&&!p)return;const m=u.getCenterPoint(o);if(!s&&!n.isPointInArea(m)&&!p)return;const _=l(e,m);_<c?(a=[{element:u,datasetIndex:h,index:f}],c=_):_===c&&a.push({element:u,datasetIndex:h,index:f})}),a}(n,e,t,i,o,s):function Bw(n,e,t,i){let o=[];return zi(n,t,e,function s(a,l,c){const{startAngle:d,endAngle:u}=a.getProps(["startAngle","endAngle"],i),{angle:h}=bu(a,{x:e.x,y:e.y});Ii(h,d,u)&&o.push({element:a,datasetIndex:l,index:c})}),o}(n,e,t,o):[]}function ph(n,e,t,i,o){const s=[],a="x"===t?"inXRange":"inYRange";let l=!1;return zi(n,t,e,(c,d,u)=>{c[a](e[t],o)&&(s.push({element:c,datasetIndex:d,index:u}),l=l||c.inRange(e.x,e.y,o))}),i&&!l?[]:s}var Uw={evaluateInteractionItems:zi,modes:{index(n,e,t,i){const o=xn(e,n),s=t.axis||"x",a=t.includeInvisible||!1,l=t.intersect?ya(n,o,s,i,a):va(n,o,s,!1,i,a),c=[];return l.length?(n.getSortedVisibleDatasetMetas().forEach(d=>{const u=l[0].index,h=d.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:d.index,index:u})}),c):[]},dataset(n,e,t,i){const o=xn(e,n),s=t.axis||"xy",a=t.includeInvisible||!1;let l=t.intersect?ya(n,o,s,i,a):va(n,o,s,!1,i,a);if(l.length>0){const c=l[0].datasetIndex,d=n.getDatasetMeta(c).data;l=[];for(let u=0;u<d.length;++u)l.push({element:d[u],datasetIndex:c,index:u})}return l},point:(n,e,t,i)=>ya(n,xn(e,n),t.axis||"xy",i,t.includeInvisible||!1),nearest:(n,e,t,i)=>va(n,xn(e,n),t.axis||"xy",t.intersect,i,t.includeInvisible||!1),x:(n,e,t,i)=>ph(n,xn(e,n),"x",t.intersect,i),y:(n,e,t,i)=>ph(n,xn(e,n),"y",t.intersect,i)}};const mh=["left","top","right","bottom"];function Bi(n,e){return n.filter(t=>t.pos===e)}function gh(n,e){return n.filter(t=>-1===mh.indexOf(t.pos)&&t.box.axis===e)}function Vi(n,e){return n.sort((t,i)=>{const o=e?i:t,s=e?t:i;return o.weight===s.weight?o.index-s.index:o.weight-s.weight})}function _h(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function xh(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function Ww(n,e,t,i){const{pos:o,box:s}=t,a=n.maxPadding;if(!L(o)){t.size&&(n[o]-=t.size);const h=i[t.stack]||{size:0,count:1};h.size=Math.max(h.size,t.horizontal?s.height:s.width),t.size=h.size/h.count,n[o]+=t.size}s.getPadding&&xh(a,s.getPadding());const l=Math.max(0,e.outerWidth-_h(a,n,"left","right")),c=Math.max(0,e.outerHeight-_h(a,n,"top","bottom")),d=l!==n.w,u=c!==n.h;return n.w=l,n.h=c,t.horizontal?{same:d,other:u}:{same:u,other:d}}function Qw(n,e){const t=e.maxPadding;return function i(o){const s={left:0,top:0,right:0,bottom:0};return o.forEach(a=>{s[a]=Math.max(e[a],t[a])}),s}(n?["left","right"]:["top","bottom"])}function Ui(n,e,t,i){const o=[];let s,a,l,c,d,u;for(s=0,a=n.length,d=0;s<a;++s){l=n[s],c=l.box,c.update(l.width||e.w,l.height||e.h,Qw(l.horizontal,e));const{same:h,other:f}=Ww(e,t,l,i);d|=h&&o.length,u=u||f,c.fullSize||o.push(l)}return d&&Ui(o,e,t,i)||u}function ss(n,e,t,i,o){n.top=t,n.left=e,n.right=e+i,n.bottom=t+o,n.width=i,n.height=o}function bh(n,e,t,i){const o=t.padding;let{x:s,y:a}=e;for(const l of n){const c=l.box,d=i[l.stack]||{count:1,placed:0,weight:1},u=l.stackWeight/d.weight||1;if(l.horizontal){const h=e.w*u,f=d.size||c.height;Ei(d.start)&&(a=d.start),c.fullSize?ss(c,o.left,a,t.outerWidth-o.right-o.left,f):ss(c,e.left+d.placed,a,h,f),d.start=a,d.placed+=h,a=c.bottom}else{const h=e.h*u,f=d.size||c.width;Ei(d.start)&&(s=d.start),c.fullSize?ss(c,s,o.top,f,t.outerHeight-o.bottom-o.top):ss(c,s,e.top+d.placed,f,h),d.start=s,d.placed+=h,s=c.right}}e.x=s,e.y=a}var _t={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;-1!==t&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const o=gt(n.options.layout.padding),s=Math.max(e-o.width,0),a=Math.max(t-o.height,0),l=function Yw(n){const e=function Hw(n){const e=[];let t,i,o,s,a,l;for(t=0,i=(n||[]).length;t<i;++t)o=n[t],({position:s,options:{stack:a,stackWeight:l=1}}=o),e.push({index:t,box:o,pos:s,horizontal:o.isHorizontal(),weight:o.weight,stack:a&&s+a,stackWeight:l});return e}(n),t=Vi(e.filter(d=>d.box.fullSize),!0),i=Vi(Bi(e,"left"),!0),o=Vi(Bi(e,"right")),s=Vi(Bi(e,"top"),!0),a=Vi(Bi(e,"bottom")),l=gh(e,"x"),c=gh(e,"y");return{fullSize:t,leftAndTop:i.concat(s),rightAndBottom:o.concat(c).concat(a).concat(l),chartArea:Bi(e,"chartArea"),vertical:i.concat(o).concat(c),horizontal:s.concat(a).concat(l)}}(n.boxes),c=l.vertical,d=l.horizontal;V(n.boxes,g=>{"function"==typeof g.beforeLayout&&g.beforeLayout()});const u=c.reduce((g,_)=>_.box.options&&!1===_.box.options.display?g:g+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:t,padding:o,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/u,hBoxMaxHeight:a/2}),f=Object.assign({},o);xh(f,gt(i));const p=Object.assign({maxPadding:f,w:s,h:a,x:o.left,y:o.top},o),m=function Jw(n,e){const t=function jw(n){const e={};for(const t of n){const{stack:i,pos:o,stackWeight:s}=t;if(!i||!mh.includes(o))continue;const a=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return e}(n),{vBoxMaxWidth:i,hBoxMaxHeight:o}=e;let s,a,l;for(s=0,a=n.length;s<a;++s){l=n[s];const{fullSize:c}=l.box,d=t[l.stack],u=d&&l.stackWeight/d.weight;l.horizontal?(l.width=u?u*i:c&&e.availableWidth,l.height=o):(l.width=i,l.height=u?u*o:c&&e.availableHeight)}return t}(c.concat(d),h);Ui(l.fullSize,p,h,m),Ui(c,p,h,m),Ui(d,p,h,m)&&Ui(c,p,h,m),function $w(n){const e=n.maxPadding;function t(i){const o=Math.max(e[i]-n[i],0);return n[i]+=o,o}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}(p),bh(l.leftAndTop,p,h,m),p.x+=p.w,p.y+=p.h,bh(l.rightAndBottom,p,h,m),n.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},V(l.chartArea,g=>{const _=g.box;Object.assign(_,n.chartArea),_.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class yh{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,o){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,o?Math.floor(t/o):i)}}isAttached(e){return!0}updateConfig(e){}}class Kw extends yh{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const rs="$chartjs",Gw={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},vh=n=>null===n||""===n,Ch=!!Gk&&{passive:!0};function eM(n,e,t){n.canvas.removeEventListener(e,t,Ch)}function as(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function iM(n,e,t){const i=n.canvas,o=new MutationObserver(s=>{let a=!1;for(const l of s)a=a||as(l.addedNodes,i),a=a&&!as(l.removedNodes,i);a&&t()});return o.observe(document,{childList:!0,subtree:!0}),o}function oM(n,e,t){const i=n.canvas,o=new MutationObserver(s=>{let a=!1;for(const l of s)a=a||as(l.removedNodes,i),a=a&&!as(l.addedNodes,i);a&&t()});return o.observe(document,{childList:!0,subtree:!0}),o}const Hi=new Map;let kh=0;function wh(){const n=window.devicePixelRatio;n!==kh&&(kh=n,Hi.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function aM(n,e,t){const i=n.canvas,o=i&&pa(i);if(!o)return;const s=wu((l,c)=>{const d=o.clientWidth;t(l,c),d<o.clientWidth&&t()},window),a=new ResizeObserver(l=>{const c=l[0],d=c.contentRect.width,u=c.contentRect.height;0===d&&0===u||s(d,u)});return a.observe(o),function sM(n,e){Hi.size||window.addEventListener("resize",wh),Hi.set(n,e)}(n,s),a}function Ca(n,e,t){t&&t.disconnect(),"resize"===e&&function rM(n){Hi.delete(n),Hi.size||window.removeEventListener("resize",wh)}(n)}function lM(n,e,t){const i=n.canvas,o=wu(s=>{null!==n.ctx&&t(function nM(n,e){const t=Gw[n.type]||n.type,{x:i,y:o}=xn(n,e);return{type:t,chart:e,native:n,x:void 0!==i?i:null,y:void 0!==o?o:null}}(s,n))},n);return function tM(n,e,t){n.addEventListener(e,t,Ch)}(i,e,o),o}class cM extends yh{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(function Xw(n,e){const t=n.style,i=n.getAttribute("height"),o=n.getAttribute("width");if(n[rs]={initial:{height:i,width:o,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",vh(o)){const s=ju(n,"width");void 0!==s&&(n.width=s)}if(vh(i))if(""===n.style.height)n.height=n.width/(e||2);else{const s=ju(n,"height");void 0!==s&&(n.height=s)}}(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[rs])return!1;const i=t[rs].initial;["height","width"].forEach(s=>{const a=i[s];B(a)?t.removeAttribute(s):t.setAttribute(s,a)});const o=i.style||{};return Object.keys(o).forEach(s=>{t.style[s]=o[s]}),t.width=t.width,delete t[rs],!0}addEventListener(e,t,i){this.removeEventListener(e,t),(e.$proxies||(e.$proxies={}))[t]=({attach:iM,detach:oM,resize:aM}[t]||lM)(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),o=i[t];o&&(({attach:Ca,detach:Ca,resize:Ca}[t]||eM)(e,t,o),i[t]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,o){return function Kk(n,e,t,i){const o=ns(n),s=_n(o,"margin"),a=es(o.maxWidth,n,"clientWidth")||Wo,l=es(o.maxHeight,n,"clientHeight")||Wo,c=function Qk(n,e,t){let i,o;if(void 0===e||void 0===t){const s=pa(n);if(s){const a=s.getBoundingClientRect(),l=ns(s),c=_n(l,"border","width"),d=_n(l,"padding");e=a.width-d.width-c.width,t=a.height-d.height-c.height,i=es(l.maxWidth,s,"clientWidth"),o=es(l.maxHeight,s,"clientHeight")}else e=n.clientWidth,t=n.clientHeight}return{width:e,height:t,maxWidth:i||Wo,maxHeight:o||Wo}}(n,e,t);let{width:d,height:u}=c;if("content-box"===o.boxSizing){const f=_n(o,"border","width"),p=_n(o,"padding");d-=p.width+f.width,u-=p.height+f.height}return d=Math.max(0,d-s.width),u=Math.max(0,i?d/i:u-s.height),d=is(Math.min(d,a,c.maxWidth)),u=is(Math.min(u,l,c.maxHeight)),d&&!u&&(u=is(d/2)),(void 0!==e||void 0!==t)&&i&&c.height&&u>c.height&&(u=c.height,d=is(Math.floor(u*i))),{width:d,height:u}}(e,t,i,o)}isAttached(e){const t=pa(e);return!(!t||!t.isConnected)}}class jt{constructor(){T(this,"x",void 0),T(this,"y",void 0),T(this,"active",!1),T(this,"options",void 0),T(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return Jn(this.x)&&Jn(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const o={};return e.forEach(s=>{o[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),o}}function ls(n,e,t,i,o){const s=F(i,0),a=Math.min(F(o,n.length),n.length);let c,d,u,l=0;for(t=Math.ceil(t),o&&(c=o-i,t=c/Math.floor(c/t)),u=s;u<0;)l++,u=Math.round(s+l*t);for(d=Math.max(s,0);d<a;d++)d===u&&(e.push(n[d]),l++,u=Math.round(s+l*t))}T(jt,"defaults",{}),T(jt,"defaultRoutes",void 0);const Mh=(n,e,t)=>"top"===e||"left"===e?n[e]+t:n[e]-t,Th=(n,e)=>Math.min(e||n,n);function Sh(n,e){const t=[],i=n.length/e,o=n.length;let s=0;for(;s<o;s+=i)t.push(n[Math.floor(s)]);return t}function xM(n,e,t){const i=n.ticks.length,o=Math.min(e,i-1),s=n._startPixel,a=n._endPixel,l=1e-6;let d,c=n.getPixelForTick(o);if(!(t&&(d=1===i?Math.max(c-s,a-c):0===e?(n.getPixelForTick(1)-c)/2:(c-n.getPixelForTick(o-1))/2,c+=o<e?d:-d,c<s-l||c>a+l)))return c}function ji(n){return n.drawTicks?n.tickLength:0}function Ah(n,e){if(!n.display)return 0;const t=rt(n.font,e),i=gt(n.padding);return(Q(n.text)?n.text.length:1)*t.lineHeight+i.height}function CM(n,e,t){let i=oa(n);return(t&&"right"!==e||!t&&"right"===e)&&(i=(n=>"left"===n?"right":"right"===n?"left":n)(i)),i}class vn extends jt{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:o}=this;return e=Ot(e,Number.POSITIVE_INFINITY),t=Ot(t,Number.NEGATIVE_INFINITY),i=Ot(i,Number.POSITIVE_INFINITY),o=Ot(o,Number.NEGATIVE_INFINITY),{min:Ot(e,i),max:Ot(t,o),minDefined:et(e),maxDefined:et(t)}}getMinMax(e){let a,{min:t,max:i,minDefined:o,maxDefined:s}=this.getUserBounds();if(o&&s)return{min:t,max:i};const l=this.getMatchingVisibleMetas();for(let c=0,d=l.length;c<d;++c)a=l[c].controller.getMinMax(this,e),o||(t=Math.min(t,a.min)),s||(i=Math.max(i,a.max));return t=s&&t>i?i:t,i=o&&t>i?t:i,{min:Ot(t,Ot(i,t)),max:Ot(i,Ot(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Y(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:o,grace:s,ticks:a}=this.options,l=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function Dk(n,e,t){const{min:i,max:o}=n,s=uu(e,(o-i)/2),a=(l,c)=>t&&0===l?0:l+c;return{min:a(i,-Math.abs(s)),max:a(o,s)}}(this,s,o),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?Sh(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||"auto"===a.source)&&(this.ticks=function uM(n,e){const t=n.options.ticks,i=function hM(n){const e=n.options.offset,t=n._tickSize();return Math.floor(Math.min(n._length/t+(e?0:1),n._maxLength/t))}(n),o=Math.min(t.maxTicksLimit||i,i),s=t.major.enabled?function pM(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}(e):[],a=s.length,l=s[0],c=s[a-1],d=[];if(a>o)return function mM(n,e,t,i){let a,o=0,s=t[0];for(i=Math.ceil(i),a=0;a<n.length;a++)a===s&&(e.push(n[a]),o++,s=t[o*i])}(e,d,s,a/o),d;const u=function fM(n,e,t){const i=function gM(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}(n),o=e.length/t;if(!i)return Math.max(o,1);const s=function ek(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i==0&&(e.push(i),e.push(n/i));return t===(0|t)&&e.push(t),e.sort((o,s)=>o-s).pop(),e}(i);for(let a=0,l=s.length-1;a<l;a++){const c=s[a];if(c>o)return c}return Math.max(o,1)}(s,e,o);if(a>0){let h,f;const p=a>1?Math.round((c-l)/(a-1)):null;for(ls(e,d,u,B(p)?0:l-p,l),h=0,f=a-1;h<f;h++)ls(e,d,u,s[h],s[h+1]);return ls(e,d,u,c,B(p)?e.length:c+p),d}return ls(e,d,u),d}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,i,e=this.options.reverse;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Y(this.options.afterUpdate,[this])}beforeSetDimensions(){Y(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Y(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Y(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Y(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,o,s;for(i=0,o=e.length;i<o;i++)s=e[i],s.label=Y(t.callback,[s.value,i,e],this)}afterTickToLabelConversion(){Y(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Y(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=Th(this.ticks.length,e.ticks.maxTicksLimit),o=t.minRotation||0,s=t.maxRotation;let l,c,d,a=o;if(!this._isVisible()||!t.display||o>=s||i<=1||!this.isHorizontal())return void(this.labelRotation=o);const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,p=at(this.chart.width-h,0,this.maxWidth);l=e.offset?this.maxWidth/i:p/(i-1),h+6>l&&(l=p/(i-(e.offset?.5:1)),c=this.maxHeight-ji(e.grid)-t.padding-Ah(e.title,this.chart.options.font),d=Math.sqrt(h*h+f*f),a=ea(Math.min(Math.asin(at((u.highest.height+6)/l,-1,1)),Math.asin(at(c/d,-1,1))-Math.asin(at(f/d,-1,1)))),a=Math.max(o,Math.min(s,a))),this.labelRotation=a}afterCalculateLabelRotation(){Y(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Y(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:o,grid:s}}=this,a=this._isVisible(),l=this.isHorizontal();if(a){const c=Ah(o,t.options.font);if(l?(e.width=this.maxWidth,e.height=ji(s)+c):(e.height=this.maxHeight,e.width=ji(s)+c),i.display&&this.ticks.length){const{first:d,last:u,widest:h,highest:f}=this._getLabelSizes(),p=2*i.padding,m=Ht(this.labelRotation),g=Math.cos(m),_=Math.sin(m);l?e.height=Math.min(this.maxHeight,e.height+(i.mirror?0:_*h.width+g*f.height)+p):e.width=Math.min(this.maxWidth,e.width+(i.mirror?0:g*h.width+_*f.height)+p),this._calculatePadding(d,u,_,g)}}this._handleMargins(),l?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,o){const{ticks:{align:s,padding:a},position:l}=this.options,c=0!==this.labelRotation,d="top"!==l&&"x"===this.axis;if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;c?d?(f=o*e.width,p=i*t.height):(f=i*e.height,p=o*t.width):"start"===s?p=t.width:"end"===s?f=e.width:"inner"!==s&&(f=e.width/2,p=t.width/2),this.paddingLeft=Math.max((f-u+a)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-h+a)*this.width/(this.width-h),0)}else{let u=t.height/2,h=e.height/2;"start"===s?(u=0,h=e.height):"end"===s&&(u=t.height,h=0),this.paddingTop=u+a,this.paddingBottom=h+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Y(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,i=e.length;t<i;t++)B(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=Sh(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:o,_longestTextCache:s}=this,a=[],l=[],c=Math.floor(t/Th(t,i));let h,f,p,m,g,_,x,b,C,k,y,d=0,u=0;for(h=0;h<t;h+=c){if(m=e[h].label,g=this._resolveTickFontOptions(h),o.font=_=g.string,x=s[_]=s[_]||{data:{},gc:[]},b=g.lineHeight,C=k=0,B(m)||Q(m)){if(Q(m))for(f=0,p=m.length;f<p;++f)y=m[f],!B(y)&&!Q(y)&&(C=Ko(o,x.data,x.gc,C,y),k+=b)}else C=Ko(o,x.data,x.gc,C,m),k=b;a.push(C),l.push(k),d=Math.max(C,d),u=Math.max(k,u)}!function bM(n,e){V(n,t=>{const i=t.gc,o=i.length/2;let s;if(o>e){for(s=0;s<o;++s)delete t.data[i[s]];i.splice(0,o)}})}(s,t);const w=a.indexOf(d),S=l.indexOf(u),v=D=>({width:a[D]||0,height:l[D]||0});return{first:v(0),last:v(t-1),widest:v(w),highest:v(S),widths:a,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return function ok(n){return at(n,-32768,32767)}(this._alignToPixels?pn(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=function vM(n,e,t){return Be(n,{tick:t,index:e,type:"tick"})}(this.getContext(),e,i))}return this.$context||(this.$context=function yM(n,e){return Be(n,{scale:e,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Ht(this.labelRotation),i=Math.abs(Math.cos(t)),o=Math.abs(Math.sin(t)),s=this._getLabelSizes(),a=e.autoSkipPadding||0,l=s?s.widest.width+a:0,c=s?s.highest.height+a:0;return this.isHorizontal()?c*i>l*o?l/i:c/o:c*o<l*i?c/i:l/o}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,o=this.options,{grid:s,position:a,border:l}=o,c=s.offset,d=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=ji(s),p=[],m=l.setContext(this.getContext()),g=m.display?m.width:0,_=g/2,x=function(X){return pn(i,X,g)};let b,C,k,y,w,S,v,D,I,P,q,ht;if("top"===a)b=x(this.bottom),S=this.bottom-f,D=b-_,P=x(e.top)+_,ht=e.bottom;else if("bottom"===a)b=x(this.top),P=e.top,ht=x(e.bottom)-_,S=b+_,D=this.top+f;else if("left"===a)b=x(this.right),w=this.right-f,v=b-_,I=x(e.left)+_,q=e.right;else if("right"===a)b=x(this.left),I=e.left,q=x(e.right)-_,w=b+_,v=this.left+f;else if("x"===t){if("center"===a)b=x((e.top+e.bottom)/2+.5);else if(L(a)){const X=Object.keys(a)[0];b=x(this.chart.scales[X].getPixelForValue(a[X]))}P=e.top,ht=e.bottom,S=b+_,D=S+f}else if("y"===t){if("center"===a)b=x((e.left+e.right)/2);else if(L(a)){const X=Object.keys(a)[0];b=x(this.chart.scales[X].getPixelForValue(a[X]))}w=b-_,v=w-f,I=e.left,q=e.right}const Nt=F(o.ticks.maxTicksLimit,h),H=Math.max(1,Math.ceil(h/Nt));for(C=0;C<h;C+=H){const X=this.getContext(C),it=s.setContext(X),Jt=l.setContext(X),xt=it.lineWidth,ei=it.color,Ms=Jt.dash||[],ni=Jt.dashOffset,Gi=it.tickWidth,Xi=it.tickColor,to=it.tickBorderDash||[],eo=it.tickBorderDashOffset;k=xM(this,C,c),void 0!==k&&(y=pn(i,k,xt),d?w=v=I=q=y:S=D=P=ht=y,p.push({tx1:w,ty1:S,tx2:v,ty2:D,x1:I,y1:P,x2:q,y2:ht,width:xt,color:ei,borderDash:Ms,borderDashOffset:ni,tickWidth:Gi,tickColor:Xi,tickBorderDash:to,tickBorderDashOffset:eo}))}return this._ticksLength=h,this._borderValue=b,p}_computeLabelItems(e){const t=this.axis,i=this.options,{position:o,ticks:s}=i,a=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:u,mirror:h}=s,f=ji(i.grid),p=f+u,m=h?-u:p,g=-Ht(this.labelRotation),_=[];let x,b,C,k,y,w,S,v,D,I,P,q,ht="middle";if("top"===o)w=this.bottom-m,S=this._getXAxisLabelAlignment();else if("bottom"===o)w=this.top+m,S=this._getXAxisLabelAlignment();else if("left"===o){const H=this._getYAxisLabelAlignment(f);S=H.textAlign,y=H.x}else if("right"===o){const H=this._getYAxisLabelAlignment(f);S=H.textAlign,y=H.x}else if("x"===t){if("center"===o)w=(e.top+e.bottom)/2+p;else if(L(o)){const H=Object.keys(o)[0];w=this.chart.scales[H].getPixelForValue(o[H])+p}S=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===o)y=(e.left+e.right)/2-p;else if(L(o)){const H=Object.keys(o)[0];y=this.chart.scales[H].getPixelForValue(o[H])}S=this._getYAxisLabelAlignment(f).textAlign}"y"===t&&("start"===c?ht="top":"end"===c&&(ht="bottom"));const Nt=this._getLabelSizes();for(x=0,b=l.length;x<b;++x){C=l[x],k=C.label;const H=s.setContext(this.getContext(x));v=this.getPixelForTick(x)+s.labelOffset,D=this._resolveTickFontOptions(x),I=D.lineHeight,P=Q(k)?k.length:1;const X=P/2,it=H.color,Jt=H.textStrokeColor,xt=H.textStrokeWidth;let Ms,ei=S;if(a?(y=v,"inner"===S&&(ei=x===b-1?this.options.reverse?"left":"right":0===x?this.options.reverse?"right":"left":"center"),q="top"===o?"near"===d||0!==g?-P*I+I/2:"center"===d?-Nt.highest.height/2-X*I+I:I/2-Nt.highest.height:"near"===d||0!==g?I/2:"center"===d?Nt.highest.height/2-X*I:Nt.highest.height-P*I,h&&(q*=-1),0!==g&&!H.showLabelBackdrop&&(y+=I/2*Math.sin(g))):(w=v,q=(1-P)*I/2),H.showLabelBackdrop){const ni=gt(H.backdropPadding),Gi=Nt.heights[x],Xi=Nt.widths[x];let to=q-ni.top,eo=0-ni.left;switch(ht){case"middle":to-=Gi/2;break;case"bottom":to-=Gi}switch(S){case"center":eo-=Xi/2;break;case"right":eo-=Xi}Ms={left:eo,top:to,width:Xi+ni.width,height:Gi+ni.height,color:H.backdropColor}}_.push({label:k,font:D,textOffset:q,options:{rotation:g,color:it,strokeColor:Jt,strokeWidth:xt,textAlign:ei,textBaseline:ht,translation:[y,w],backdrop:Ms}})}return _}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Ht(this.labelRotation))return"top"===e?"left":"right";let o="center";return"start"===t.align?o="left":"end"===t.align?o="right":"inner"===t.align&&(o="inner"),o}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:o,padding:s}}=this.options,l=e+s,c=this._getLabelSizes().widest.width;let d,u;return"left"===t?o?(u=this.right+s,"near"===i?d="left":"center"===i?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-l,"near"===i?d="right":"center"===i?(d="center",u-=c/2):(d="left",u=this.left)):"right"===t?o?(u=this.left+s,"near"===i?d="right":"center"===i?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+l,"near"===i?d="left":"center"===i?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:o,width:s,height:a}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,o,s,a),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const o=this.ticks.findIndex(s=>s.value===e);return o>=0?t.setContext(this.getContext(o)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,o=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,a;const l=(c,d,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(d.x,d.y),i.stroke(),i.restore())};if(t.display)for(s=0,a=o.length;s<a;++s){const c=o[s];t.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:o}}=this,s=i.setContext(this.getContext()),a=i.display?s.width:0;if(!a)return;const l=o.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,h,f;this.isHorizontal()?(d=pn(e,this.left,a)-a/2,u=pn(e,this.right,l)+l/2,h=f=c):(h=pn(e,this.top,a)-a/2,f=pn(e,this.bottom,l)+l/2,d=u=c),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(d,h),t.lineTo(u,f),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,o=this._computeLabelArea();o&&Go(i,o);const s=this.getLabelItems(e);for(const a of s)mn(i,a.label,0,a.textOffset,a.font,a.options);o&&Xo(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:o}}=this;if(!i.display)return;const s=rt(i.font),a=gt(i.padding),l=i.align;let c=s.lineHeight/2;"bottom"===t||"center"===t||L(t)?(c+=a.bottom,Q(i.text)&&(c+=s.lineHeight*(i.text.length-1))):c+=a.top;const{titleX:d,titleY:u,maxWidth:h,rotation:f}=function kM(n,e,t,i){const{top:o,left:s,bottom:a,right:l,chart:c}=n,{chartArea:d,scales:u}=c;let f,p,m,h=0;const g=a-o,_=l-s;if(n.isHorizontal()){if(p=mt(i,s,l),L(t)){const x=Object.keys(t)[0];m=u[x].getPixelForValue(t[x])+g-e}else m="center"===t?(d.bottom+d.top)/2+g-e:Mh(n,t,e);f=l-s}else{if(L(t)){const x=Object.keys(t)[0];p=u[x].getPixelForValue(t[x])-_+e}else p="center"===t?(d.left+d.right)/2-_+e:Mh(n,t,e);m=mt(i,a,o),h="left"===t?-nt:nt}return{titleX:p,titleY:m,maxWidth:f,rotation:h}}(this,c,t,l);mn(e,i.text,0,0,s,{color:i.color,maxWidth:h,rotation:f,textAlign:CM(l,t,o),textBaseline:"middle",translation:[d,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=F(e.grid&&e.grid.z,-1),o=F(e.border&&e.border.z,0);return this._isVisible()&&this.draw===vn.prototype.draw?[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:o,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]:[{z:t,draw:s=>{this.draw(s)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",o=[];let s,a;for(s=0,a=t.length;s<a;++s){const l=t[s];l[i]===this.id&&(!e||l.type===e)&&o.push(l)}return o}_resolveTickFontOptions(e){return rt(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class cs{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;(function TM(n){return"id"in n&&"defaults"in n})(t)&&(i=this.register(t));const o=this.items,s=e.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in o||(o[s]=e,function wM(n,e,t){const i=Di(Object.create(null),[t?tt.get(t):{},tt.get(e),n.defaults]);tt.set(e,i),n.defaultRoutes&&function MM(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),o=i.pop(),s=[n].concat(i).join("."),a=e[t].split("."),l=a.pop(),c=a.join(".");tt.route(s,o,c,l)})}(e,n.defaultRoutes),n.descriptors&&tt.describe(e,n.descriptors)}(e,a,i),this.override&&tt.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,o=this.scope;i in t&&delete t[i],o&&i in tt[o]&&(delete tt[o][i],this.override&&delete fn[i])}}class SM{constructor(){this.controllers=new cs(Ve,"datasets",!0),this.elements=new cs(jt,"elements"),this.plugins=new cs(Object,"plugins"),this.scales=new cs(vn,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(o=>{const s=i||this._getRegistryForType(o);i||s.isForType(o)||s===this.plugins&&o.id?this._exec(e,s,o):V(o,a=>{const l=i||this._getRegistryForType(a);this._exec(e,l,a)})})}_exec(e,t,i){const o=ta(e);Y(i["before"+o],[],i),t[e](i),Y(i["after"+o],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const o=t.get(e);if(void 0===o)throw new Error('"'+e+'" is not a registered '+i+".");return o}}var ie=new SM;class AM{constructor(){this._init=[]}notify(e,t,i,o){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=o?this._descriptors(e).filter(o):this._descriptors(e),a=this._notify(s,e,t,i);return"afterDestroy"===t&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),a}_notify(e,t,i,o){o=o||{};for(const s of e){const a=s.plugin;if(!1===Y(a[i],[t,o,s.options],a)&&o.cancelable)return!1}return!0}invalidate(){B(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,o=F(i.options&&i.options.plugins,{}),s=function DM(n){const e={},t=[],i=Object.keys(ie.plugins.items);for(let s=0;s<i.length;s++)t.push(ie.getPlugin(i[s]));const o=n.plugins||[];for(let s=0;s<o.length;s++){const a=o[s];-1===t.indexOf(a)&&(t.push(a),e[a.id]=!0)}return{plugins:t,localIds:e}}(i);return!1!==o||t?function EM(n,{plugins:e,localIds:t},i,o){const s=[],a=n.getContext();for(const l of e){const c=l.id,d=OM(i[c],o);null!==d&&s.push({plugin:l,options:NM(n.config,{plugin:l,local:t[c]},d,a)})}return s}(e,s,o,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,o=(s,a)=>s.filter(l=>!a.some(c=>l.plugin.id===c.plugin.id));this._notify(o(t,i),e,"stop"),this._notify(o(i,t),e,"start")}}function OM(n,e){return e||!1!==n?!0===n?{}:n:null}function NM(n,{plugin:e,local:t},i,o){const s=n.pluginScopeKeys(e),a=n.getOptionScopes(i,s);return t&&e.defaults&&a.push(e.defaults),n.createResolver(a,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ka(n,e){return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||(tt.datasets[n]||{}).indexAxis||"x"}function Dh(n){if("x"===n||"y"===n||"r"===n)return n}function RM(n){return"top"===n||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0}function wa(n,...e){if(Dh(n))return n;for(const t of e){const i=t.axis||RM(t.position)||n.length>1&&Dh(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Oh(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function Eh(n){const e=n.options||(n.options={});e.plugins=F(e.plugins,{}),e.scales=function ZM(n,e){const t=fn[n.type]||{scales:{}},i=e.scales||{},o=ka(n.type,e),s=Object.create(null);return Object.keys(i).forEach(a=>{const l=i[a];if(!L(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=wa(a,l,function FM(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return Oh(n,"x",t[0])||Oh(n,"y",t[0])}return{}}(a,n),tt.scales[l.type]),d=function PM(n,e){return n===e?"_index_":"_value_"}(c,o),u=t.scales||{};s[a]=Oi(Object.create(null),[{axis:c},l,u[c],u[d]])}),n.data.datasets.forEach(a=>{const l=a.type||n.type,c=a.indexAxis||ka(l,e),u=(fn[l]||{}).scales||{};Object.keys(u).forEach(h=>{const f=function IM(n,e){let t=n;return"_index_"===n?t=e:"_value_"===n&&(t="x"===e?"y":"x"),t}(h,c),p=a[f+"AxisID"]||f;s[p]=s[p]||Object.create(null),Oi(s[p],[{axis:f},i[p],u[h]])})}),Object.keys(s).forEach(a=>{const l=s[a];Oi(l,[tt.scales[l.type],tt.scale])}),s}(n,e)}function Nh(n){return(n=n||{}).datasets=n.datasets||[],n.labels=n.labels||[],n}const Ih=new Map,Ph=new Set;function ds(n,e){let t=Ih.get(n);return t||(t=e(),Ih.set(n,t),Ph.add(t)),t}const Ji=(n,e,t)=>{const i=Le(e,t);void 0!==i&&n.add(i)};class qM{constructor(e){this._config=function LM(n){return(n=n||{}).data=Nh(n.data),Eh(n),n}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Nh(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Eh(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return ds(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return ds(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return ds(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id;return ds(`${this.type}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let o=i.get(e);return(!o||t)&&(o=new Map,i.set(e,o)),o}getOptionScopes(e,t,i){const{options:o,type:s}=this,a=this._cachedScopes(e,i),l=a.get(t);if(l)return l;const c=new Set;t.forEach(u=>{e&&(c.add(e),u.forEach(h=>Ji(c,e,h))),u.forEach(h=>Ji(c,o,h)),u.forEach(h=>Ji(c,fn[s]||{},h)),u.forEach(h=>Ji(c,tt,h)),u.forEach(h=>Ji(c,aa,h))});const d=Array.from(c);return 0===d.length&&d.push(Object.create(null)),Ph.has(t)&&a.set(t,d),d}chartOptionScopes(){const{options:e,type:t}=this;return[e,fn[t]||{},tt.datasets[t]||{},{type:t},tt,aa]}resolveNamedOptions(e,t,i,o=[""]){const s={$shared:!0},{resolver:a,subPrefixes:l}=Rh(this._resolverCache,e,o);let c=a;(function BM(n,e){const{isScriptable:t,isIndexable:i}=Ru(n);for(const o of e){const s=t(o),a=i(o),l=(a||s)&&n[o];if(s&&(qe(l)||zM(l))||a&&Q(l))return!0}return!1})(a,t)&&(s.$shared=!1,c=Yn(a,i=qe(i)?i():i,this.createResolver(e,i,l)));for(const d of t)s[d]=c[d];return s}createResolver(e,t,i=[""],o){const{resolver:s}=Rh(this._resolverCache,e,i);return L(t)?Yn(s,t,void 0,o):s}}function Rh(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const o=t.join();let s=i.get(o);return s||(s={resolver:ua(e,t),subPrefixes:t.filter(l=>!l.toLowerCase().includes("hover"))},i.set(o,s)),s}const zM=n=>L(n)&&Object.getOwnPropertyNames(n).reduce((e,t)=>e||qe(n[t]),!1),UM=["top","bottom","left","right","chartArea"];function Fh(n,e){return"top"===n||"bottom"===n||-1===UM.indexOf(n)&&"x"===e}function Zh(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function Lh(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Y(t&&t.onComplete,[n],e)}function HM(n){const e=n.chart,t=e.options.animation;Y(t&&t.onProgress,[n],e)}function qh(n){return Uu()&&"string"==typeof n?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const us={},zh=n=>{const e=qh(n);return Object.values(us).filter(t=>t.canvas===e).pop()};function jM(n,e,t){const i=Object.keys(n);for(const o of i){const s=+o;if(s>=e){const a=n[o];delete n[o],(t>0||s>e)&&(n[s+t]=a)}}}let Ma=(()=>{class n{static register(...t){ie.add(...t),Bh()}static unregister(...t){ie.remove(...t),Bh()}constructor(t,i){const o=this.config=new qM(i),s=qh(t),a=zh(s);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const l=o.createResolver(o.chartOptionScopes(),this.getContext());this.platform=new(o.platform||function dM(n){return!Uu()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?Kw:cM}(s)),this.platform.updateConfig(o);const c=this.platform.acquireContext(s,l.aspectRatio),d=c&&c.canvas,u=d&&d.height,h=d&&d.width;this.id=JC(),this.ctx=c,this.canvas=d,this.width=h,this.height=u,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new AM,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function lk(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}(f=>this.update(f),l.resizeDelay||0),this._dataChanges=[],us[this.id]=this,c&&d?(_e.listen(this,"complete",Lh),_e.listen(this,"progress",HM),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:i},width:o,height:s,_aspectRatio:a}=this;return B(t)?i&&a?a:s?o/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return ie}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Hu(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Nu(this.canvas,this.ctx),this}stop(){return _e.stop(this),this}resize(t,i){_e.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){const o=this.options,l=this.platform.getMaximumSize(this.canvas,t,i,o.maintainAspectRatio&&this.aspectRatio),c=o.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,Hu(this,c,!0)&&(this.notifyPlugins("resize",{size:l}),Y(o.onResize,[this,l],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){V(this.options.scales||{},(o,s)=>{o.id=s})}buildOrUpdateScales(){const t=this.options,i=t.scales,o=this.scales,s=Object.keys(o).reduce((l,c)=>(l[c]=!1,l),{});let a=[];i&&(a=a.concat(Object.keys(i).map(l=>{const c=i[l],d=wa(l,c),u="r"===d,h="x"===d;return{options:c,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),V(a,l=>{const c=l.options,d=c.id,u=wa(d,c),h=F(c.type,l.dtype);(void 0===c.position||Fh(c.position,u)!==Fh(l.dposition))&&(c.position=l.dposition),s[d]=!0;let f=null;d in o&&o[d].type===h?f=o[d]:(f=new(ie.getScale(h))({id:d,type:h,ctx:this.ctx,chart:this}),o[f.id]=f),f.init(c,t)}),V(s,(l,c)=>{l||delete o[c]}),V(o,l=>{_t.configure(this,l,l.options),_t.addBox(this,l)})}_updateMetasets(){const t=this._metasets,i=this.data.datasets.length,o=t.length;if(t.sort((s,a)=>s.index-a.index),o>i){for(let s=i;s<o;++s)this._destroyDatasetMeta(s);t.splice(i,o-i)}this._sortedMetasets=t.slice(0).sort(Zh("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((o,s)=>{0===i.filter(a=>a===o._dataset).length&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],i=this.data.datasets;let o,s;for(this._removeUnreferencedMetasets(),o=0,s=i.length;o<s;o++){const a=i[o];let l=this.getDatasetMeta(o);const c=a.type||this.config.type;if(l.type&&l.type!==c&&(this._destroyDatasetMeta(o),l=this.getDatasetMeta(o)),l.type=c,l.indexAxis=a.indexAxis||ka(c,this.options),l.order=a.order||0,l.index=o,l.label=""+a.label,l.visible=this.isDatasetVisible(o),l.controller)l.controller.updateIndex(o),l.controller.linkScales();else{const d=ie.getController(c),{datasetElementType:u,dataElementType:h}=tt.datasets[c];Object.assign(d,{dataElementType:ie.getElement(h),datasetElementType:u&&ie.getElement(u)}),l.controller=new d(this,o),t.push(l.controller)}}return this._updateMetasets(),t}_resetElements(){V(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const i=this.config;i.update();const o=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!o.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let u=0,h=this.data.datasets.length;u<h;u++){const{controller:f}=this.getDatasetMeta(u),p=!s&&-1===a.indexOf(f);f.buildOrUpdateElements(p),l=Math.max(+f.getMaxOverflow(),l)}l=this._minPadding=o.layout.autoPadding?l:0,this._updateLayout(l),s||V(a,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Zh("z","_idx"));const{_active:c,_lastEvent:d}=this;d?this._eventHandler(d,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){V(this.scales,t=>{_t.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,i=new Set(Object.keys(this._listeners)),o=new Set(t.events);(!pu(i,o)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(const{method:o,start:s,count:a}of i)jM(t,s,"_removeElements"===o?-a:a)}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const i=this.data.datasets.length,o=a=>new Set(t.filter(l=>l[0]===a).map((l,c)=>c+","+l.splice(1).join(","))),s=o(0);for(let a=1;a<i;a++)if(!pu(s,o(a)))return;return Array.from(s).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;_t.update(this,this.width,this.height,t);const i=this.chartArea,o=i.width<=0||i.height<=0;this._layers=[],V(this.boxes,s=>{o&&"chartArea"===s.position||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,a)=>{s._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let i=0,o=this.data.datasets.length;i<o;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,o=this.data.datasets.length;i<o;++i)this._updateDataset(i,qe(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){const o=this.getDatasetMeta(t),s={meta:o,index:t,mode:i,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",s)&&(o.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(_e.has(this)?this.attached&&!_e.running(this)&&_e.start(this):(this.draw(),Lh({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:o,height:s}=this._resizeBeforeDraw;this._resize(o,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const i=this._sortedMetasets,o=[];let s,a;for(s=0,a=i.length;s<a;++s){const l=i[s];(!t||l.visible)&&o.push(l)}return o}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const i=this.ctx,o=t._clip,s=!o.disabled,a=function YM(n){const{xScale:e,yScale:t}=n;if(e&&t)return{left:e.left,right:e.right,top:t.top,bottom:t.bottom}}(t)||this.chartArea,l={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",l)&&(s&&Go(i,{left:!1===o.left?0:a.left-o.left,right:!1===o.right?this.width:a.right+o.right,top:!1===o.top?0:a.top-o.top,bottom:!1===o.bottom?this.height:a.bottom+o.bottom}),t.controller.draw(),s&&Xo(i),l.cancelable=!1,this.notifyPlugins("afterDatasetDraw",l))}isPointInArea(t){return ge(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,o,s){const a=Uw.modes[i];return"function"==typeof a?a(this,t,o,s):[]}getDatasetMeta(t){const i=this.data.datasets[t],o=this._metasets;let s=o.filter(a=>a&&a._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},o.push(s)),s}getContext(){return this.$context||(this.$context=Be(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const i=this.data.datasets[t];if(!i)return!1;const o=this.getDatasetMeta(t);return"boolean"==typeof o.hidden?!o.hidden:!i.hidden}setDatasetVisibility(t,i){this.getDatasetMeta(t).hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,o){const s=o?"show":"hide",a=this.getDatasetMeta(t),l=a.controller._resolveAnimations(void 0,s);Ei(i)?(a.data[i].hidden=!o,this.update()):(this.setDatasetVisibility(t,o),l.update(a,{visible:o}),this.update(c=>c.datasetIndex===t?s:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){const i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),_e.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Nu(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete us[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,i=this.platform,o=(a,l)=>{i.addEventListener(this,a,l),t[a]=l},s=(a,l,c)=>{a.offsetX=l,a.offsetY=c,this._eventHandler(a)};V(this.options.events,a=>o(a,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,i=this.platform,o=(d,u)=>{i.addEventListener(this,d,u),t[d]=u},s=(d,u)=>{t[d]&&(i.removeEventListener(this,d,u),delete t[d])},a=(d,u)=>{this.canvas&&this.resize(d,u)};let l;const c=()=>{s("attach",c),this.attached=!0,this.resize(),o("resize",a),o("detach",l)};l=()=>{this.attached=!1,s("resize",a),this._stop(),this._resize(0,0),o("attach",c)},i.isAttached(this.canvas)?c():l()}unbindEvents(){V(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},V(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,o){const s=o?"set":"remove";let a,l,c,d;for("dataset"===i&&(a=this.getDatasetMeta(t[0].datasetIndex),a.controller["_"+s+"DatasetHoverStyle"]()),c=0,d=t.length;c<d;++c){l=t[c];const u=l&&this.getDatasetMeta(l.datasetIndex).controller;u&&u[s+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const i=this._active||[],o=t.map(({datasetIndex:a,index:l})=>{const c=this.getDatasetMeta(a);if(!c)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:c.data[l],index:l}});!Jo(o,i)&&(this._active=o,this._lastEvent=null,this._updateHoverStyles(o,i))}notifyPlugins(t,i,o){return this._plugins.notify(this,t,i,o)}isPluginEnabled(t){return 1===this._plugins._cache.filter(i=>i.plugin.id===t).length}_updateHoverStyles(t,i,o){const s=this.options.hover,a=(d,u)=>d.filter(h=>!u.some(f=>h.datasetIndex===f.datasetIndex&&h.index===f.index)),l=a(i,t),c=o?t:a(t,i);l.length&&this.updateHoverStyle(l,s.mode,!1),c.length&&s.mode&&this.updateHoverStyle(c,s.mode,!0)}_eventHandler(t,i){const o={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},s=l=>(l.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",o,s))return;const a=this._handleEvent(t,i,o.inChartArea);return o.cancelable=!1,this.notifyPlugins("afterEvent",o,s),(a||o.changed)&&this.render(),this}_handleEvent(t,i,o){const{_active:s=[],options:a}=this,c=this._getActiveElements(t,s,o,i),d=function GC(n){return"mouseup"===n.type||"click"===n.type||"contextmenu"===n.type}(t),u=function JM(n,e,t,i){return t&&"mouseout"!==n.type?i?e:n:null}(t,this._lastEvent,o,d);o&&(this._lastEvent=null,Y(a.onHover,[t,c,this],this),d&&Y(a.onClick,[t,c,this],this));const h=!Jo(c,s);return(h||i)&&(this._active=c,this._updateHoverStyles(c,s,i)),this._lastEvent=u,h}_getActiveElements(t,i,o,s){if("mouseout"===t.type)return[];if(!o)return i;const a=this.options.hover;return this.getElementsAtEventForMode(t,a.mode,a,s)}}return T(n,"defaults",tt),T(n,"instances",us),T(n,"overrides",fn),T(n,"registry",ie),T(n,"version","4.3.0"),T(n,"getChart",zh),n})();function Bh(){return V(Ma.instances,n=>n._plugins.invalidate())}function Qn(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function hs(n,e,t,i,o,s){const{x:a,y:l,startAngle:c,pixelMargin:d,innerRadius:u}=e,h=Math.max(e.outerRadius+i+t-d,0),f=u>0?u+i+t+d:0;let p=0;const m=o-c;if(i){const it=((u>0?u-i:0)+(h>0?h-i:0))/2;p=(m-(0!==it?m*it/(it+i):m))/2}const _=(m-Math.max(.001,m*h-t/G)/h)/2,x=c+_+p,b=o-_-p,{outerStart:C,outerEnd:k,innerStart:y,innerEnd:w}=function QM(n,e,t,i){const o=function $M(n){return da(n,["outerStart","outerEnd","innerStart","innerEnd"])}(n.options.borderRadius),s=(t-e)/2,a=Math.min(s,i*e/2),l=c=>{const d=(t-Math.min(s,c))*i/2;return at(c,0,Math.min(s,d))};return{outerStart:l(o.outerStart),outerEnd:l(o.outerEnd),innerStart:at(o.innerStart,0,a),innerEnd:at(o.innerEnd,0,a)}}(e,f,h,b-x),S=h-C,v=h-k,D=x+C/S,I=b-k/v,P=f+y,q=f+w,ht=x+y/P,Nt=b-w/q;if(n.beginPath(),s){const H=(D+I)/2;if(n.arc(a,l,h,D,H),n.arc(a,l,h,H,I),k>0){const xt=Qn(v,I,a,l);n.arc(xt.x,xt.y,k,I,b+nt)}const X=Qn(q,b,a,l);if(n.lineTo(X.x,X.y),w>0){const xt=Qn(q,Nt,a,l);n.arc(xt.x,xt.y,w,b+nt,Nt+Math.PI)}const it=(b-w/f+(x+y/f))/2;if(n.arc(a,l,f,b-w/f,it,!0),n.arc(a,l,f,it,x+y/f,!0),y>0){const xt=Qn(P,ht,a,l);n.arc(xt.x,xt.y,y,ht+Math.PI,x-nt)}const Jt=Qn(S,x,a,l);if(n.lineTo(Jt.x,Jt.y),C>0){const xt=Qn(S,D,a,l);n.arc(xt.x,xt.y,C,x-nt,D)}}else{n.moveTo(a,l);const H=Math.cos(D)*h+a,X=Math.sin(D)*h+l;n.lineTo(H,X);const it=Math.cos(I)*h+a,Jt=Math.sin(I)*h+l;n.lineTo(it,Jt)}n.closePath()}class Yi extends jt{constructor(e){super(),T(this,"circumference",void 0),T(this,"endAngle",void 0),T(this,"fullCircles",void 0),T(this,"innerRadius",void 0),T(this,"outerRadius",void 0),T(this,"pixelMargin",void 0),T(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){const o=this.getProps(["x","y"],i),{angle:s,distance:a}=bu(o,{x:e,y:t}),{startAngle:l,endAngle:c,innerRadius:d,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),f=(this.options.spacing+this.options.borderWidth)/2,m=F(h,c-l)>=K||Ii(s,l,c),g=pe(a,d+f,u+f);return m&&g}getCenterPoint(e){const{x:t,y:i,startAngle:o,endAngle:s,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:d}=this.options,u=(o+s)/2,h=(a+l+d+c)/2;return{x:t+Math.cos(u)*h,y:i+Math.sin(u)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:i}=this,o=(t.offset||0)/4,s=(t.spacing||0)/2,a=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=i>K?Math.floor(i/K):0,0===i||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*o,Math.sin(l)*o);const d=o*(1-Math.sin(Math.min(G,i||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function KM(n,e,t,i,o){const{fullCircles:s,startAngle:a,circumference:l}=e;let c=e.endAngle;if(s){hs(n,e,t,i,c,o);for(let d=0;d<s;++d)n.fill();isNaN(l)||(c=a+(l%K||K))}hs(n,e,t,i,c,o),n.fill()}(e,this,d,s,a),function GM(n,e,t,i,o){const{fullCircles:s,startAngle:a,circumference:l,options:c}=e,{borderWidth:d,borderJoinStyle:u,borderDash:h,borderDashOffset:f}=c,p="inner"===c.borderAlign;if(!d)return;n.setLineDash(h||[]),n.lineDashOffset=f,p?(n.lineWidth=2*d,n.lineJoin=u||"round"):(n.lineWidth=d,n.lineJoin=u||"bevel");let m=e.endAngle;if(s){hs(n,e,t,i,m,o);for(let g=0;g<s;++g)n.stroke();isNaN(l)||(m=a+(l%K||K))}p&&function WM(n,e,t){const{startAngle:i,pixelMargin:o,x:s,y:a,outerRadius:l,innerRadius:c}=e;let d=o/l;n.beginPath(),n.arc(s,a,l,i-d,t+d),c>o?(d=o/c,n.arc(s,a,c,t+d,i-d,!0)):n.arc(s,a,o,t+nt,i-nt),n.closePath(),n.clip()}(n,e,m),s||(hs(n,e,t,i,m,o),n.stroke())}(e,this,d,s,a),e.restore()}}function Vh(n,e,t=e){n.lineCap=F(t.borderCapStyle,e.borderCapStyle),n.setLineDash(F(t.borderDash,e.borderDash)),n.lineDashOffset=F(t.borderDashOffset,e.borderDashOffset),n.lineJoin=F(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=F(t.borderWidth,e.borderWidth),n.strokeStyle=F(t.borderColor,e.borderColor)}function XM(n,e,t){n.lineTo(t.x,t.y)}function Uh(n,e,t={}){const i=n.length,{start:o=0,end:s=i-1}=t,{start:a,end:l}=e,c=Math.max(o,a),d=Math.min(s,l);return{count:i,start:c,loop:e.loop,ilen:d<c&&!(o<a&&s<a||o>l&&s>l)?i+d-c:d-c}}function eT(n,e,t,i){const{points:o,options:s}=e,{count:a,start:l,loop:c,ilen:d}=Uh(o,t,i),u=function tT(n){return n.stepped?yk:n.tension||"monotone"===n.cubicInterpolationMode?vk:XM}(s);let p,m,g,{move:h=!0,reverse:f}=i||{};for(p=0;p<=d;++p)m=o[(l+(f?d-p:p))%a],!m.skip&&(h?(n.moveTo(m.x,m.y),h=!1):u(n,g,m,f,s.stepped),g=m);return c&&(m=o[(l+(f?d:0))%a],u(n,g,m,f,s.stepped)),!!c}function nT(n,e,t,i){const o=e.points,{count:s,start:a,ilen:l}=Uh(o,t,i),{move:c=!0,reverse:d}=i||{};let f,p,m,g,_,x,u=0,h=0;const b=k=>(a+(d?l-k:k))%s,C=()=>{g!==_&&(n.lineTo(u,_),n.lineTo(u,g),n.lineTo(u,x))};for(c&&(p=o[b(0)],n.moveTo(p.x,p.y)),f=0;f<=l;++f){if(p=o[b(f)],p.skip)continue;const k=p.x,y=p.y,w=0|k;w===m?(y<g?g=y:y>_&&(_=y),u=(h*u+k)/++h):(C(),n.lineTo(k,y),m=w,h=0,g=_=y),x=y}C()}function Ta(n){const e=n.options;return n._decimated||n._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||e.borderDash&&e.borderDash.length?eT:nT}T(Yi,"id","arc"),T(Yi,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),T(Yi,"defaultRoutes",{backgroundColor:"backgroundColor"}),T(Yi,"descriptors",{_scriptable:!0,_indexable:n=>"borderDash"!==n});const rT="function"==typeof Path2D;let fs=(()=>{class n extends jt{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,i){const o=this.options;!o.tension&&"monotone"!==o.cubicInterpolationMode||o.stepped||this._pointsUpdated||(jk(this._points,o,t,o.spanGaps?this._loop:this._fullLoop,i),this._pointsUpdated=!0)}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function rw(n,e){const t=n.points,i=n.options.spanGaps,o=t.length;if(!o)return[];const s=!!n._loop,{start:a,end:l}=function ow(n,e,t,i){let o=0,s=e-1;if(t&&!i)for(;o<e&&!n[o].skip;)o++;for(;o<e&&n[o].skip;)o++;for(o%=e,t&&(s+=o);s>o&&n[s%e].skip;)s--;return s%=e,{start:o,end:s}}(t,o,s,i);return function Gu(n,e,t,i){return i&&i.setContext&&t?function aw(n,e,t,i){const o=n._chart.getContext(),s=Xu(n.options),{_datasetIndex:a,options:{spanGaps:l}}=n,c=t.length,d=[];let u=s,h=e[0].start,f=h;function p(m,g,_,x){const b=l?-1:1;if(m!==g){for(m+=c;t[m%c].skip;)m-=b;for(;t[g%c].skip;)g+=b;m%c!=g%c&&(d.push({start:m%c,end:g%c,loop:_,style:x}),u=x,h=g%c)}}for(const m of e){h=l?h:m.start;let _,g=t[h%c];for(f=h+1;f<=m.end;f++){const x=t[f%c];_=Xu(i.setContext(Be(o,{type:"segment",p0:g,p1:x,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:a}))),lw(_,u)&&p(h,f-1,m.loop,u),g=x,u=_}h<f-1&&p(h,f-1,m.loop,u)}return d}(n,e,t,i):e}(n,!0===i?[{start:a,end:l,loop:s}]:function sw(n,e,t,i){const o=n.length,s=[];let c,a=e,l=n[e];for(c=e+1;c<=t;++c){const d=n[c%o];d.skip||d.stop?l.skip||(s.push({start:e%o,end:(c-1)%o,loop:i=!1}),e=a=d.stop?c:null):(a=c,l.skip&&(e=c)),l=d}return null!==a&&s.push({start:e%o,end:a%o,loop:i}),s}(t,a,l<a?l+o:l,!!n._fullLoop&&0===a&&l===o-1),t,e)}(this,this.options.segment))}first(){const t=this.segments;return t.length&&this.points[t[0].start]}last(){const t=this.segments,o=t.length;return o&&this.points[t[o-1].end]}interpolate(t,i){const o=this.options,s=t[i],a=this.points,l=Ku(this,{property:i,start:s,end:s});if(!l.length)return;const c=[],d=function iT(n){return n.stepped?Xk:n.tension||"monotone"===n.cubicInterpolationMode?tw:bn}(o);let u,h;for(u=0,h=l.length;u<h;++u){const{start:f,end:p}=l[u],m=a[f],g=a[p];if(m===g){c.push(m);continue}const x=d(m,g,Math.abs((s-m[i])/(g[i]-m[i])),o.stepped);x[i]=t[i],c.push(x)}return 1===c.length?c[0]:c}pathSegment(t,i,o){return Ta(this)(t,this,i,o)}path(t,i,o){const s=this.segments,a=Ta(this);let l=this._loop;i=i||0,o=o||this.points.length-i;for(const c of s)l&=a(t,this,c,{start:i,end:i+o-1});return!!l}draw(t,i,o,s){(this.points||[]).length&&(this.options||{}).borderWidth&&(t.save(),function aT(n,e,t,i){rT&&!e.options.segment?function oT(n,e,t,i){let o=e._path;o||(o=e._path=new Path2D,e.path(o,t,i)&&o.closePath()),Vh(n,e.options),n.stroke(o)}(n,e,t,i):function sT(n,e,t,i){const{segments:o,options:s}=e,a=Ta(e);for(const l of o)Vh(n,s,l.style),n.beginPath(),a(n,e,l,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}(n,e,t,i)}(t,this,o,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return T(n,"id","line"),T(n,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),T(n,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),T(n,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e}),n})();function Hh(n,e,t,i){const o=n.options,{[t]:s}=n.getProps([t],i);return Math.abs(e-s)<o.radius+o.hitRadius}let lT=(()=>{class n extends jt{constructor(t){super(),T(this,"parsed",void 0),T(this,"skip",void 0),T(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,o){const s=this.options,{x:a,y:l}=this.getProps(["x","y"],o);return Math.pow(t-a,2)+Math.pow(i-l,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,i){return Hh(this,t,"x",i)}inYRange(t,i){return Hh(this,t,"y",i)}getCenterPoint(t){const{x:i,y:o}=this.getProps(["x","y"],t);return{x:i,y:o}}size(t){let i=(t=t||this.options||{}).radius||0;return i=Math.max(i,i&&t.hoverRadius||0),2*(i+(i&&t.borderWidth||0))}draw(t,i){const o=this.options;this.skip||o.radius<.1||!ge(this,i,this.size(o)/2)||(t.strokeStyle=o.borderColor,t.lineWidth=o.borderWidth,t.fillStyle=o.backgroundColor,ca(t,o,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}return T(n,"id","point"),T(n,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),T(n,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),n})();function jh(n,e){const{x:t,y:i,base:o,width:s,height:a}=n.getProps(["x","y","base","width","height"],e);let l,c,d,u,h;return n.horizontal?(h=a/2,l=Math.min(t,o),c=Math.max(t,o),d=i-h,u=i+h):(h=s/2,l=t-h,c=t+h,d=Math.min(i,o),u=Math.max(i,o)),{left:l,top:d,right:c,bottom:u}}function Ue(n,e,t,i){return n?0:at(e,t,i)}function Sa(n,e,t,i){const o=null===e,s=null===t,l=n&&!(o&&s)&&jh(n,i);return l&&(o||pe(e,l.left,l.right))&&(s||pe(t,l.top,l.bottom))}function fT(n,e){n.rect(e.x,e.y,e.w,e.h)}function Aa(n,e,t={}){const i=n.x!==t.x?-e:0,o=n.y!==t.y?-e:0;return{x:n.x+i,y:n.y+o,w:n.w+((n.x+n.w!==t.x+t.w?e:0)-i),h:n.h+((n.y+n.h!==t.y+t.h?e:0)-o),radius:n.radius}}class ps extends jt{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:o}}=this,{inner:s,outer:a}=function uT(n){const e=jh(n),t=e.right-e.left,i=e.bottom-e.top,o=function cT(n,e,t){const o=n.borderSkipped,s=Pu(n.options.borderWidth);return{t:Ue(o.top,s.top,0,t),r:Ue(o.right,s.right,0,e),b:Ue(o.bottom,s.bottom,0,t),l:Ue(o.left,s.left,0,e)}}(n,t/2,i/2),s=function dT(n,e,t){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),o=n.options.borderRadius,s=gn(o),a=Math.min(e,t),l=n.borderSkipped,c=i||L(o);return{topLeft:Ue(!c||l.top||l.left,s.topLeft,0,a),topRight:Ue(!c||l.top||l.right,s.topRight,0,a),bottomLeft:Ue(!c||l.bottom||l.left,s.bottomLeft,0,a),bottomRight:Ue(!c||l.bottom||l.right,s.bottomRight,0,a)}}(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:s},inner:{x:e.left+o.l,y:e.top+o.t,w:t-o.l-o.r,h:i-o.t-o.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,s.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(o.b,o.r))}}}}(this),l=function hT(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}(a.radius)?Zi:fT;e.save(),(a.w!==s.w||a.h!==s.h)&&(e.beginPath(),l(e,Aa(a,t,s)),e.clip(),l(e,Aa(s,-t,a)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),l(e,Aa(s,t)),e.fillStyle=o,e.fill(),e.restore()}inRange(e,t,i){return Sa(this,e,t,i)}inXRange(e,t){return Sa(this,e,null,t)}inYRange(e,t){return Sa(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:o,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+o)/2:t,y:s?i:(i+o)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}T(ps,"id","bar"),T(ps,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),T(ps,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var pT=Object.freeze({__proto__:null,ArcElement:Yi,BarElement:ps,LineElement:fs,PointElement:lT});const Da=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Jh=Da.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function Yh(n){return Da[n%Da.length]}function Wh(n){return Jh[n%Jh.length]}function $h(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}var yT={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;const{data:{datasets:i},options:o}=n.config,{elements:s}=o;if(!t.forceOverride&&($h(i)||function bT(n){return n&&(n.borderColor||n.backgroundColor)}(o)||s&&$h(s)))return;const a=function xT(n){let e=0;return(t,i)=>{const o=n.getDatasetMeta(i).controller;o instanceof xa?e=function gT(n,e){return n.backgroundColor=n.data.map(()=>Yh(e++)),e}(t,e):o instanceof fh?e=function _T(n,e){return n.backgroundColor=n.data.map(()=>Wh(e++)),e}(t,e):o&&(e=function mT(n,e){return n.borderColor=Yh(e),n.backgroundColor=Wh(e),++e}(t,e))}}(n);i.forEach(a)}};function Qh(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Kh(n){n.data.datasets.forEach(e=>{Qh(e)})}var wT={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled)return void Kh(n);const i=n.width;n.data.datasets.forEach((o,s)=>{const{_data:a,indexAxis:l}=o,c=n.getDatasetMeta(s),d=a||o.data;if("y"===Li([l,n.options.indexAxis])||!c.controller.supportsDecimation)return;const u=n.scales[c.xAxisID];if("linear"!==u.type&&"time"!==u.type||n.options.parsing)return;let m,{start:h,count:f}=function kT(n,e){const t=e.length;let o,i=0;const{iScale:s}=n,{min:a,max:l,minDefined:c,maxDefined:d}=s.getUserBounds();return c&&(i=at(me(e,s.axis,a).lo,0,t-1)),o=d?at(me(e,s.axis,l).hi+1,i,t)-i:t-i,{start:i,count:o}}(c,d);if(f<=(t.threshold||4*i))Qh(o);else{switch(B(a)&&(o._data=d,delete o.data,Object.defineProperty(o,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}})),t.algorithm){case"lttb":m=function vT(n,e,t,i,o){const s=o.samples||i;if(s>=t)return n.slice(e,e+t);const a=[],l=(t-2)/(s-2);let c=0;const d=e+t-1;let h,f,p,m,g,u=e;for(a[c++]=n[u],h=0;h<s-2;h++){let b,_=0,x=0;const C=Math.floor((h+1)*l)+1+e,k=Math.min(Math.floor((h+2)*l)+1,t)+e,y=k-C;for(b=C;b<k;b++)_+=n[b].x,x+=n[b].y;_/=y,x/=y;const w=Math.floor(h*l)+1+e,S=Math.min(Math.floor((h+1)*l)+1,t)+e,{x:v,y:D}=n[u];for(p=m=-1,b=w;b<S;b++)m=.5*Math.abs((v-_)*(n[b].y-D)-(v-n[b].x)*(x-D)),m>p&&(p=m,f=n[b],g=b);a[c++]=f,u=g}return a[c++]=n[d],a}(d,h,f,i,t);break;case"min-max":m=function CT(n,e,t,i){let a,l,c,d,u,h,f,p,m,g,o=0,s=0;const _=[],b=n[e].x,k=n[e+t-1].x-b;for(a=e;a<e+t;++a){l=n[a],c=(l.x-b)/k*i,d=l.y;const y=0|c;if(y===u)d<m?(m=d,h=a):d>g&&(g=d,f=a),o=(s*o+l.x)/++s;else{const w=a-1;if(!B(h)&&!B(f)){const S=Math.min(h,f),v=Math.max(h,f);S!==p&&S!==w&&_.push({...n[S],x:o}),v!==p&&v!==w&&_.push({...n[v],x:o})}a>0&&w!==p&&_.push(n[w]),_.push(l),u=y,s=0,m=g=d,h=f=p=a}}return _}(d,h,f,i);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}o._decimated=m}})},destroy(n){Kh(n)}};function Oa(n,e,t,i){if(i)return;let o=e[n],s=t[n];return"angle"===n&&(o=Et(o),s=Et(s)),{property:n,start:o,end:s}}function Ea(n,e,t){for(;e>n;e--){const i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function Gh(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function Xh(n,e){let t=[],i=!1;return Q(n)?(i=!0,t=n):t=function TT(n,e){const{x:t=null,y:i=null}=n||{},o=e.points,s=[];return e.segments.forEach(({start:a,end:l})=>{l=Ea(a,l,o);const c=o[a],d=o[l];null!==i?(s.push({x:c.x,y:i}),s.push({x:d.x,y:i})):null!==t&&(s.push({x:t,y:c.y}),s.push({x:t,y:d.y}))}),s}(n,e),t.length?new fs({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function tf(n){return n&&!1!==n.fill}function ST(n,e,t){let o=n[e].fill;const s=[e];let a;if(!t)return o;for(;!1!==o&&-1===s.indexOf(o);){if(!et(o))return o;if(a=n[o],!a)return!1;if(a.visible)return o;s.push(o),o=a.fill}return!1}function AT(n,e,t){const i=function NT(n){const e=n.options,t=e.fill;let i=F(t&&t.target,t);return void 0===i&&(i=!!e.backgroundColor),!1!==i&&null!==i&&(!0===i?"origin":i)}(n);if(L(i))return!isNaN(i.value)&&i;let o=parseFloat(i);return et(o)&&Math.floor(o)===o?function DT(n,e,t,i){return("-"===n||"+"===n)&&(t=e+t),!(t===e||t<0||t>=i)&&t}(i[0],e,o,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function RT(n,e,t){const i=[];for(let o=0;o<t.length;o++){const s=t[o],{first:a,last:l,point:c}=FT(s,e,"x");if(!(!c||a&&l))if(a)i.unshift(c);else if(n.push(c),!l)break}n.push(...i)}function FT(n,e,t){const i=n.interpolate(e,t);if(!i)return{};const o=i[t],s=n.segments,a=n.points;let l=!1,c=!1;for(let d=0;d<s.length;d++){const u=s[d],h=a[u.start][t],f=a[u.end][t];if(pe(o,h,f)){l=o===h,c=o===f;break}}return{first:l,last:c,point:i}}class ef{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:o,y:s,radius:a}=this;return e.arc(o,s,a,(t=t||{start:0,end:K}).end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:o}=this,s=e.angle;return{x:t+Math.cos(s)*o,y:i+Math.sin(s)*o,angle:s}}}function Na(n,e,t){const i=function ZT(n){const{chart:e,fill:t,line:i}=n;if(et(t))return function LT(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}(e,t);if("stack"===t)return function IT(n){const{scale:e,index:t,line:i}=n,o=[],s=i.segments,a=i.points,l=function PT(n,e){const t=[],i=n.getMatchingVisibleMetas("line");for(let o=0;o<i.length;o++){const s=i[o];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}(e,t);l.push(Xh({x:null,y:e.bottom},i));for(let c=0;c<s.length;c++){const d=s[c];for(let u=d.start;u<=d.end;u++)RT(o,a[u],l)}return new fs({points:o,options:{}})}(n);if("shape"===t)return!0;const o=function qT(n){return(n.scale||{}).getPointPositionForValue?function BT(n){const{scale:e,fill:t}=n,i=e.options,o=e.getLabels().length,s=i.reverse?e.max:e.min,a=function ET(n,e,t){let i;return i="start"===n?t:"end"===n?e.options.reverse?e.min:e.max:L(n)?n.value:e.getBaseValue(),i}(t,e,s),l=[];if(i.grid.circular){const c=e.getPointPositionForValue(0,s);return new ef({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(a)})}for(let c=0;c<o;++c)l.push(e.getPointPositionForValue(c,a));return l}(n):function zT(n){const{scale:e={},fill:t}=n,i=function OT(n,e){let t=null;return"start"===n?t=e.bottom:"end"===n?t=e.top:L(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}(t,e);if(et(i)){const o=e.isHorizontal();return{x:o?i:null,y:o?null:i}}return null}(n)}(n);return o instanceof ef?o:Xh(o,i)}(e),{line:o,scale:s,axis:a}=e,l=o.options,c=l.fill,d=l.backgroundColor,{above:u=d,below:h=d}=c||{};i&&o.points.length&&(Go(n,t),function VT(n,e){const{line:t,target:i,above:o,below:s,area:a,scale:l}=e,c=t._loop?"angle":e.axis;n.save(),"x"===c&&s!==o&&(nf(n,i,a.top),of(n,{line:t,target:i,color:o,scale:l,property:c}),n.restore(),n.save(),nf(n,i,a.bottom)),of(n,{line:t,target:i,color:s,scale:l,property:c}),n.restore()}(n,{line:o,target:i,above:u,below:h,area:t,scale:s,axis:a}),Xo(n))}function nf(n,e,t){const{segments:i,points:o}=e;let s=!0,a=!1;n.beginPath();for(const l of i){const{start:c,end:d}=l,u=o[c],h=o[Ea(c,d,o)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(u.x,t),n.lineTo(u.x,u.y)),a=!!e.pathSegment(n,l,{move:a}),a?n.closePath():n.lineTo(h.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function of(n,e){const{line:t,target:i,property:o,color:s,scale:a}=e,l=function MT(n,e,t){const i=n.segments,o=n.points,s=e.points,a=[];for(const l of i){let{start:c,end:d}=l;d=Ea(c,d,o);const u=Oa(t,o[c],o[d],l.loop);if(!e.segments){a.push({source:l,target:u,start:o[c],end:o[d]});continue}const h=Ku(e,u);for(const f of h){const p=Oa(t,s[f.start],s[f.end],f.loop),m=Qu(l,o,p);for(const g of m)a.push({source:g,target:f,start:{[t]:Gh(u,p,"start",Math.max)},end:{[t]:Gh(u,p,"end",Math.min)}})}}return a}(t,i,o);for(const{source:c,target:d,start:u,end:h}of l){const{style:{backgroundColor:f=s}={}}=c,p=!0!==i;n.save(),n.fillStyle=f,UT(n,a,p&&Oa(o,u,h)),n.beginPath();const m=!!t.pathSegment(n,c);let g;if(p){m?n.closePath():sf(n,i,h,o);const _=!!i.pathSegment(n,d,{move:m,reverse:!0});g=m&&_,g||sf(n,i,u,o)}n.closePath(),n.fill(g?"evenodd":"nonzero"),n.restore()}}function UT(n,e,t){const{top:i,bottom:o}=e.chart.chartArea,{property:s,start:a,end:l}=t||{};"x"===s&&(n.beginPath(),n.rect(a,i,l-a,o-i),n.clip())}function sf(n,e,t,i){const o=e.interpolate(t,i);o&&n.lineTo(o.x,o.y)}var HT={id:"filler",afterDatasetsUpdate(n,e,t){const i=(n.data.datasets||[]).length,o=[];let s,a,l,c;for(a=0;a<i;++a)s=n.getDatasetMeta(a),l=s.dataset,c=null,l&&l.options&&l instanceof fs&&(c={visible:n.isDatasetVisible(a),index:a,fill:AT(l,a,i),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:l}),s.$filler=c,o.push(c);for(a=0;a<i;++a)c=o[a],c&&!1!==c.fill&&(c.fill=ST(o,a,t.propagate))},beforeDraw(n,e,t){const i="beforeDraw"===t.drawTime,o=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let a=o.length-1;a>=0;--a){const l=o[a].$filler;l&&(l.line.updateControlPoints(s,l.axis),i&&l.fill&&Na(n.ctx,l,s))}},beforeDatasetsDraw(n,e,t){if("beforeDatasetsDraw"!==t.drawTime)return;const i=n.getSortedVisibleDatasetMetas();for(let o=i.length-1;o>=0;--o){const s=i[o].$filler;tf(s)&&Na(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){const i=e.meta.$filler;!tf(i)||"beforeDatasetDraw"!==t.drawTime||Na(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const rf=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}};class af extends jt{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Y(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,o)=>e.sort(i,o,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const i=e.labels,o=rt(i.font),s=o.size,a=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=rf(i,s);let d,u;t.font=o.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(a,s,l,c)+10):(u=this.maxHeight,d=this._fitCols(a,o,l,c)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,o){const{ctx:s,maxWidth:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=o+l;let h=e;s.textAlign="left",s.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((m,g)=>{const _=i+t/2+s.measureText(m.text).width;(0===g||d[d.length-1]+_+2*l>a)&&(h+=u,d[d.length-(g>0?0:1)]=0,p+=u,f++),c[g]={left:0,top:p,row:f,width:_,height:o},d[d.length-1]+=_+l}),h}_fitCols(e,t,i,o){const{ctx:s,maxHeight:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=a-e;let h=l,f=0,p=0,m=0,g=0;return this.legendItems.forEach((_,x)=>{const{itemWidth:b,itemHeight:C}=function JT(n,e,t,i,o){const s=function YT(n,e,t,i){let o=n.text;return o&&"string"!=typeof o&&(o=o.reduce((s,a)=>s.length>a.length?s:a)),e+t.size/2+i.measureText(o).width}(i,n,e,t),a=function WT(n,e,t){let i=n;return"string"!=typeof e.text&&(i=lf(e,t)),i}(o,i,e.lineHeight);return{itemWidth:s,itemHeight:a}}(i,t,s,_,o);x>0&&p+C+2*l>u&&(h+=f+l,d.push({width:f,height:p}),m+=f+l,g++,f=p=0),c[x]={left:m,top:p,col:g,width:b,height:C},f=Math.max(f,b),p+=C+l}),h+=f,d.push({width:f,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:o},rtl:s}}=this,a=$n(s,this.left,this.width);if(this.isHorizontal()){let l=0,c=mt(i,this.left+o,this.right-this.lineWidths[l]);for(const d of t)l!==d.row&&(l=d.row,c=mt(i,this.left+o,this.right-this.lineWidths[l])),d.top+=this.top+e+o,d.left=a.leftForLtr(a.x(c),d.width),c+=d.width+o}else{let l=0,c=mt(i,this.top+e+o,this.bottom-this.columnSizes[l].height);for(const d of t)d.col!==l&&(l=d.col,c=mt(i,this.top+e+o,this.bottom-this.columnSizes[l].height)),d.top=c,d.left+=this.left+o,d.left=a.leftForLtr(a.x(d.left),d.width),c+=d.height+o}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;Go(e,this),this._draw(),Xo(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:o}=this,{align:s,labels:a}=e,l=tt.color,c=$n(e.rtl,this.left,this.width),d=rt(a.font),{padding:u}=a,h=d.size,f=h/2;let p;this.drawTitle(),o.textAlign=c.textAlign("left"),o.textBaseline="middle",o.lineWidth=.5,o.font=d.string;const{boxWidth:m,boxHeight:g,itemHeight:_}=rf(a,h),C=this.isHorizontal(),k=this._computeTitleHeight();p=C?{x:mt(s,this.left+u,this.right-i[0]),y:this.top+u+k,line:0}:{x:this.left+u,y:mt(s,this.top+k+u,this.bottom-t[0].height),line:0},Ju(this.ctx,e.textDirection);const y=_+u;this.legendItems.forEach((w,S)=>{o.strokeStyle=w.fontColor,o.fillStyle=w.fontColor;const v=o.measureText(w.text).width,D=c.textAlign(w.textAlign||(w.textAlign=a.textAlign)),I=m+f+v;let P=p.x,q=p.y;c.setWidth(this.width),C?S>0&&P+I+u>this.right&&(q=p.y+=y,p.line++,P=p.x=mt(s,this.left+u,this.right-i[p.line])):S>0&&q+y>this.bottom&&(P=p.x=P+t[p.line].width+u,p.line++,q=p.y=mt(s,this.top+k+u,this.bottom-t[p.line].height)),function(w,S,v){if(isNaN(m)||m<=0||isNaN(g)||g<0)return;o.save();const D=F(v.lineWidth,1);if(o.fillStyle=F(v.fillStyle,l),o.lineCap=F(v.lineCap,"butt"),o.lineDashOffset=F(v.lineDashOffset,0),o.lineJoin=F(v.lineJoin,"miter"),o.lineWidth=D,o.strokeStyle=F(v.strokeStyle,l),o.setLineDash(F(v.lineDash,[])),a.usePointStyle){const I={radius:g*Math.SQRT2/2,pointStyle:v.pointStyle,rotation:v.rotation,borderWidth:D},P=c.xPlus(w,m/2);Iu(o,I,P,S+f,a.pointStyleWidth&&m)}else{const I=S+Math.max((h-g)/2,0),P=c.leftForLtr(w,m),q=gn(v.borderRadius);o.beginPath(),Object.values(q).some(ht=>0!==ht)?Zi(o,{x:P,y:I,w:m,h:g,radius:q}):o.rect(P,I,m,g),o.fill(),0!==D&&o.stroke()}o.restore()}(c.x(P),q,w),P=((n,e,t,i)=>n===(i?"left":"right")?t:"center"===n?(e+t)/2:e)(D,P+m+f,C?P+I:this.right,e.rtl),function(w,S,v){mn(o,v.text,w,S+_/2,d,{strikethrough:v.hidden,textAlign:c.textAlign(v.textAlign)})}(c.x(P),q,w),C?p.x+=I+u:p.y+="string"!=typeof w.text?lf(w,d.lineHeight):y}),Yu(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=rt(t.font),o=gt(t.padding);if(!t.display)return;const s=$n(e.rtl,this.left,this.width),a=this.ctx,l=t.position,d=o.top+i.size/2;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+d,h=mt(e.align,h,this.right-f);else{const m=this.columnSizes.reduce((g,_)=>Math.max(g,_.height),0);u=d+mt(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const p=mt(l,h,h+f);a.textAlign=s.textAlign(oa(l)),a.textBaseline="middle",a.strokeStyle=t.color,a.fillStyle=t.color,a.font=i.string,mn(a,t.text,p,u,i)}_computeTitleHeight(){const e=this.options.title,t=rt(e.font),i=gt(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,o,s;if(pe(e,this.left,this.right)&&pe(t,this.top,this.bottom))for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(o=s[i],pe(e,o.left,o.left+o.width)&&pe(t,o.top,o.top+o.height))return this.legendItems[i];return null}handleEvent(e){const t=this.options;if(!function $T(n,e){return!(("mousemove"!==n&&"mouseout"!==n||!e.onHover&&!e.onLeave)&&(!e.onClick||"click"!==n&&"mouseup"!==n))}(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const o=this._hoveredItem,s=((n,e)=>null!==n&&null!==e&&n.datasetIndex===e.datasetIndex&&n.index===e.index)(o,i);o&&!s&&Y(t.onLeave,[e,o,this],this),this._hoveredItem=i,i&&!s&&Y(t.onHover,[e,i,this],this)}else i&&Y(t.onClick,[e,i,this],this)}}function lf(n,e){return e*(n.text?n.text.length+.5:0)}var QT={id:"legend",_element:af,start(n,e,t){const i=n.legend=new af({ctx:n.ctx,options:t,chart:n});_t.configure(n,i,t),_t.addBox(n,i)},stop(n){_t.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const i=n.legend;_t.configure(n,i,t),i.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const i=e.datasetIndex,o=t.chart;o.isDatasetVisible(i)?(o.hide(i),e.hidden=!0):(o.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:o,color:s,useBorderRadius:a,borderRadius:l}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(t?0:void 0),u=gt(d.borderWidth);return{text:e[c.index].label,fillStyle:d.backgroundColor,fontColor:s,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:i||d.pointStyle,rotation:d.rotation,textAlign:o||d.textAlign,borderRadius:a&&(l||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class Ia extends jt{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const o=Q(i.text)?i.text.length:1;this._padding=gt(i.padding);const s=o*rt(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:i,bottom:o,right:s,options:a}=this,l=a.align;let d,u,h,c=0;return this.isHorizontal()?(u=mt(l,i,s),h=t+e,d=s-i):("left"===a.position?(u=i+e,h=mt(l,o,t),c=-.5*G):(u=s-e,h=mt(l,t,o),c=.5*G),d=o-t),{titleX:u,titleY:h,maxWidth:d,rotation:c}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=rt(t.font),s=i.lineHeight/2+this._padding.top,{titleX:a,titleY:l,maxWidth:c,rotation:d}=this._drawArgs(s);mn(e,t.text,0,0,i,{color:t.color,maxWidth:c,rotation:d,textAlign:oa(t.align),textBaseline:"middle",translation:[a,l]})}}var GT={id:"title",_element:Ia,start(n,e,t){!function KT(n,e){const t=new Ia({ctx:n.ctx,options:e,chart:n});_t.configure(n,t,e),_t.addBox(n,t),n.titleBlock=t}(n,t)},stop(n){_t.removeBox(n,n.titleBlock),delete n.titleBlock},beforeUpdate(n,e,t){const i=n.titleBlock;_t.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ms=new WeakMap;var XT={id:"subtitle",start(n,e,t){const i=new Ia({ctx:n.ctx,options:t,chart:n});_t.configure(n,i,t),_t.addBox(n,i),ms.set(n,i)},stop(n){_t.removeBox(n,ms.get(n)),ms.delete(n)},beforeUpdate(n,e,t){const i=ms.get(n);_t.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Wi={average(n){if(!n.length)return!1;let e,t,i=0,o=0,s=0;for(e=0,t=n.length;e<t;++e){const a=n[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i+=l.x,o+=l.y,++s}}return{x:i/s,y:o/s}},nearest(n,e){if(!n.length)return!1;let s,a,l,t=e.x,i=e.y,o=Number.POSITIVE_INFINITY;for(s=0,a=n.length;s<a;++s){const c=n[s].element;if(c&&c.hasValue()){const u=na(e,c.getCenterPoint());u<o&&(o=u,l=c)}}if(l){const c=l.tooltipPosition();t=c.x,i=c.y}return{x:t,y:i}}};function oe(n,e){return e&&(Q(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function xe(n){return("string"==typeof n||n instanceof String)&&n.indexOf("\n")>-1?n.split("\n"):n}function tS(n,e){const{element:t,datasetIndex:i,index:o}=e,s=n.getDatasetMeta(i).controller,{label:a,value:l}=s.getLabelAndValue(o);return{chart:n,label:a,parsed:s.getParsed(o),raw:n.data.datasets[i].data[o],formattedValue:l,dataset:s.getDataset(),dataIndex:o,datasetIndex:i,element:t}}function cf(n,e){const t=n.chart.ctx,{body:i,footer:o,title:s}=n,{boxWidth:a,boxHeight:l}=e,c=rt(e.bodyFont),d=rt(e.titleFont),u=rt(e.footerFont),h=s.length,f=o.length,p=i.length,m=gt(e.padding);let g=m.height,_=0,x=i.reduce((k,y)=>k+y.before.length+y.lines.length+y.after.length,0);x+=n.beforeBody.length+n.afterBody.length,h&&(g+=h*d.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),x&&(g+=p*(e.displayColors?Math.max(l,c.lineHeight):c.lineHeight)+(x-p)*c.lineHeight+(x-1)*e.bodySpacing),f&&(g+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let b=0;const C=function(k){_=Math.max(_,t.measureText(k).width+b)};return t.save(),t.font=d.string,V(n.title,C),t.font=c.string,V(n.beforeBody.concat(n.afterBody),C),b=e.displayColors?a+2+e.boxPadding:0,V(i,k=>{V(k.before,C),V(k.lines,C),V(k.after,C)}),b=0,t.font=u.string,V(n.footer,C),t.restore(),_+=m.width,{width:_,height:g}}function iS(n,e,t,i){const{x:o,width:s}=t,{width:a,chartArea:{left:l,right:c}}=n;let d="center";return"center"===i?d=o<=(l+c)/2?"left":"right":o<=s/2?d="left":o>=a-s/2&&(d="right"),function nS(n,e,t,i){const{x:o,width:s}=i,a=t.caretSize+t.caretPadding;if("left"===n&&o+s+a>e.width||"right"===n&&o-s-a<0)return!0}(d,n,e,t)&&(d="center"),d}function df(n,e,t){const i=t.yAlign||e.yAlign||function eS(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}(n,t);return{xAlign:t.xAlign||e.xAlign||iS(n,e,t,i),yAlign:i}}function uf(n,e,t,i){const{caretSize:o,caretPadding:s,cornerRadius:a}=n,{xAlign:l,yAlign:c}=t,d=o+s,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:p}=gn(a);let m=function oS(n,e){let{x:t,width:i}=n;return"right"===e?t-=i:"center"===e&&(t-=i/2),t}(e,l);const g=function sS(n,e,t){let{y:i,height:o}=n;return"top"===e?i+=t:i-="bottom"===e?o+t:o/2,i}(e,c,d);return"center"===c?"left"===l?m+=d:"right"===l&&(m-=d):"left"===l?m-=Math.max(u,f)+o:"right"===l&&(m+=Math.max(h,p)+o),{x:at(m,0,i.width-e.width),y:at(g,0,i.height-e.height)}}function gs(n,e,t){const i=gt(t.padding);return"center"===e?n.x+n.width/2:"right"===e?n.x+n.width-i.right:n.x+i.left}function hf(n){return oe([],xe(n))}function ff(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const pf={beforeTitle:fe,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:fe,beforeBody:fe,beforeLabel:fe,label(n){if(this&&this.options&&"dataset"===this.options.mode)return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return B(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:fe,afterBody:fe,beforeFooter:fe,footer:fe,afterFooter:fe};function Tt(n,e,t,i){const o=n[e].call(t,i);return typeof o>"u"?pf[e].call(t,i):o}let mf=(()=>{class n extends jt{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const i=this.chart,o=this.options.setContext(this.getContext()),s=o.enabled&&i.options.animation&&o.animations,a=new eh(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=function rS(n,e,t){return Be(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){const{callbacks:o}=i,s=Tt(o,"beforeTitle",this,t),a=Tt(o,"title",this,t),l=Tt(o,"afterTitle",this,t);let c=[];return c=oe(c,xe(s)),c=oe(c,xe(a)),c=oe(c,xe(l)),c}getBeforeBody(t,i){return hf(Tt(i.callbacks,"beforeBody",this,t))}getBody(t,i){const{callbacks:o}=i,s=[];return V(t,a=>{const l={before:[],lines:[],after:[]},c=ff(o,a);oe(l.before,xe(Tt(c,"beforeLabel",this,a))),oe(l.lines,Tt(c,"label",this,a)),oe(l.after,xe(Tt(c,"afterLabel",this,a))),s.push(l)}),s}getAfterBody(t,i){return hf(Tt(i.callbacks,"afterBody",this,t))}getFooter(t,i){const{callbacks:o}=i,s=Tt(o,"beforeFooter",this,t),a=Tt(o,"footer",this,t),l=Tt(o,"afterFooter",this,t);let c=[];return c=oe(c,xe(s)),c=oe(c,xe(a)),c=oe(c,xe(l)),c}_createItems(t){const i=this._active,o=this.chart.data,s=[],a=[],l=[];let d,u,c=[];for(d=0,u=i.length;d<u;++d)c.push(tS(this.chart,i[d]));return t.filter&&(c=c.filter((h,f,p)=>t.filter(h,f,p,o))),t.itemSort&&(c=c.sort((h,f)=>t.itemSort(h,f,o))),V(c,h=>{const f=ff(t.callbacks,h);s.push(Tt(f,"labelColor",this,h)),a.push(Tt(f,"labelPointStyle",this,h)),l.push(Tt(f,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=a,this.labelTextColors=l,this.dataPoints=c,c}update(t,i){const o=this.options.setContext(this.getContext()),s=this._active;let a,l=[];if(s.length){const c=Wi[o.position].call(this,s,this._eventPosition);l=this._createItems(o),this.title=this.getTitle(l,o),this.beforeBody=this.getBeforeBody(l,o),this.body=this.getBody(l,o),this.afterBody=this.getAfterBody(l,o),this.footer=this.getFooter(l,o);const d=this._size=cf(this,o),u=Object.assign({},c,d),h=df(this.chart,o,u),f=uf(o,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,a={opacity:1,x:f.x,y:f.y,width:d.width,height:d.height,caretX:c.x,caretY:c.y}}else 0!==this.opacity&&(a={opacity:0});this._tooltipItems=l,this.$context=void 0,a&&this._resolveAnimations().update(this,a),t&&o.external&&o.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,o,s){const a=this.getCaretPosition(t,o,s);i.lineTo(a.x1,a.y1),i.lineTo(a.x2,a.y2),i.lineTo(a.x3,a.y3)}getCaretPosition(t,i,o){const{xAlign:s,yAlign:a}=this,{caretSize:l,cornerRadius:c}=o,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:f}=gn(c),{x:p,y:m}=t,{width:g,height:_}=i;let x,b,C,k,y,w;return"center"===a?(y=m+_/2,"left"===s?(x=p,b=x-l,k=y+l,w=y-l):(x=p+g,b=x+l,k=y-l,w=y+l),C=x):(b="left"===s?p+Math.max(d,h)+l:"right"===s?p+g-Math.max(u,f)-l:this.caretX,"top"===a?(k=m,y=k-l,x=b-l,C=b+l):(k=m+_,y=k+l,x=b+l,C=b-l),w=k),{x1:x,x2:b,x3:C,y1:k,y2:y,y3:w}}drawTitle(t,i,o){const s=this.title,a=s.length;let l,c,d;if(a){const u=$n(o.rtl,this.x,this.width);for(t.x=gs(this,o.titleAlign,o),i.textAlign=u.textAlign(o.titleAlign),i.textBaseline="middle",l=rt(o.titleFont),c=o.titleSpacing,i.fillStyle=o.titleColor,i.font=l.string,d=0;d<a;++d)i.fillText(s[d],u.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+c,d+1===a&&(t.y+=o.titleMarginBottom-c)}}_drawColorBox(t,i,o,s,a){const l=this.labelColors[o],c=this.labelPointStyles[o],{boxHeight:d,boxWidth:u}=a,h=rt(a.bodyFont),f=gs(this,"left",a),p=s.x(f),g=i.y+(d<h.lineHeight?(h.lineHeight-d)/2:0);if(a.usePointStyle){const _={radius:Math.min(u,d)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},x=s.leftForLtr(p,u)+u/2,b=g+d/2;t.strokeStyle=a.multiKeyBackground,t.fillStyle=a.multiKeyBackground,ca(t,_,x,b),t.strokeStyle=l.borderColor,t.fillStyle=l.backgroundColor,ca(t,_,x,b)}else{t.lineWidth=L(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,t.strokeStyle=l.borderColor,t.setLineDash(l.borderDash||[]),t.lineDashOffset=l.borderDashOffset||0;const _=s.leftForLtr(p,u),x=s.leftForLtr(s.xPlus(p,1),u-2),b=gn(l.borderRadius);Object.values(b).some(C=>0!==C)?(t.beginPath(),t.fillStyle=a.multiKeyBackground,Zi(t,{x:_,y:g,w:u,h:d,radius:b}),t.fill(),t.stroke(),t.fillStyle=l.backgroundColor,t.beginPath(),Zi(t,{x,y:g+1,w:u-2,h:d-2,radius:b}),t.fill()):(t.fillStyle=a.multiKeyBackground,t.fillRect(_,g,u,d),t.strokeRect(_,g,u,d),t.fillStyle=l.backgroundColor,t.fillRect(x,g+1,u-2,d-2))}t.fillStyle=this.labelTextColors[o]}drawBody(t,i,o){const{body:s}=this,{bodySpacing:a,bodyAlign:l,displayColors:c,boxHeight:d,boxWidth:u,boxPadding:h}=o,f=rt(o.bodyFont);let p=f.lineHeight,m=0;const g=$n(o.rtl,this.x,this.width),_=function(D){i.fillText(D,g.x(t.x+m),t.y+p/2),t.y+=p+a},x=g.textAlign(l);let b,C,k,y,w,S,v;for(i.textAlign=l,i.textBaseline="middle",i.font=f.string,t.x=gs(this,x,o),i.fillStyle=o.bodyColor,V(this.beforeBody,_),m=c&&"right"!==x?"center"===l?u/2+h:u+2+h:0,y=0,S=s.length;y<S;++y){for(b=s[y],C=this.labelTextColors[y],i.fillStyle=C,V(b.before,_),k=b.lines,c&&k.length&&(this._drawColorBox(i,t,y,g,o),p=Math.max(f.lineHeight,d)),w=0,v=k.length;w<v;++w)_(k[w]),p=f.lineHeight;V(b.after,_)}m=0,p=f.lineHeight,V(this.afterBody,_),t.y-=a}drawFooter(t,i,o){const s=this.footer,a=s.length;let l,c;if(a){const d=$n(o.rtl,this.x,this.width);for(t.x=gs(this,o.footerAlign,o),t.y+=o.footerMarginTop,i.textAlign=d.textAlign(o.footerAlign),i.textBaseline="middle",l=rt(o.footerFont),i.fillStyle=o.footerColor,i.font=l.string,c=0;c<a;++c)i.fillText(s[c],d.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+o.footerSpacing}}drawBackground(t,i,o,s){const{xAlign:a,yAlign:l}=this,{x:c,y:d}=t,{width:u,height:h}=o,{topLeft:f,topRight:p,bottomLeft:m,bottomRight:g}=gn(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(c+f,d),"top"===l&&this.drawCaret(t,i,o,s),i.lineTo(c+u-p,d),i.quadraticCurveTo(c+u,d,c+u,d+p),"center"===l&&"right"===a&&this.drawCaret(t,i,o,s),i.lineTo(c+u,d+h-g),i.quadraticCurveTo(c+u,d+h,c+u-g,d+h),"bottom"===l&&this.drawCaret(t,i,o,s),i.lineTo(c+m,d+h),i.quadraticCurveTo(c,d+h,c,d+h-m),"center"===l&&"left"===a&&this.drawCaret(t,i,o,s),i.lineTo(c,d+f),i.quadraticCurveTo(c,d,c+f,d),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){const i=this.chart,o=this.$animations,s=o&&o.x,a=o&&o.y;if(s||a){const l=Wi[t.position].call(this,this._active,this._eventPosition);if(!l)return;const c=this._size=cf(this,t),d=Object.assign({},l,this._size),u=df(i,t,d),h=uf(t,d,u,i);(s._to!==h.x||a._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=c.width,this.height=c.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const i=this.options.setContext(this.getContext());let o=this.opacity;if(!o)return;this._updateAnimationTarget(i);const s={width:this.width,height:this.height},a={x:this.x,y:this.y};o=Math.abs(o)<.001?0:o;const l=gt(i.padding);i.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(t.save(),t.globalAlpha=o,this.drawBackground(a,t,s,i),Ju(t,i.textDirection),a.y+=l.top,this.drawTitle(a,t,i),this.drawBody(a,t,i),this.drawFooter(a,t,i),Yu(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){const o=this._active,s=t.map(({datasetIndex:c,index:d})=>{const u=this.chart.getDatasetMeta(c);if(!u)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:u.data[d],index:d}}),a=!Jo(o,s),l=this._positionChanged(s,i);(a||l)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,o=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,a=this._active||[],l=this._getActiveElements(t,a,i,o),c=this._positionChanged(l,t),d=i||!Jo(l,a)||c;return d&&(this._active=l,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),d}_getActiveElements(t,i,o,s){const a=this.options;if("mouseout"===t.type)return[];if(!s)return i;const l=this.chart.getElementsAtEventForMode(t,a.mode,a,o);return a.reverse&&l.reverse(),l}_positionChanged(t,i){const{caretX:o,caretY:s,options:a}=this,l=Wi[a.position].call(this,t,i);return!1!==l&&(o!==l.x||s!==l.y)}}return T(n,"positioners",Wi),n})();var aS={id:"tooltip",_element:mf,positioners:Wi,afterInit(n,e,t){t&&(n.tooltip=new mf({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(!1===n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0}))return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){n.tooltip&&n.tooltip.handleEvent(e.event,e.replay,e.inChartArea)&&(e.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:pf},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>"filter"!==n&&"itemSort"!==n&&"external"!==n,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},lS=Object.freeze({__proto__:null,Colors:yT,Decimation:wT,Filler:HT,Legend:QT,SubTitle:XT,Title:GT,Tooltip:aS});function gf(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}let hS=(()=>{class n extends vn{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const i=this._addedLabels;if(i.length){const o=this.getLabels();for(const{index:s,label:a}of i)o[s]===a&&o.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,i){if(B(t))return null;const o=this.getLabels();return((n,e)=>null===n?null:at(Math.round(n),0,e))(i=isFinite(i)&&o[i]===t?i:function dS(n,e,t,i){const o=n.indexOf(e);return-1===o?((n,e,t,i)=>("string"==typeof e?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t))(n,e,t,i):o!==n.lastIndexOf(e)?t:o}(o,t,F(i,t),this._addedLabels),o.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:o,max:s}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(o=0),i||(s=this.getLabels().length-1)),this.min=o,this.max=s}buildTicks(){const t=this.min,i=this.max,o=this.options.offset,s=[];let a=this.getLabels();a=0===t&&i===a.length-1?a:a.slice(t,i+1),this._valueRange=Math.max(a.length-(o?0:1),1),this._startValue=this.min-(o?.5:0);for(let l=t;l<=i;l++)s.push({value:l});return s}getLabelForValue(t){return gf.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}return T(n,"id","category"),T(n,"defaults",{ticks:{callback:gf}}),n})();function _f(n,e,{horizontal:t,minRotation:i}){const o=Ht(i),s=(t?Math.sin(o):Math.cos(o))||.001;return Math.min(e/s,.75*e*(""+n).length)}class _s extends vn{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return B(e)||("number"==typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:o,max:s}=this;const a=c=>o=t?o:c,l=c=>s=i?s:c;if(e){const c=ne(o),d=ne(s);c<0&&d<0?l(0):c>0&&d>0&&a(0)}if(o===s){let c=0===s?1:Math.abs(.05*s);l(s+c),e||a(o-c)}this.min=o,this.max=s}getTickLimit(){const e=this.options.ticks;let o,{maxTicksLimit:t,stepSize:i}=e;return i?(o=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,o>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${o} ticks. Limiting to 1000.`),o=1e3)):(o=this.computeTickLimit(),t=t||11),t&&(o=Math.min(t,o)),o}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const a=function fS(n,e){const t=[],{bounds:o,step:s,min:a,max:l,precision:c,count:d,maxTicks:u,maxDigits:h,includeBounds:f}=n,p=s||1,m=u-1,{min:g,max:_}=e,x=!B(a),b=!B(l),C=!B(d),k=(_-g)/(h+1);let w,S,v,D,y=gu((_-g)/m/p)*p;if(y<1e-14&&!x&&!b)return[{value:g},{value:_}];D=Math.ceil(_/y)-Math.floor(g/y),D>m&&(y=gu(D*y/m/p)*p),B(c)||(w=Math.pow(10,c),y=Math.ceil(y*w)/w),"ticks"===o?(S=Math.floor(g/y)*y,v=Math.ceil(_/y)*y):(S=g,v=_),x&&b&&s&&function nk(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}((l-a)/s,y/1e3)?(D=Math.round(Math.min((l-a)/y,u)),y=(l-a)/D,S=a,v=l):C?(S=x?a:S,v=b?l:v,D=d-1,y=(v-S)/D):(D=(v-S)/y,D=Ni(D,Math.round(D),y/1e3)?Math.round(D):Math.ceil(D));const I=Math.max(xu(y),xu(S));w=Math.pow(10,B(c)?I:c),S=Math.round(S*w)/w,v=Math.round(v*w)/w;let P=0;for(x&&(f&&S!==a?(t.push({value:a}),S<a&&P++,Ni(Math.round((S+P*y)*w)/w,a,_f(a,k,n))&&P++):S<a&&P++);P<D;++P){const q=Math.round((S+P*y)*w)/w;if(b&&q>l)break;t.push({value:q})}return b&&f&&v!==l?t.length&&Ni(t[t.length-1].value,l,_f(l,k,n))?t[t.length-1].value=l:t.push({value:l}):(!b||v===l)&&t.push({value:v}),t}({maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&_u(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const o=(i-t)/Math.max(e.length-1,1)/2;t-=o,i+=o}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return Ri(e,this.chart.options.locale,this.options.ticks.format)}}class Pa extends _s{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=et(e)?e:0,this.max=et(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=Ht(this.options.ticks.minRotation),o=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/o))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}T(Pa,"id","linear"),T(Pa,"defaults",{ticks:{callback:Qo.formatters.numeric}});const $i=n=>Math.floor(ze(n)),Cn=(n,e)=>Math.pow(10,$i(n)+e);function xf(n){return n/Math.pow(10,$i(n))==1}function bf(n,e,t){const i=Math.pow(10,t),o=Math.floor(n/i);return Math.ceil(e/i)-o}class Ra extends vn{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const i=_s.prototype.parse.apply(this,[e,t]);if(0!==i)return et(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=et(e)?Math.max(0,e):null,this.max=et(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!et(this._userMin)&&(this.min=e===Cn(this.min,0)?Cn(this.min,-1):Cn(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let i=this.min,o=this.max;const s=l=>i=e?i:l,a=l=>o=t?o:l;i===o&&(i<=0?(s(1),a(10)):(s(Cn(i,-1)),a(Cn(o,1)))),i<=0&&s(Cn(o,-1)),o<=0&&a(Cn(i,1)),this.min=i,this.max=o}buildTicks(){const e=this.options,i=function mS(n,{min:e,max:t}){e=Ot(n.min,e);const i=[],o=$i(e);let s=function pS(n,e){let i=$i(e-n);for(;bf(n,e,i)>10;)i++;for(;bf(n,e,i)<10;)i--;return Math.min(i,$i(n))}(e,t),a=s<0?Math.pow(10,Math.abs(s)):1;const l=Math.pow(10,s),c=o>s?Math.pow(10,o):0,d=Math.round((e-c)*a)/a,u=Math.floor((e-c)/l/10)*l*10;let h=Math.floor((d-u)/Math.pow(10,s)),f=Ot(n.min,Math.round((c+u+h*Math.pow(10,s))*a)/a);for(;f<t;)i.push({value:f,major:xf(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,a=s>=0?1:a),f=Math.round((c+u+h*Math.pow(10,s))*a)/a;const p=Ot(n.max,f);return i.push({value:p,major:xf(p),significand:h}),i}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&_u(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return void 0===e?"0":Ri(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=ze(e),this._valueRange=ze(this.max)-ze(e)}getPixelForValue(e){return(void 0===e||0===e)&&(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(ze(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function Fa(n){const e=n.ticks;if(e.display&&n.display){const t=gt(e.backdropPadding);return F(e.font&&e.font.size,tt.font.size)+t.height}return 0}function gS(n,e,t){return t=Q(t)?t:[t],{w:bk(n,e.string,t),h:t.length*e.lineHeight}}function yf(n,e,t,i,o){return n===i||n===o?{start:e-t/2,end:e+t/2}:n<i||n>o?{start:e-t,end:e}:{start:e,end:e+t}}function xS(n,e,t,i,o){const s=Math.abs(Math.sin(t)),a=Math.abs(Math.cos(t));let l=0,c=0;i.start<e.l?(l=(e.l-i.start)/s,n.l=Math.min(n.l,e.l-l)):i.end>e.r&&(l=(i.end-e.r)/s,n.r=Math.max(n.r,e.r+l)),o.start<e.t?(c=(e.t-o.start)/a,n.t=Math.min(n.t,e.t-c)):o.end>e.b&&(c=(o.end-e.b)/a,n.b=Math.max(n.b,e.b+c))}function bS(n,e,t){const i=n.drawingArea,{extra:o,additionalAngle:s,padding:a,size:l}=t,c=n.getPointPosition(e,i+o+a,s),d=Math.round(ea(Et(c.angle+nt))),u=function wS(n,e,t){return 90===t||270===t?n-=e/2:(t>270||t<90)&&(n-=e),n}(c.y,l.h,d),h=function CS(n){return 0===n||180===n?"center":n<180?"left":"right"}(d),f=function kS(n,e,t){return"right"===t?n-=e:"center"===t&&(n-=e/2),n}(c.x,l.w,h);return{visible:!0,x:c.x,y:u,textAlign:h,left:f,top:u,right:f+l.w,bottom:u+l.h}}function yS(n,e){if(!e)return!0;const{left:t,top:i,right:o,bottom:s}=n;return!(ge({x:t,y:i},e)||ge({x:t,y:s},e)||ge({x:o,y:i},e)||ge({x:o,y:s},e))}function MS(n,e,t){const{left:i,top:o,right:s,bottom:a}=t,{backdropColor:l}=e;if(!B(l)){const c=gn(e.borderRadius),d=gt(e.backdropPadding);n.fillStyle=l;const u=i-d.left,h=o-d.top,f=s-i+d.width,p=a-o+d.height;Object.values(c).some(m=>0!==m)?(n.beginPath(),Zi(n,{x:u,y:h,w:f,h:p,radius:c}),n.fill()):n.fillRect(u,h,f,p)}}function vf(n,e,t,i){const{ctx:o}=n;if(t)o.arc(n.xCenter,n.yCenter,e,0,K);else{let s=n.getPointPosition(0,e);o.moveTo(s.x,s.y);for(let a=1;a<i;a++)s=n.getPointPosition(a,e),o.lineTo(s.x,s.y)}}T(Ra,"id","logarithmic"),T(Ra,"defaults",{ticks:{callback:Qo.formatters.logarithmic,major:{enabled:!0}}});class Qi extends _s{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=gt(Fa(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=et(e)&&!isNaN(e)?e:0,this.max=et(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Fa(this.options))}generateTickLabels(e){_s.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{const o=Y(this.options.pointLabels.callback,[t,i],this);return o||0===o?o:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?function _S(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],o=[],s=n._pointLabels.length,a=n.options.pointLabels,l=a.centerPointLabels?G/s:0;for(let c=0;c<s;c++){const d=a.setContext(n.getPointLabelContext(c));o[c]=d.padding;const u=n.getPointPosition(c,n.drawingArea+o[c],l),h=rt(d.font),f=gS(n.ctx,h,n._pointLabels[c]);i[c]=f;const p=Et(n.getIndexAngle(c)+l),m=Math.round(ea(p));xS(t,e,p,yf(m,u.x,f.w,0,180),yf(m,u.y,f.h,90,270))}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=function vS(n,e,t){const i=[],o=n._pointLabels.length,s=n.options,{centerPointLabels:a,display:l}=s.pointLabels,c={extra:Fa(s)/2,additionalAngle:a?G/o:0};let d;for(let u=0;u<o;u++){c.padding=t[u],c.size=e[u];const h=bS(n,u,c);i.push(h),"auto"===l&&(h.visible=yS(h,d),h.visible&&(d=h))}return i}(n,i,o)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,o){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-o)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,o))}getIndexAngle(e){return Et(e*(K/(this._pointLabels.length||1))+Ht(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(B(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(B(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const i=t[e];return function AS(n,e,t){return Be(n,{label:t,index:e,type:"pointLabel"})}(this.getContext(),e,i)}}getPointPosition(e,t,i=0){const o=this.getIndexAngle(e)-nt+i;return{x:Math.cos(o)*t+this.xCenter,y:Math.sin(o)*t+this.yCenter,angle:o}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:i,right:o,bottom:s}=this._pointLabelItems[e];return{left:t,top:i,right:o,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),vf(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:i,grid:o,border:s}=t,a=this._pointLabels.length;let l,c,d;if(t.pointLabels.display&&function TS(n,e){const{ctx:t,options:{pointLabels:i}}=n;for(let o=e-1;o>=0;o--){const s=n._pointLabelItems[o];if(!s.visible)continue;const a=i.setContext(n.getPointLabelContext(o));MS(t,a,s);const l=rt(a.font),{x:c,y:d,textAlign:u}=s;mn(t,n._pointLabels[o],c,d+l.lineHeight/2,l,{color:a.color,textAlign:u,textBaseline:"middle"})}}(this,a),o.display&&this.ticks.forEach((u,h)=>{if(0!==h){c=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(h),p=o.setContext(f),m=s.setContext(f);!function SS(n,e,t,i,o){const s=n.ctx,a=e.circular,{color:l,lineWidth:c}=e;!a&&!i||!l||!c||t<0||(s.save(),s.strokeStyle=l,s.lineWidth=c,s.setLineDash(o.dash),s.lineDashOffset=o.dashOffset,s.beginPath(),vf(n,t,a,i),s.closePath(),s.stroke(),s.restore())}(this,p,c,a,m)}}),i.display){for(e.save(),l=a-1;l>=0;l--){const u=i.setContext(this.getPointLabelContext(l)),{color:h,lineWidth:f}=u;!f||!h||(e.lineWidth=f,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),d=this.getPointPosition(l,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(d.x,d.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;const o=this.getIndexAngle(0);let s,a;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(o),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((l,c)=>{if(0===c&&!t.reverse)return;const d=i.setContext(this.getContext(c)),u=rt(d.font);if(s=this.getDistanceFromCenterForValue(this.ticks[c].value),d.showLabelBackdrop){e.font=u.string,a=e.measureText(l.label).width,e.fillStyle=d.backdropColor;const h=gt(d.backdropPadding);e.fillRect(-a/2-h.left,-s-u.size/2-h.top,a+h.width,u.size+h.height)}mn(e,l.label,0,-s,u,{color:d.color})}),e.restore()}drawTitle(){}}T(Qi,"id","radialLinear"),T(Qi,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Qo.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:n=>n,padding:5,centerPointLabels:!1}}),T(Qi,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),T(Qi,"descriptors",{angleLines:{_fallback:"grid"}});const xs={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},St=Object.keys(xs);function DS(n,e){return n-e}function Cf(n,e){if(B(e))return null;const t=n._adapter,{parser:i,round:o,isoWeekday:s}=n._parseOpts;let a=e;return"function"==typeof i&&(a=i(a)),et(a)||(a="string"==typeof i?t.parse(a,i):t.parse(a)),null===a?null:(o&&(a="week"!==o||!Jn(s)&&!0!==s?t.startOf(a,o):t.startOf(a,"isoWeek",s)),+a)}function kf(n,e,t,i){const o=St.length;for(let s=St.indexOf(n);s<o-1;++s){const a=xs[St[s]];if(a.common&&Math.ceil((t-e)/((a.steps?a.steps:Number.MAX_SAFE_INTEGER)*a.size))<=i)return St[s]}return St[o-1]}function wf(n,e,t){if(t){if(t.length){const{lo:i,hi:o}=ia(t,e);n[t[i]>=e?t[i]:t[o]]=!0}}else n[e]=!0}function Mf(n,e,t){const i=[],o={},s=e.length;let a,l;for(a=0;a<s;++a)l=e[a],o[l]=a,i.push({value:l,major:!1});return 0!==s&&t?function NS(n,e,t,i){const o=n._adapter,s=+o.startOf(e[0].value,i),a=e[e.length-1].value;let l,c;for(l=s;l<=a;l=+o.add(l,1,i))c=t[l],c>=0&&(e[c].major=!0);return e}(n,i,o,t):i}let Za=(()=>{class n extends vn{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i={}){const o=t.time||(t.time={}),s=this._adapter=new Lw__date(t.adapters.date);s.init(i),Oi(o.displayFormats,s.formats()),this._parseOpts={parser:o.parser,round:o.round,isoWeekday:o.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return void 0===t?null:Cf(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,i=this._adapter,o=t.time.unit||"day";let{min:s,max:a,minDefined:l,maxDefined:c}=this.getUserBounds();function d(u){!l&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!c&&!isNaN(u.max)&&(a=Math.max(a,u.max))}(!l||!c)&&(d(this._getLabelBounds()),("ticks"!==t.bounds||"labels"!==t.ticks.source)&&d(this.getMinMax(!1))),s=et(s)&&!isNaN(s)?s:+i.startOf(Date.now(),o),a=et(a)&&!isNaN(a)?a:+i.endOf(Date.now(),o)+1,this.min=Math.min(s,a-1),this.max=Math.max(s+1,a)}_getLabelBounds(){const t=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],o=t[t.length-1]),{min:i,max:o}}buildTicks(){const t=this.options,i=t.time,o=t.ticks,s="labels"===o.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const a=this.min,c=function rk(n,e,t){let i=0,o=n.length;for(;i<o&&n[i]<e;)i++;for(;o>i&&n[o-1]>t;)o--;return i>0||o<n.length?n.slice(i,o):n}(s,a,this.max);return this._unit=i.unit||(o.autoSkip?kf(i.minUnit,this.min,this.max,this._getLabelCapacity(a)):function OS(n,e,t,i,o){for(let s=St.length-1;s>=St.indexOf(t);s--){const a=St[s];if(xs[a].common&&n._adapter.diff(o,i,a)>=e-1)return a}return St[t?St.indexOf(t):0]}(this,c.length,i.minUnit,this.min,this.max)),this._majorUnit=o.major.enabled&&"year"!==this._unit?function ES(n){for(let e=St.indexOf(n)+1,t=St.length;e<t;++e)if(xs[St[e]].common)return St[e]}(this._unit):void 0,this.initOffsets(s),t.reverse&&c.reverse(),Mf(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let s,a,i=0,o=0;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),i=1===t.length?1-s:(this.getDecimalForValue(t[1])-s)/2,a=this.getDecimalForValue(t[t.length-1]),o=1===t.length?a:(a-this.getDecimalForValue(t[t.length-2]))/2);const l=t.length<3?.5:.25;i=at(i,0,l),o=at(o,0,l),this._offsets={start:i,end:o,factor:1/(i+1+o)}}_generate(){const t=this._adapter,i=this.min,o=this.max,s=this.options,a=s.time,l=a.unit||kf(a.minUnit,i,o,this._getLabelCapacity(i)),c=F(s.ticks.stepSize,1),d="week"===l&&a.isoWeekday,u=Jn(d)||!0===d,h={};let p,m,f=i;if(u&&(f=+t.startOf(f,"isoWeek",d)),f=+t.startOf(f,u?"day":l),t.diff(o,i,l)>1e5*c)throw new Error(i+" and "+o+" are too far apart with stepSize of "+c+" "+l);const g="data"===s.ticks.source&&this.getDataTimestamps();for(p=f,m=0;p<o;p=+t.add(p,c,l),m++)wf(h,p,g);return(p===o||"ticks"===s.bounds||1===m)&&wf(h,p,g),Object.keys(h).sort((_,x)=>_-x).map(_=>+_)}getLabelForValue(t){const o=this.options.time;return this._adapter.format(t,o.tooltipFormat?o.tooltipFormat:o.displayFormats.datetime)}format(t,i){return this._adapter.format(t,i||this.options.time.displayFormats[this._unit])}_tickFormatFunction(t,i,o,s){const a=this.options,l=a.ticks.callback;if(l)return Y(l,[t,i,o],this);const c=a.time.displayFormats,d=this._unit,u=this._majorUnit,f=u&&c[u],p=o[i];return this._adapter.format(t,s||(u&&f&&p&&p.major?f:d&&c[d]))}generateTickLabels(t){let i,o,s;for(i=0,o=t.length;i<o;++i)s=t[i],s.label=this._tickFormatFunction(s.value,i,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const i=this._offsets,o=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+o)*i.factor)}getValueForPixel(t){const i=this._offsets,o=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+o*(this.max-this.min)}_getLabelSize(t){const i=this.options.ticks,o=this.ctx.measureText(t).width,s=Ht(this.isHorizontal()?i.maxRotation:i.minRotation),a=Math.cos(s),l=Math.sin(s),c=this._resolveTickFontOptions(0).size;return{w:o*a+c*l,h:o*l+c*a}}_getLabelCapacity(t){const i=this.options.time,o=i.displayFormats,s=o[i.unit]||o.millisecond,a=this._tickFormatFunction(t,0,Mf(this,[t],this._majorUnit),s),l=this._getLabelSize(a),c=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return c>0?c:1}getDataTimestamps(){let i,o,t=this._cache.data||[];if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,o=s.length;i<o;++i)t=t.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let i,o;if(t.length)return t;const s=this.getLabels();for(i=0,o=s.length;i<o;++i)t.push(Cf(this,s[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Cu(t.sort(DS))}}return T(n,"id","time"),T(n,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}}),n})();function bs(n,e,t){let s,a,l,c,i=0,o=n.length-1;t?(e>=n[i].pos&&e<=n[o].pos&&({lo:i,hi:o}=me(n,"pos",e)),({pos:s,time:l}=n[i]),({pos:a,time:c}=n[o])):(e>=n[i].time&&e<=n[o].time&&({lo:i,hi:o}=me(n,"time",e)),({time:s,pos:l}=n[i]),({time:a,pos:c}=n[o]));const d=a-s;return d?l+(c-l)*(e-s)/d:l}class La extends Za{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=bs(t,this.min),this._tableRange=bs(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,o=[],s=[];let a,l,c,d,u;for(a=0,l=e.length;a<l;++a)d=e[a],d>=t&&d<=i&&o.push(d);if(o.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(a=0,l=o.length;a<l;++a)u=o[a+1],c=o[a-1],d=o[a],Math.round((u+c)/2)!==d&&s.push({time:d,pos:a/(l-1)});return s}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return e=t.length&&i.length?this.normalize(t.concat(i)):t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(bs(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return bs(this._table,i*this._tableRange+this._minPos,!0)}}T(La,"id","timeseries"),T(La,"defaults",Za.defaults);const PS=[Zw,pT,lS,Object.freeze({__proto__:null,CategoryScale:hS,LinearScale:Pa,LogarithmicScale:Ra,RadialLinearScale:Qi,TimeScale:Za,TimeSeriesScale:La})],ys=function ZS(n,e){return n===e||n!=n&&e!=e},vs=function LS(n,e){for(var t=n.length;t--;)if(ys(n[t][0],e))return t;return-1};var zS=Array.prototype.splice;function Kn(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Kn.prototype.clear=function RS(){this.__data__=[],this.size=0},Kn.prototype.delete=function BS(n){var e=this.__data__,t=vs(e,n);return!(t<0||(t==e.length-1?e.pop():zS.call(e,t,1),--this.size,0))},Kn.prototype.get=function US(n){var e=this.__data__,t=vs(e,n);return t<0?void 0:e[t][1]},Kn.prototype.has=function jS(n){return vs(this.__data__,n)>-1},Kn.prototype.set=function YS(n,e){var t=this.__data__,i=vs(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this};const Cs=Kn,Ki=$e(Object,"create");var dA=Object.prototype.hasOwnProperty;var pA=Object.prototype.hasOwnProperty;function Gn(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Gn.prototype.clear=function oA(){this.__data__=Ki?Ki(null):{},this.size=0},Gn.prototype.delete=function rA(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e},Gn.prototype.get=function uA(n){var e=this.__data__;if(Ki){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return dA.call(e,n)?e[n]:void 0},Gn.prototype.has=function mA(n){var e=this.__data__;return Ki?void 0!==e[n]:pA.call(e,n)},Gn.prototype.set=function xA(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Ki&&void 0===e?"__lodash_hash_undefined__":e,this};const Tf=Gn,ks=function wA(n,e){var t=n.__data__;return function CA(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}(e)?t["string"==typeof e?"string":"hash"]:t.map};function Xn(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Xn.prototype.clear=function yA(){this.size=0,this.__data__={hash:new Tf,map:new(ri||Cs),string:new Tf}},Xn.prototype.delete=function MA(n){var e=ks(this,n).delete(n);return this.size-=e?1:0,e},Xn.prototype.get=function SA(n){return ks(this,n).get(n)},Xn.prototype.has=function DA(n){return ks(this,n).has(n)},Xn.prototype.set=function EA(n,e){var t=ks(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this};const IA=Xn;function ti(n){var e=this.__data__=new Cs(n);this.size=e.size}ti.prototype.clear=function $S(){this.__data__=new Cs,this.size=0},ti.prototype.delete=function KS(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t},ti.prototype.get=function XS(n){return this.__data__.get(n)},ti.prototype.has=function eA(n){return this.__data__.has(n)},ti.prototype.set=function RA(n,e){var t=this.__data__;if(t instanceof Cs){var i=t.__data__;if(!ri||i.length<199)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new IA(i)}return t.set(n,e),this.size=t.size,this};const ZA=ti;var LA=function(){try{var n=$e(Object,"defineProperty");return n({},"",{}),n}catch{}}();const ws=LA,qa=function qA(n,e,t){"__proto__"==e&&ws?ws(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t},za=function zA(n,e,t){(void 0!==t&&!ys(n[e],t)||void 0===t&&!(e in n))&&qa(n,e,t)};var VA=function BA(n){return function(e,t,i){for(var o=-1,s=Object(e),a=i(e),l=a.length;l--;){var c=a[n?l:++o];if(!1===t(s[c],c,s))break}return e}}();const UA=VA;var Sf="object"==typeof exports&&exports&&!exports.nodeType&&exports,Af=Sf&&"object"==typeof module&&module&&!module.nodeType&&module,Df=Af&&Af.exports===Sf?Yt.Buffer:void 0,Of=Df?Df.allocUnsafe:void 0;const Ef=Yt.Uint8Array,KA=function QA(n,e){var t=e?function WA(n){var e=new n.constructor(n.byteLength);return new Ef(e).set(new Ef(n)),e}(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)};var Nf=Object.create,tD=function(){function n(){}return function(e){if(!Ye(e))return{};if(Nf)return Nf(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const eD=tD,If=ja(Object.getPrototypeOf,Object);var Pf=Function.prototype.toString,dD=Object.prototype.hasOwnProperty,uD=Pf.call(Object);const Ba=function pD(n,e){if(("constructor"!==e||"function"!=typeof n[e])&&"__proto__"!=e)return n[e]};var gD=Object.prototype.hasOwnProperty;const xD=function _D(n,e,t){var i=n[e];(!gD.call(n,e)||!ys(i,t)||void 0===t&&!(e in n))&&qa(n,e,t)};var wD=/^(?:0|[1-9]\d*)$/;const Rf=function MD(n,e){var t=typeof n;return!!(e=e??9007199254740991)&&("number"==t||"symbol"!=t&&wD.test(n))&&n>-1&&n%1==0&&n<e};var SD=Object.prototype.hasOwnProperty;const DD=function AD(n,e){var t=lo(n),i=!t&&ao(n),o=!t&&!i&&Ls(n),s=!t&&!i&&!o&&zs(n),a=t||i||o||s,l=a?function vD(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}(n.length,String):[],c=l.length;for(var d in n)(e||SD.call(n,d))&&(!a||!("length"==d||o&&("offset"==d||"parent"==d)||s&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||Rf(d,c)))&&l.push(d);return l};var ID=Object.prototype.hasOwnProperty;const RD=function PD(n){if(!Ye(n))return function OD(n){var e=[];if(null!=n)for(var t in Object(n))e.push(t);return e}(n);var e=so(n),t=[];for(var i in n)"constructor"==i&&(e||!ID.call(n,i))||t.push(i);return t},Ff=function FD(n){return co(n)?DD(n,!0):RD(n)},LD=function ZD(n){return function bD(n,e,t,i){var o=!t;t||(t={});for(var s=-1,a=e.length;++s<a;){var l=e[s],c=i?i(t[l],n[l],l,t,n):void 0;void 0===c&&(c=n[l]),o?qa(t,l,c):xD(t,l,c)}return t}(n,Ff(n))},zD=function qD(n,e,t,i,o,s,a){var l=Ba(n,t),c=Ba(e,t),d=a.get(c);if(d)za(n,t,d);else{var u=s?s(l,c,t+"",n,e,a):void 0,h=void 0===u;if(h){var f=lo(c),p=!f&&Ls(c),m=!f&&!p&&zs(c);u=c,f||p||m?lo(l)?u=l:function sD(n){return ai(n)&&co(n)}(l)?u=function GA(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}(l):p?(h=!1,u=function jA(n,e){if(e)return n.slice();var t=n.length,i=Of?Of(t):new n.constructor(t);return n.copy(i),i}(c,!0)):m?(h=!1,u=KA(c,!0)):u=[]:function hD(n){if(!ai(n)||"[object Object]"!=wn(n))return!1;var e=If(n);if(null===e)return!0;var t=dD.call(e,"constructor")&&e.constructor;return"function"==typeof t&&t instanceof t&&Pf.call(t)==uD}(c)||ao(c)?(u=l,ao(l)?u=LD(l):(!Ye(l)||Ns(l))&&(u=function iD(n){return"function"!=typeof n.constructor||so(n)?{}:eD(If(n))}(c))):h=!1}h&&(a.set(c,u),o(u,c,i,s,a),a.delete(c)),za(n,t,u)}},BD=function Zf(n,e,t,i,o){n!==e&&UA(e,function(s,a){if(o||(o=new ZA),Ye(s))zD(n,e,a,t,Zf,i,o);else{var l=i?i(Ba(n,a),s,a+"",n,e,o):void 0;void 0===l&&(l=s),za(n,a,l)}},Ff)},Lf=function VD(n){return n};var qf=Math.max;const WD=function YD(n){return function(){return n}};var $D=ws?function(n,e){return ws(n,"toString",{configurable:!0,enumerable:!1,value:WD(e),writable:!0})}:Lf,XD=Date.now,eO=function tO(n){var e=0,t=0;return function(){var i=XD(),o=16-(i-t);if(t=i,o>0){if(++e>=800)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}($D);const nO=eO,oO=function iO(n,e){return nO(function jD(n,e,t){return e=qf(void 0===e?n.length-1:e,0),function(){for(var i=arguments,o=-1,s=qf(i.length-e,0),a=Array(s);++o<s;)a[o]=i[e+o];o=-1;for(var l=Array(e+1);++o<e;)l[o]=i[o];return l[e]=t(a),function UD(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}(n,this,l)}}(n,e,Lf),n+"")};var lO=function aO(n){return oO(function(e,t){var i=-1,o=t.length,s=o>1?t[o-1]:void 0,a=o>2?t[2]:void 0;for(s=n.length>3&&"function"==typeof s?(o--,s):void 0,a&&function sO(n,e,t){if(!Ye(t))return!1;var i=typeof e;return!!("number"==i?co(t)&&Rf(e,t.length):"string"==i&&e in t)&&ys(t[e],n)}(t[0],t[1],a)&&(s=o<3?void 0:s,o=1),e=Object(e);++i<o;){var l=t[i];l&&n(e,l,i,s)}return e})}(function(n,e,t){BD(n,e,t)});const cO=lO,dO=[[255,99,132],[54,162,235],[255,206,86],[231,233,237],[75,192,192],[151,187,205],[220,220,220],[247,70,74],[70,191,189],[253,180,92],[148,159,177],[77,83,96]],uO={plugins:{colors:{enabled:!1}},datasets:{line:{backgroundColor:n=>He(je(n.datasetIndex),.4),borderColor:n=>He(je(n.datasetIndex),1),pointBackgroundColor:n=>He(je(n.datasetIndex),1),pointBorderColor:"#fff"},bar:{backgroundColor:n=>He(je(n.datasetIndex),.6),borderColor:n=>He(je(n.datasetIndex),1)},get radar(){return this.line},doughnut:{backgroundColor:n=>He(je(n.dataIndex),.6),borderColor:"#fff"},get pie(){return this.doughnut},polarArea:{backgroundColor:n=>He(je(n.dataIndex),.6),borderColor:n=>He(je(n.dataIndex),1)},get bubble(){return this.doughnut},get scatter(){return this.doughnut},get area(){return this.polarArea}}};function He(n,e){return"rgba("+n.concat(e).join(",")+")"}function Va(n,e){return Math.floor(Math.random()*(e-n+1))+n}function je(n=0){return dO[n]||function hO(){return[Va(0,255),Va(0,255),Va(0,255)]}()}let zf=(()=>{class n{constructor(){this.generateColors=!0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();Ma.register(...PS);let fO=(()=>{class n{constructor(t){t?.plugins&&Ma.register(...t?.plugins);const i=cO(t?.generateColors?uO:{},t?.defaults||{});tt.set(i)}static forRoot(t){return{ngModule:n,providers:[{provide:zf,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(r.LFG(zf,8))},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({}),n})();var pO=Z(4526);let mO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({imports:[O.ez]}),n})();var Bf=Z(5035),gO=Z(6497);let _O=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({providers:[Bf.e1,gO.C],imports:[pO.q,fO,mO,z2,R.u5,R.UX,O.ez,vC,As.X,Bf._X]}),n})()}}]);